<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>09-正则与三剑客 | devops</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/devops/public/favicon.ico">
    <meta name="description" content="快来玩devops">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/devops/public/assets/css/0.styles.4a69f283.css" as="style"><link rel="preload" href="/devops/public/assets/js/app.8794b62e.js" as="script"><link rel="preload" href="/devops/public/assets/js/111.99447e31.js" as="script"><link rel="preload" href="/devops/public/assets/js/1.774fca24.js" as="script"><link rel="preload" href="/devops/public/assets/js/161.7841f8ac.js" as="script"><link rel="prefetch" href="/devops/public/assets/js/10.3f75f6aa.js"><link rel="prefetch" href="/devops/public/assets/js/100.faa4dd41.js"><link rel="prefetch" href="/devops/public/assets/js/101.cd34298e.js"><link rel="prefetch" href="/devops/public/assets/js/102.f0918622.js"><link rel="prefetch" href="/devops/public/assets/js/103.b2dcc22c.js"><link rel="prefetch" href="/devops/public/assets/js/104.7faec024.js"><link rel="prefetch" href="/devops/public/assets/js/105.9017b632.js"><link rel="prefetch" href="/devops/public/assets/js/106.2ddb7a25.js"><link rel="prefetch" href="/devops/public/assets/js/107.c26272c0.js"><link rel="prefetch" href="/devops/public/assets/js/108.402d29dd.js"><link rel="prefetch" href="/devops/public/assets/js/109.99b44b20.js"><link rel="prefetch" href="/devops/public/assets/js/11.2b095e67.js"><link rel="prefetch" href="/devops/public/assets/js/110.0474731a.js"><link rel="prefetch" href="/devops/public/assets/js/112.dd630349.js"><link rel="prefetch" href="/devops/public/assets/js/113.1e6ebf76.js"><link rel="prefetch" href="/devops/public/assets/js/114.da2ebdcd.js"><link rel="prefetch" href="/devops/public/assets/js/115.e8f9f3dd.js"><link rel="prefetch" href="/devops/public/assets/js/116.bff8e648.js"><link rel="prefetch" href="/devops/public/assets/js/117.7b19a410.js"><link rel="prefetch" href="/devops/public/assets/js/118.4435922f.js"><link rel="prefetch" href="/devops/public/assets/js/119.288fa102.js"><link rel="prefetch" href="/devops/public/assets/js/12.729e1717.js"><link rel="prefetch" href="/devops/public/assets/js/120.c44fd046.js"><link rel="prefetch" href="/devops/public/assets/js/121.112d846c.js"><link rel="prefetch" href="/devops/public/assets/js/122.51998214.js"><link rel="prefetch" href="/devops/public/assets/js/123.61ff2e28.js"><link rel="prefetch" href="/devops/public/assets/js/124.938f08f4.js"><link rel="prefetch" href="/devops/public/assets/js/125.38f8544c.js"><link rel="prefetch" href="/devops/public/assets/js/126.0fc5de7a.js"><link rel="prefetch" href="/devops/public/assets/js/127.cd6cac05.js"><link rel="prefetch" href="/devops/public/assets/js/128.732d7e0c.js"><link rel="prefetch" href="/devops/public/assets/js/129.be34850c.js"><link rel="prefetch" href="/devops/public/assets/js/13.501fb6cd.js"><link rel="prefetch" href="/devops/public/assets/js/130.25674980.js"><link rel="prefetch" href="/devops/public/assets/js/131.7e0a46b6.js"><link rel="prefetch" href="/devops/public/assets/js/132.f75b0d43.js"><link rel="prefetch" href="/devops/public/assets/js/133.469f0e93.js"><link rel="prefetch" href="/devops/public/assets/js/134.11e72f2c.js"><link rel="prefetch" href="/devops/public/assets/js/135.ae59c823.js"><link rel="prefetch" href="/devops/public/assets/js/136.ea73ef91.js"><link rel="prefetch" href="/devops/public/assets/js/137.dbc674a2.js"><link rel="prefetch" href="/devops/public/assets/js/138.6fc59741.js"><link rel="prefetch" href="/devops/public/assets/js/139.54f3289f.js"><link rel="prefetch" href="/devops/public/assets/js/14.46892eff.js"><link rel="prefetch" href="/devops/public/assets/js/140.7bee5c94.js"><link rel="prefetch" href="/devops/public/assets/js/141.b4b5659b.js"><link rel="prefetch" href="/devops/public/assets/js/142.1de279d3.js"><link rel="prefetch" href="/devops/public/assets/js/143.efec542b.js"><link rel="prefetch" href="/devops/public/assets/js/144.3952f3f9.js"><link rel="prefetch" href="/devops/public/assets/js/145.c977095d.js"><link rel="prefetch" href="/devops/public/assets/js/146.46198f00.js"><link rel="prefetch" href="/devops/public/assets/js/147.9064ac75.js"><link rel="prefetch" href="/devops/public/assets/js/148.e44f0f67.js"><link rel="prefetch" href="/devops/public/assets/js/149.945f7b38.js"><link rel="prefetch" href="/devops/public/assets/js/15.a36ca84e.js"><link rel="prefetch" href="/devops/public/assets/js/150.52a5d410.js"><link rel="prefetch" href="/devops/public/assets/js/151.f4efbac8.js"><link rel="prefetch" href="/devops/public/assets/js/152.777ba9c0.js"><link rel="prefetch" href="/devops/public/assets/js/153.317dd6e2.js"><link rel="prefetch" href="/devops/public/assets/js/154.3b8c6be1.js"><link rel="prefetch" href="/devops/public/assets/js/155.d9b32b65.js"><link rel="prefetch" href="/devops/public/assets/js/156.48f6a00f.js"><link rel="prefetch" href="/devops/public/assets/js/157.fbac08ae.js"><link rel="prefetch" href="/devops/public/assets/js/158.ea99c10f.js"><link rel="prefetch" href="/devops/public/assets/js/159.dc349d59.js"><link rel="prefetch" href="/devops/public/assets/js/16.c7bbee7b.js"><link rel="prefetch" href="/devops/public/assets/js/160.34463874.js"><link rel="prefetch" href="/devops/public/assets/js/162.3656fa74.js"><link rel="prefetch" href="/devops/public/assets/js/163.fead5e11.js"><link rel="prefetch" href="/devops/public/assets/js/164.98dabf98.js"><link rel="prefetch" href="/devops/public/assets/js/165.8bed5828.js"><link rel="prefetch" href="/devops/public/assets/js/166.037d8e81.js"><link rel="prefetch" href="/devops/public/assets/js/167.ee7905f1.js"><link rel="prefetch" href="/devops/public/assets/js/168.ecc58dba.js"><link rel="prefetch" href="/devops/public/assets/js/169.61beed69.js"><link rel="prefetch" href="/devops/public/assets/js/17.b4258a4c.js"><link rel="prefetch" href="/devops/public/assets/js/170.fa111e23.js"><link rel="prefetch" href="/devops/public/assets/js/171.12abf5f5.js"><link rel="prefetch" href="/devops/public/assets/js/172.facee1e6.js"><link rel="prefetch" href="/devops/public/assets/js/173.d7faef39.js"><link rel="prefetch" href="/devops/public/assets/js/174.cee6ba6e.js"><link rel="prefetch" href="/devops/public/assets/js/175.8f24e0ee.js"><link rel="prefetch" href="/devops/public/assets/js/176.dc20903c.js"><link rel="prefetch" href="/devops/public/assets/js/177.9d0fd8f9.js"><link rel="prefetch" href="/devops/public/assets/js/178.5d99d7b1.js"><link rel="prefetch" href="/devops/public/assets/js/179.c32bef62.js"><link rel="prefetch" href="/devops/public/assets/js/18.d2a47f73.js"><link rel="prefetch" href="/devops/public/assets/js/180.373c1b5f.js"><link rel="prefetch" href="/devops/public/assets/js/181.1fa89bb4.js"><link rel="prefetch" href="/devops/public/assets/js/182.7a430829.js"><link rel="prefetch" href="/devops/public/assets/js/183.ed8b1671.js"><link rel="prefetch" href="/devops/public/assets/js/184.13016ef9.js"><link rel="prefetch" href="/devops/public/assets/js/185.9270c978.js"><link rel="prefetch" href="/devops/public/assets/js/186.4ba2d355.js"><link rel="prefetch" href="/devops/public/assets/js/187.c6b364a8.js"><link rel="prefetch" href="/devops/public/assets/js/188.95b91c31.js"><link rel="prefetch" href="/devops/public/assets/js/189.2de64b5c.js"><link rel="prefetch" href="/devops/public/assets/js/19.aaf85e94.js"><link rel="prefetch" href="/devops/public/assets/js/190.18b7d06a.js"><link rel="prefetch" href="/devops/public/assets/js/191.f9a7d8ff.js"><link rel="prefetch" href="/devops/public/assets/js/192.67f9df9d.js"><link rel="prefetch" href="/devops/public/assets/js/193.56082b0d.js"><link rel="prefetch" href="/devops/public/assets/js/194.c824db21.js"><link rel="prefetch" href="/devops/public/assets/js/195.e450f321.js"><link rel="prefetch" href="/devops/public/assets/js/196.25e21eba.js"><link rel="prefetch" href="/devops/public/assets/js/197.eb8bb007.js"><link rel="prefetch" href="/devops/public/assets/js/198.2a5287a9.js"><link rel="prefetch" href="/devops/public/assets/js/199.441efa1e.js"><link rel="prefetch" href="/devops/public/assets/js/20.1eb59ac6.js"><link rel="prefetch" href="/devops/public/assets/js/200.f17a3fc9.js"><link rel="prefetch" href="/devops/public/assets/js/201.773819fa.js"><link rel="prefetch" href="/devops/public/assets/js/202.300907a5.js"><link rel="prefetch" href="/devops/public/assets/js/203.6eb7e12d.js"><link rel="prefetch" href="/devops/public/assets/js/204.a8dbcd7d.js"><link rel="prefetch" href="/devops/public/assets/js/205.3813e726.js"><link rel="prefetch" href="/devops/public/assets/js/206.0f51c888.js"><link rel="prefetch" href="/devops/public/assets/js/207.988d4d6b.js"><link rel="prefetch" href="/devops/public/assets/js/208.4c914282.js"><link rel="prefetch" href="/devops/public/assets/js/209.1186a9b8.js"><link rel="prefetch" href="/devops/public/assets/js/21.812c51e8.js"><link rel="prefetch" href="/devops/public/assets/js/210.019a0310.js"><link rel="prefetch" href="/devops/public/assets/js/211.11dc4c1a.js"><link rel="prefetch" href="/devops/public/assets/js/212.c26467cf.js"><link rel="prefetch" href="/devops/public/assets/js/213.7bf4ab6b.js"><link rel="prefetch" href="/devops/public/assets/js/214.f34adf32.js"><link rel="prefetch" href="/devops/public/assets/js/215.989e2e50.js"><link rel="prefetch" href="/devops/public/assets/js/216.e02ab368.js"><link rel="prefetch" href="/devops/public/assets/js/217.06b13b66.js"><link rel="prefetch" href="/devops/public/assets/js/218.95d3f0bd.js"><link rel="prefetch" href="/devops/public/assets/js/219.bc9b1c9d.js"><link rel="prefetch" href="/devops/public/assets/js/22.cc74f7ca.js"><link rel="prefetch" href="/devops/public/assets/js/220.797dbd65.js"><link rel="prefetch" href="/devops/public/assets/js/221.a7e1a1f7.js"><link rel="prefetch" href="/devops/public/assets/js/222.7a0c7a1c.js"><link rel="prefetch" href="/devops/public/assets/js/223.875afa85.js"><link rel="prefetch" href="/devops/public/assets/js/224.670dec38.js"><link rel="prefetch" href="/devops/public/assets/js/225.3898000e.js"><link rel="prefetch" href="/devops/public/assets/js/23.7b24f723.js"><link rel="prefetch" href="/devops/public/assets/js/24.a077e99e.js"><link rel="prefetch" href="/devops/public/assets/js/25.e8ba14e2.js"><link rel="prefetch" href="/devops/public/assets/js/26.a994ad72.js"><link rel="prefetch" href="/devops/public/assets/js/27.6370b7d3.js"><link rel="prefetch" href="/devops/public/assets/js/28.64b67f34.js"><link rel="prefetch" href="/devops/public/assets/js/29.d6d7d123.js"><link rel="prefetch" href="/devops/public/assets/js/3.6eaffbec.js"><link rel="prefetch" href="/devops/public/assets/js/30.adae9a7e.js"><link rel="prefetch" href="/devops/public/assets/js/31.bcc8f8ed.js"><link rel="prefetch" href="/devops/public/assets/js/32.a02fd9e6.js"><link rel="prefetch" href="/devops/public/assets/js/33.fc6bc9d0.js"><link rel="prefetch" href="/devops/public/assets/js/34.794c3f02.js"><link rel="prefetch" href="/devops/public/assets/js/35.8174b121.js"><link rel="prefetch" href="/devops/public/assets/js/36.3b4cd9db.js"><link rel="prefetch" href="/devops/public/assets/js/37.4bf692fc.js"><link rel="prefetch" href="/devops/public/assets/js/38.09ad839b.js"><link rel="prefetch" href="/devops/public/assets/js/39.af842d3a.js"><link rel="prefetch" href="/devops/public/assets/js/4.42af2759.js"><link rel="prefetch" href="/devops/public/assets/js/40.e6b96f24.js"><link rel="prefetch" href="/devops/public/assets/js/41.09c0acd6.js"><link rel="prefetch" href="/devops/public/assets/js/42.5e0919ef.js"><link rel="prefetch" href="/devops/public/assets/js/43.82b9bdd8.js"><link rel="prefetch" href="/devops/public/assets/js/44.43e74c26.js"><link rel="prefetch" href="/devops/public/assets/js/45.7681ac67.js"><link rel="prefetch" href="/devops/public/assets/js/46.cbce6b7e.js"><link rel="prefetch" href="/devops/public/assets/js/47.539538d4.js"><link rel="prefetch" href="/devops/public/assets/js/48.1aa4148e.js"><link rel="prefetch" href="/devops/public/assets/js/49.a3169ab0.js"><link rel="prefetch" href="/devops/public/assets/js/5.44796ddd.js"><link rel="prefetch" href="/devops/public/assets/js/50.93d58413.js"><link rel="prefetch" href="/devops/public/assets/js/51.e56905f7.js"><link rel="prefetch" href="/devops/public/assets/js/52.096362f0.js"><link rel="prefetch" href="/devops/public/assets/js/53.e72feba6.js"><link rel="prefetch" href="/devops/public/assets/js/54.a4d4df0a.js"><link rel="prefetch" href="/devops/public/assets/js/55.ef6a96b8.js"><link rel="prefetch" href="/devops/public/assets/js/56.f8fb816d.js"><link rel="prefetch" href="/devops/public/assets/js/57.e54e006b.js"><link rel="prefetch" href="/devops/public/assets/js/58.f1cbba2d.js"><link rel="prefetch" href="/devops/public/assets/js/59.8f239e65.js"><link rel="prefetch" href="/devops/public/assets/js/6.0d602a17.js"><link rel="prefetch" href="/devops/public/assets/js/60.8811f301.js"><link rel="prefetch" href="/devops/public/assets/js/61.d630ac29.js"><link rel="prefetch" href="/devops/public/assets/js/62.b7ee3905.js"><link rel="prefetch" href="/devops/public/assets/js/63.4606809c.js"><link rel="prefetch" href="/devops/public/assets/js/64.d8734aaa.js"><link rel="prefetch" href="/devops/public/assets/js/65.2ed92c3b.js"><link rel="prefetch" href="/devops/public/assets/js/66.42d16bbc.js"><link rel="prefetch" href="/devops/public/assets/js/67.0f92636f.js"><link rel="prefetch" href="/devops/public/assets/js/68.cef3fc74.js"><link rel="prefetch" href="/devops/public/assets/js/69.5fe0d224.js"><link rel="prefetch" href="/devops/public/assets/js/7.afac6a7a.js"><link rel="prefetch" href="/devops/public/assets/js/70.e033979a.js"><link rel="prefetch" href="/devops/public/assets/js/71.d5773c22.js"><link rel="prefetch" href="/devops/public/assets/js/72.ed01e7dd.js"><link rel="prefetch" href="/devops/public/assets/js/73.07da2067.js"><link rel="prefetch" href="/devops/public/assets/js/74.05ef687f.js"><link rel="prefetch" href="/devops/public/assets/js/75.db85d506.js"><link rel="prefetch" href="/devops/public/assets/js/76.419dfd3b.js"><link rel="prefetch" href="/devops/public/assets/js/77.48777662.js"><link rel="prefetch" href="/devops/public/assets/js/78.be10d313.js"><link rel="prefetch" href="/devops/public/assets/js/79.5d0a0ba5.js"><link rel="prefetch" href="/devops/public/assets/js/8.59a03691.js"><link rel="prefetch" href="/devops/public/assets/js/80.d215ecf9.js"><link rel="prefetch" href="/devops/public/assets/js/81.062d8457.js"><link rel="prefetch" href="/devops/public/assets/js/82.0a9fe1f8.js"><link rel="prefetch" href="/devops/public/assets/js/83.ef02ba79.js"><link rel="prefetch" href="/devops/public/assets/js/84.77b1f90e.js"><link rel="prefetch" href="/devops/public/assets/js/85.fa116bfb.js"><link rel="prefetch" href="/devops/public/assets/js/86.c465f42b.js"><link rel="prefetch" href="/devops/public/assets/js/87.3bd57d68.js"><link rel="prefetch" href="/devops/public/assets/js/88.44ea5c75.js"><link rel="prefetch" href="/devops/public/assets/js/89.4458a09d.js"><link rel="prefetch" href="/devops/public/assets/js/9.dfa04b4d.js"><link rel="prefetch" href="/devops/public/assets/js/90.5b2bb758.js"><link rel="prefetch" href="/devops/public/assets/js/91.82ec7ae2.js"><link rel="prefetch" href="/devops/public/assets/js/92.1416ac2d.js"><link rel="prefetch" href="/devops/public/assets/js/93.7e978bab.js"><link rel="prefetch" href="/devops/public/assets/js/94.8228ac0e.js"><link rel="prefetch" href="/devops/public/assets/js/95.138f7d86.js"><link rel="prefetch" href="/devops/public/assets/js/96.a45e7992.js"><link rel="prefetch" href="/devops/public/assets/js/97.0d5d0b32.js"><link rel="prefetch" href="/devops/public/assets/js/98.cab7c6d4.js"><link rel="prefetch" href="/devops/public/assets/js/99.b80c8afa.js">
    <link rel="stylesheet" href="/devops/public/assets/css/0.styles.4a69f283.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>devops</h3> <p class="description" data-v-59e6cb88>快来玩devops</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>devops</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devops/public/" class="home-link router-link-active"><img src="/devops/public/logo.png" alt="devops" class="logo"> <span class="site-name">devops</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/devops/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      devops
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/HarmonyOS/" class="nav-link"><i class="undefined"></i>
  HarmonyOS
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/data analysis/" class="nav-link"><i class="undefined"></i>
  data analysis
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/devops/" class="nav-link"><i class="undefined"></i>
  devops
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/每日一题/" class="nav-link"><i class="undefined"></i>
  每日一题
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javabase/" class="nav-link"><i class="undefined"></i>
  javabase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/node/" class="nav-link"><i class="undefined"></i>
  node
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/pybase/" class="nav-link"><i class="undefined"></i>
  pybase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/spider/" class="nav-link"><i class="undefined"></i>
  spider
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloud/" class="nav-link"><i class="undefined"></i>
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloudalibaba/" class="nav-link"><i class="undefined"></i>
  springcloudalibaba
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/storage/" class="nav-link"><i class="undefined"></i>
  storage
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/zhifu/" class="nav-link"><i class="undefined"></i>
  zhifu
</a></li></ul></div></div><div class="nav-item"><a href="/devops/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/devops/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/devops/public/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    devops
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>211</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>43</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/devops/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      devops
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/HarmonyOS/" class="nav-link"><i class="undefined"></i>
  HarmonyOS
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/data analysis/" class="nav-link"><i class="undefined"></i>
  data analysis
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/devops/" class="nav-link"><i class="undefined"></i>
  devops
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/每日一题/" class="nav-link"><i class="undefined"></i>
  每日一题
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javabase/" class="nav-link"><i class="undefined"></i>
  javabase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/node/" class="nav-link"><i class="undefined"></i>
  node
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/pybase/" class="nav-link"><i class="undefined"></i>
  pybase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/spider/" class="nav-link"><i class="undefined"></i>
  spider
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloud/" class="nav-link"><i class="undefined"></i>
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloudalibaba/" class="nav-link"><i class="undefined"></i>
  springcloudalibaba
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/storage/" class="nav-link"><i class="undefined"></i>
  storage
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/zhifu/" class="nav-link"><i class="undefined"></i>
  zhifu
</a></li></ul></div></div><div class="nav-item"><a href="/devops/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/devops/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>09-正则与三剑客</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>devops</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">09-正则与三剑客</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>devops</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/15/2028</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>devops</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一-正则"><a href="#一-正则" class="header-anchor">#</a> 一，正则</h2> <h3 id="_1-正则概述"><a href="#_1-正则概述" class="header-anchor">#</a> 1，正则概述</h3> <p>正则: regular expression RE</p> <p><img src="/devops/public/assets/img/1723384050113.23fb2ce3.png" alt="1723384050113"></p> <p>环境准备：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cat &gt;re.txt&lt;&lt;EOF
I am mlau teacher!
I teach linux.
I like badminton ball ,billiard ball and chinese chess!
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com

my qq is 49000447
not 4900000447.

my god, i am not malu, but MALU!
EOF
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-以-开头的行"><a href="#_2-以-开头的行" class="header-anchor">#</a> 2，^ 以....开头的行</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^m' re.txt </span>
my blog is http://malu.blog.51cto.com
my qq is <span class="token number">49000447</span>
my god, i am not malu, but MALU<span class="token operator">!</span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^my' re.txt </span>
my blog is http://malu.blog.51cto.com
my qq is <span class="token number">49000447</span>
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-以-结尾的行"><a href="#_3-以-结尾的行" class="header-anchor">#</a> 3，$ 以....结尾的行</h3> <p>以数字7结尾的行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '7$' re.txt </span>
my qq is <span class="token number">49000447</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>cat -A 显示出文件中的特殊隐藏符号</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat -A re.txt </span>
I am mlau teacher<span class="token operator">!</span>$
I teach linux.$
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>$
my blog is http://malu.blog.51cto.com$
our size is http://blog.malu.com$
$
my qq is <span class="token number">49000447</span>$
not <span class="token number">4900000447</span>.$
$
my god, i am not malu, but MALU<span class="token operator">!</span>$

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep ' $' re.txt </span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep ' ' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>^m$匹配了什么？</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com

my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.

my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^m$' re.txt </span>
m
m
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_4-空行-这行中没有任何字符"><a href="#_4-空行-这行中没有任何字符" class="header-anchor">#</a> 4，^$ 空行,这行中没有任何字符</h3> <p>过滤出文件中的空行并显示行号</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -n '^$' re.txt </span>
<span class="token number">6</span>:
<span class="token number">9</span>:
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com

my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.

my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>排除空行:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -nv '^$' re.txt </span>
<span class="token number">1</span>:I am mlau teacher<span class="token operator">!</span>
<span class="token number">2</span>:I teach linux.
<span class="token number">3</span>:I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
<span class="token number">4</span>:my blog is http://malu.blog.51cto.com
<span class="token number">5</span>:our size is http://blog.malu.com
<span class="token number">7</span>:my qq is <span class="token number">49000447</span>
<span class="token number">8</span>:not <span class="token number">4900000447</span>.
<span class="token number">10</span>:my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token number">11</span>:m
<span class="token number">12</span>:m
<span class="token number">13</span>:mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>正则案例:排除/etc/ssh/sshd_config文件中的空行,然后排除以#号开头的行(可以使用管道)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -v '^$' /etc/ssh/sshd_config | grep -v '^#'</span>
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
SyslogFacility AUTH
PermitRootLogin <span class="token function">yes</span>
AuthorizedKeysFile	.ssh/authorized_keys
PasswordAuthentication <span class="token function">yes</span>
ChallengeResponseAuthentication no
GSSAPIAuthentication <span class="token function">yes</span>
GSSAPICleanupCredentials no
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-任意一个字符-不匹配空行"><a href="#_5-任意一个字符-不匹配空行" class="header-anchor">#</a> 5，. 任意一个字符,不匹配空行</h3> <p>.过滤的时候会排除空行. 点不会匹配空行</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep 'ma.u' re.txt </span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>grep -o选项,显示正则匹配到了什么? 显示执行过程.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '.' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -o  '.' re.txt </span>
I
 
a
m
 
m
l
a
u

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_6-撬棍-转义字符-脱掉马甲打回原形-去掉特殊符号的含义"><a href="#_6-撬棍-转义字符-脱掉马甲打回原形-去掉特殊符号的含义" class="header-anchor">#</a> 6， \撬棍 转义字符 脱掉马甲打回原形,去掉特殊符号的含义</h3> <p>找出文件中以.(点)结尾的行</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '.$' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '\.$' re.txt </span>
I teach linux.
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>未来在扩展正则中\撬棍, 唤醒前世记忆从而含有特殊含义了.</p> <h3 id="_7-前一个字符连续出现0次或0次以上"><a href="#_7-前一个字符连续出现0次或0次以上" class="header-anchor">#</a> 7，* 前一个字符连续出现0次或0次以上</h3> <p>什么是连续出现/重复</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1     数字1出现1次
111   数字1出现3次
11111111111111111111111111

123   数字出现3次
malu  字母出现4次
malu123 连续出现的数字和小写字母
Malu123   连续出现的数字和大小写字母
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>关于出现0次: 这个符号没有的意思</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '0*' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com

my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.

my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_8-所有-任何字符"><a href="#_8-所有-任何字符" class="header-anchor">#</a> 8，.* 所有,任何字符</h3> <p>对比：</p> <ul><li><code>.</code>任意一个字符</li> <li><code>*</code>前一个字符连续出现0次或0次以上</li> <li><code>.*</code> 表示所有</li></ul> <p>以任意内容开头直到匹配到am字符的行</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com

my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.

my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^.*am' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>正则表示连续出现的时候或者表示所有的时候,正则体现出贪婪性,尽可能多的匹配。未来我们根据实际的需求使用贪婪性即可。匹配开头一直到o的内容</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^.*o' re.txt </span>
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_9-abc-表示匹配任意1个字符-a或b或c-中括号相当于一个字符"><a href="#_9-abc-表示匹配任意1个字符-a或b或c-中括号相当于一个字符" class="header-anchor">#</a> 9， [] [abc] 表示匹配任意1个字符,a或b或c,中括号相当于一个字符</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[abc]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -o '[abc]' re.txt </span>
a
a
a
c
a
c
b
a

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[abc][abc]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -o '[abc][abc]' re.txt </span>
ac
ac
ba
ba
ba
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>匹配数字</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[0-9]' re.txt </span>
my blog is http://malu.blog.51cto.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>匹配小写字母</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[a-z]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>匹配大写字母</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>A-Z<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>匹配大小写字母</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>a-zA-Z<span class="token punctuation">]</span>
<span class="token punctuation">[</span>a-Z<span class="token punctuation">]</span> <span class="token comment">#如果这个用不了使用上面完成形式</span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[a-zA-Z]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[a-Z]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>匹配大小写字母+数字</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">grep</span> <span class="token string">'[a-zA-Z0-9]'</span> re.txt
<span class="token function">grep</span> <span class="token string">'[a-Z0-9]'</span> re.txt
<span class="token function">grep</span> <span class="token string">'[0-Z]'</span> re.txt

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[a-zA-Z0-9]' re.txt</span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[a-Z0-9]' re.txt</span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[0-Z]' re.txt</span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>匹配出以字母m或n开头的行</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^[mn]' re.txt </span>
my blog is http://malu.blog.51cto.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>匹配出以.或空格或!结尾的行</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[.!]$' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>温馨提示: []中会自动去掉符号的特殊含义</p> <h3 id="_10-abc-表示匹配任意1个字符-排除abc-中括号相当于一个字符"><a href="#_10-abc-表示匹配任意1个字符-排除abc-中括号相当于一个字符" class="header-anchor">#</a> 10， [^] [ ^abc ] 表示匹配任意1个字符,排除abc,中括号相当于一个字符</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '[^abc]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_11-基础正则小结"><a href="#_11-基础正则小结" class="header-anchor">#</a> 11，基础正则小结</h3> <table><thead><tr><th>^</th> <th>以xxx开头的行</th></tr></thead> <tbody><tr><td>$</td> <td>以...结尾的行</td></tr> <tr><td>^$</td> <td>空行</td></tr> <tr><td>.</td> <td>任意一个字符</td></tr> <tr><td>\</td> <td>转义字符,撬棍</td></tr> <tr><td>*</td> <td>前一个字符出现0次或0次以上</td></tr> <tr><td>.*</td> <td>所有</td></tr> <tr><td>[]</td> <td>[abc] a或b或c, []相当于是1个字符</td></tr> <tr><td>[^]</td> <td>[^abc] 匹配除了abc之外的内容, []相当于是1个字符</td></tr></tbody></table> <h3 id="_12-前一个字符连续出现1次或1次以上"><a href="#_12-前一个字符连续出现1次或1次以上" class="header-anchor">#</a> 12，+ 前一个字符连续出现1次或1次以上</h3> <p>扩展正则：</p> <ul><li>grep   egrep  或 grep -E</li> <li>sed 使用sed -r支持扩展正则</li> <li>awk默认支持扩展正则</li></ul> <p>Linux三剑客如何支持扩展正则</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># grep命令</span>
<span class="token function">egrep</span> <span class="token string">'0+'</span> re.txt
<span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">'0+'</span> re.txt
<span class="token function">grep</span> <span class="token string">'0\+'</span> re.txt

<span class="token comment"># sed 需要使用-r选项</span>
<span class="token comment"># awk 直接支持扩展正则</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>+</code> 前一个字符连续出现1次或1次以上，<code>+</code>大部分配合着[]一起使用，取出连续出现的0</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '0+' re.txt </span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep '0+' re.txt </span>
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -E  '0+' re.txt </span>
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '0\+' re.txt </span>
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep '0+' re.txt </span>
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -o '0+' re.txt </span>
000
00000
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>取出连续出现的数字</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -o '[0-9]+' re.txt </span>
<span class="token number">51</span>
<span class="token number">49000447</span>
<span class="token number">4900000447</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep  '[0-9]+' re.txt </span>
my blog is http://malu.blog.51cto.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>取出连续出现的字母(单词)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep  '[a-Z]+' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -o '[a-Z]+' re.txt </span>
I
am
mlau
teacher
I
teach
linux
I
like
badminton
ball
billiard
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_13-或者"><a href="#_13-或者" class="header-anchor">#</a> 13， | 或者</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'malu|linux' re.txt </span>
I teach linux.
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my god, i am not malu, but MALU<span class="token operator">!</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep '[malulinux]' re.txt </span>
I am mlau teacher<span class="token operator">!</span>
I teach linux.
I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http://malu.blog.51cto.com
our size is http://blog.malu.com
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
my god, i am not malu, but MALU<span class="token operator">!</span>
m
m
mm
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>在/etc/services过滤出包含ssh或http或smtp的行</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'ssh|http|smtp' /etc/services </span>
<span class="token comment">#       http://www.iana.org/assignments/port-numbers</span>
<span class="token function">ssh</span>             <span class="token number">22</span>/tcp                          <span class="token comment"># The Secure Shell (SSH) Protocol</span>
<span class="token function">ssh</span>             <span class="token number">22</span>/udp                          <span class="token comment"># The Secure Shell (SSH) Protocol</span>
smtp            <span class="token number">25</span>/tcp          mail
smtp            <span class="token number">25</span>/udp          mail
http            <span class="token number">80</span>/tcp          www www-http    <span class="token comment"># WorldWideWeb HTTP</span>
http            <span class="token number">80</span>/udp          www www-http    <span class="token comment"># HyperText Transfer Protocol</span>
http            <span class="token number">80</span>/sctp                         <span class="token comment"># HyperText Transfer Protocol</span>
https           <span class="token number">443</span>/tcp                         <span class="token comment"># http protocol over TLS/SSL</span>
https           <span class="token number">443</span>/udp                         <span class="token comment"># http protocol over TLS/SSL</span>
https           <span class="token number">443</span>/sctp                        <span class="token comment"># http protocol over TLS/SSL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>排除/etc/ssh/sshd_config中的空行或注释,输出的时候显示行号</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep -v '^$' /etc/ssh/sshd_config | grep -v '^#'</span>
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
SyslogFacility AUTH
PermitRootLogin <span class="token function">yes</span>
AuthorizedKeysFile	.ssh/authorized_keys
PasswordAuthentication <span class="token function">yes</span>
ChallengeResponseAuthentication no
GSSAPIAuthentication <span class="token function">yes</span>
GSSAPICleanupCredentials no
UsePAM <span class="token function">yes</span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -vn '^$|^#' /etc/ssh/sshd_config </span>
<span class="token number">24</span>:HostKey /etc/ssh/ssh_host_rsa_key
<span class="token number">25</span>:HostKey /etc/ssh/ssh_host_ecdsa_key
<span class="token number">26</span>:HostKey /etc/ssh/ssh_host_ed25519_key
<span class="token number">33</span>:SyslogFacility AUTH
<span class="token number">39</span>:PermitRootLogin <span class="token function">yes</span>
<span class="token number">48</span>:AuthorizedKeysFile	.ssh/authorized_keys
<span class="token number">66</span>:PasswordAuthentication <span class="token function">yes</span>
<span class="token number">70</span>:ChallengeResponseAuthentication no
<span class="token number">80</span>:GSSAPIAuthentication <span class="token function">yes</span>
<span class="token number">81</span>:GSSAPICleanupCredentials no
<span class="token number">97</span>:UsePAM <span class="token function">yes</span>

<span class="token comment">#一些配置文件中有空行,以#开头的行,不带注释的正常的行以字母开头的行.正常的配置的行,以字母开头的行</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#grep '^[a-Z]' /etc/ssh/sshd_config </span>
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
SyslogFacility AUTH
PermitRootLogin <span class="token function">yes</span>
AuthorizedKeysFile	.ssh/authorized_keys
PasswordAuthentication <span class="token function">yes</span>
ChallengeResponseAuthentication no
GSSAPIAuthentication <span class="token function">yes</span>
GSSAPICleanupCredentials no
UsePAM <span class="token function">yes</span>
X11Forwarding no
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="_14-表示一个整体-用于后向引用-反向引用sed"><a href="#_14-表示一个整体-用于后向引用-反向引用sed" class="header-anchor">#</a> 14，() 表示一个整体,用于后向引用(反向引用sed)</h3> <p>一般用于表示整体或在sed命令中实现后向引用，检查系统中tree,vim,sl软件是否安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#rpm -qa | egrep '^tree|^vim|^sl'</span>
tree-1.8.0-2.ky10.x86_64
slang-2.3.2-8.ky10.x86_64
vim-minimal-8.2-58.p01.ky10.x86_64
vim-filesystem-8.2-58.p01.ky10.noarch
vim-enhanced-8.2-58.p01.ky10.x86_64
vim-common-8.2-58.p01.ky10.x86_64
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_15-a-n-m-前一个字符连续出现至少n次-最多m次"><a href="#_15-a-n-m-前一个字符连续出现至少n次-最多m次" class="header-anchor">#</a> 15， {} a{n,m} 前一个字符连续出现至少n次,最多m次</h3> <p><img src="/devops/public/assets/img/1723387035666.74becc1f.png" alt="1723387035666"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep '0{1,5}' re.txt </span>
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -o '0{1,5}' re.txt </span>
000
00000
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -o '0{3,4}' re.txt </span>
000
0000
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep -o '0{3}' re.txt </span>
000
000
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep '0{3}' re.txt </span>
my qq is <span class="token number">49000447</span>
not <span class="token number">4900000447</span>.
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_16-前一个字符-出现0次或1次"><a href="#_16-前一个字符-出现0次或1次" class="header-anchor">#</a> 16， ? 前一个字符 出现0次或1次</h3> <p>一般用于匹配的内容可能有(出现1次)或者没有出现(出现0次)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat good.txt </span>
gd
goood
god
good
gooood
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'gd|god' good.txt </span>
gd
god
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'go?d' good.txt </span>
gd
god
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'go+d' good.txt </span>
goood
god
good
gooood
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'go*d' good.txt </span>
gd
goood
god
good
gooood
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'go{1,2}d' good.txt </span>
god
good
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#egrep 'go{,2}d' good.txt </span>
gd
god
good
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_17-正则小结"><a href="#_17-正则小结" class="header-anchor">#</a> 17, 正则小结</h3> <p>基础正则表达式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>正则表达式 简单 高效 易用
三剑客用的都是正则
普通命令用的都是通配符
通配符找文件名称
正则表达式找文件内容
 
基本正则表达式无法满足需求，就出现了扩展正则表达式
^ $ <span class="token builtin class-name">.</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span> *
<span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> ? + <span class="token operator">|</span> 等等
 
^ <span class="token comment">#以什么什么开头的行</span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep '^m' test.txt </span>
 
$ <span class="token comment">#以什么什么结尾的</span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep '!$' test.txt</span>
 
<span class="token function">cat</span> <span class="token parameter variable">-A</span> test.txt 在每行的结尾加$符号
 
空格 <span class="token comment">#可以过滤空格</span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep ' ' test.txt</span>
 
$           后面跟变量 用双引号就匹配变量，用单引号就是原文本
^$          表示空行
<span class="token function">grep</span> <span class="token parameter variable">-n</span>     显示过滤前内容所在的行号
<span class="token function">grep</span> <span class="token parameter variable">-v</span>     取反，匹配出来之后，显示除了这个之外的其他的内容
<span class="token builtin class-name">.</span>           表示除换行符外其他所有单个字符
<span class="token punctuation">..</span>          每次匹配两个字符
<span class="token parameter variable">-o</span>          每一个字符都会按列输出
.$          每一行末尾都能匹配上，空格也能匹配上
<span class="token punctuation">\</span>.$         以.结尾
<span class="token punctuation">\</span>           转义字符
<span class="token punctuation">\</span>n          换行符
<span class="token punctuation">\</span>t          tab键
*           前一个字符出现0及0次以上，如果没有，则显示所有内容
            匹配到了再-o，会把匹配的部分，匹配的一个部分显示一行
.*          所有字符，并且-o后每一个部分显示一行
<span class="token punctuation">[</span><span class="token number">0</span>-9a-zA-Z:,.<span class="token punctuation">]</span>   匹配区间，中括号也有脱马甲的意思，所以说.前面不用加撬棍
 
基础正则小结
^            以什么开头的行
$            以什么结尾的行
<span class="token builtin class-name">.</span>            任意单个字符
.*           任意所有字符
^$           表示空行
<span class="token punctuation">[</span>abc<span class="token punctuation">]</span>        表示任意单个字符，中括号中还原本意
<span class="token punctuation">[</span>^abc<span class="token punctuation">]</span>       除了abc其他的字符，都匹配，^在中括号中取反
^<span class="token punctuation">[</span>abc<span class="token punctuation">]</span>       查找要么a要么b要么c开头的
<span class="token punctuation">[</span>^^abc<span class="token punctuation">]</span>      第一个是取反，第二个是还原本意，普通字符
<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>        区间也支持
<span class="token punctuation">[</span>a-z<span class="token punctuation">]</span>        区间也支持
<span class="token punctuation">[</span><span class="token number">0</span>-9a-zA-Z<span class="token punctuation">]</span>  区间也支持
<span class="token punctuation">[</span>a-Z<span class="token punctuation">]</span>        区间也支持
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>扩展正则表达式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>?+<span class="token operator">|</span>
<span class="token function">grep</span> <span class="token parameter variable">-E</span>      支持扩展正则
<span class="token function">egrep</span>        支持扩展正则
+            前一个字符出现1次及1次以上 跟*的区别是出现0次不会所有内容都出现
<span class="token operator">|</span>            或者，可以同时过滤多个条件
<span class="token number">1</span><span class="token punctuation">{</span>n,m<span class="token punctuation">}</span>       前一个数字1最少出现n次，最多出现m次，可能出现部分比m次数多，但是-o会发现一行最多m次
<span class="token number">1</span><span class="token punctuation">{</span>m<span class="token punctuation">}</span>         前一个数字1最多出现m次
<span class="token punctuation">(</span><span class="token punctuation">)</span>           一个整体，配合+使用，如果是一个整体-o，出现部分如何连续，会连贯出现。
             如果只是一个字符出现1次或1次以上，会一个一列出现
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><table><thead><tr><th>+</th> <th>前一个字符连续出现1次或多次</th></tr></thead> <tbody><tr><td>|</td> <td>或者</td></tr> <tr><td>()</td> <td>🅰 表示整体 🅱 后向引用或反向引用(sed)</td></tr> <tr><td>{}</td> <td>a{n,m} 前一个字符连续出现至少n次,最多m次</td></tr> <tr><td>？</td> <td>前一个字符出现0次或1次</td></tr></tbody></table> <p>企业常用正则表达式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.过滤以什么开头 ^ ^<span class="token comment">#</span>
<span class="token number">2</span>.^$ 空行
<span class="token number">3</span>.<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token number">4</span>.<span class="token punctuation">[</span><span class="token punctuation">]</span>+ awk结合
<span class="token number">5</span>.sed后向引用<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
常用通配符
<span class="token number">1</span>.*.txt
<span class="token number">2</span>.<span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span>.txt
<span class="token number">3</span>.<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_18-正则案例"><a href="#_18-正则案例" class="header-anchor">#</a> 18，正则案例</h3> <p>将ip add中的ip筛选出来。</p> <p><img src="/devops/public/assets/img/1725951741652.e0e2b88b.png" alt="1725951741652"></p> <p>我们看到IP所在行是eth0结尾的，将IP所在行筛选出来</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ip</span> <span class="token function">add</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'eth0$'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/devops/public/assets/img/1725951786154.c64724b3.png" alt="1725951786154"></p> <p>我们知道IP是由0-9数字和点组成，我们通过这个方式筛选。设置中括号里面字符最多出现10次。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ip</span> <span class="token function">add</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'eth0$'</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token punctuation">[</span><span class="token number">0</span>-9.<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/devops/public/assets/img/1725951840853.14c96b21.png" alt="1725951840853"></p> <p>当然IP数字和点出现次数不一定每次都是10，如果找通用方法，我们需要用拼接的方式。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ip</span> <span class="token function">add</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'eth0$'</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">'[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/devops/public/assets/img/1725951876950.286099a7.png" alt="1725951876950"></p> <p>匹配到该行IP就好说了，咱们直接grep -o，然后head -1即可。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ip</span> <span class="token function">add</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'eth0$'</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">'[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'</span> <span class="token parameter variable">-o</span> <span class="token operator">|</span><span class="token function">head</span> <span class="token parameter variable">-n1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/devops/public/assets/img/1725951917293.8f3353d3.png" alt="1725951917293"></p> <h2 id="二-sed"><a href="#二-sed" class="header-anchor">#</a> 二，sed</h2> <p>linux三剑客，grep，sed，awk。</p> <h3 id="_0-复习grep"><a href="#_0-复习grep" class="header-anchor">#</a> 0，复习grep</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">grep</span> 参数选项 <span class="token string">'过滤内容'</span> file/路径文件
<span class="token function">grep</span> <span class="token string">'root'</span> /etc/passwd<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'bash'</span>
<span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'root'</span>
参数选项：
    <span class="token parameter variable">-i</span>    过滤内容不区分大小写
    <span class="token parameter variable">-c</span>    统计行数
    <span class="token parameter variable">-v</span>    取反 取文件中的空行和注释的行进行取反
    <span class="token parameter variable">-o</span>    显示匹配过程
    <span class="token parameter variable">-E</span>    支持扩展正则    <span class="token function">egrep</span>
    <span class="token parameter variable">-c</span>    统计单词数量
    <span class="token parameter variable">-r</span>    递归过滤文件内容
    <span class="token parameter variable">-A</span>    显示过滤到行，再往下显示n行
    <span class="token parameter variable">-B</span>    显示过滤到行，再往上显示n行
    <span class="token parameter variable">-C</span>    显示过滤到行，再往上下显示n行
 
<span class="token function">grep</span> “过滤的内容” 文件 
<span class="token function">grep</span> <span class="token parameter variable">-i</span> “过滤的内容” 文件 <span class="token comment">#过滤文件的内容忽略大小写</span>
 
示例1：查看ip中的10.0.0.200是否出现
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#ip add|grep 10.0.0.200</span>
    inet <span class="token number">10.0</span>.0.200/24 brd <span class="token number">10.0</span>.0.255 scope global eth0
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#</span>
 
示例2：过滤文件中包含“Failed”的行 直接过滤区分大小写
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep &quot;Failed&quot; /var/log/secure</span>
Feb <span class="token number">27</span> <span class="token number">10</span>:18:12 VMware-koten sshd<span class="token punctuation">[</span><span class="token number">20161</span><span class="token punctuation">]</span>: Failed password <span class="token keyword">for</span> root from <span class="token number">10.0</span>.0.1 port <span class="token number">53333</span> ssh2
Feb <span class="token number">27</span> <span class="token number">17</span>:10:39 VMware-koten sshd<span class="token punctuation">[</span><span class="token number">34342</span><span class="token punctuation">]</span>: Failed password <span class="token keyword">for</span> root from <span class="token number">10.0</span>.0.1 port <span class="token number">57720</span> ssh2
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#</span>
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#alias grep='grep -i --color=auto' #临时更改</span>
永久更改需要加环境变量
 
示例3：过滤文件中包含“Failed”的行 忽略大小写
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep -i &quot;Failed&quot; /var/log/secure</span>
Feb <span class="token number">27</span> <span class="token number">10</span>:18:10 VMware-koten unix_chkpwd<span class="token punctuation">[</span><span class="token number">20164</span><span class="token punctuation">]</span>: password check failed <span class="token keyword">for</span> user <span class="token punctuation">(</span>root<span class="token punctuation">)</span>
Feb <span class="token number">27</span> <span class="token number">10</span>:18:12 VMware-koten sshd<span class="token punctuation">[</span><span class="token number">20161</span><span class="token punctuation">]</span>: Failed password <span class="token keyword">for</span> root from <span class="token number">10.0</span>.0.1 port <span class="token number">53333</span> ssh2
Feb <span class="token number">27</span> <span class="token number">17</span>:10:38 VMware-koten unix_chkpwd<span class="token punctuation">[</span><span class="token number">34345</span><span class="token punctuation">]</span>: password check failed <span class="token keyword">for</span> user <span class="token punctuation">(</span>root<span class="token punctuation">)</span>
Feb <span class="token number">27</span> <span class="token number">17</span>:10:39 VMware-koten sshd<span class="token punctuation">[</span><span class="token number">34342</span><span class="token punctuation">]</span>: Failed password <span class="token keyword">for</span> root from <span class="token number">10.0</span>.0.1 port <span class="token number">57720</span> ssh2
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#</span>
 
示例4：过滤文件中包含“Failed”的行，统计行数
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep -i &quot;Failed&quot; /var/log/secure|wc -l</span>
<span class="token number">4</span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#</span>
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#grep -c &quot;Failed&quot; /var/log/secure</span>
<span class="token number">4</span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#</span>
 
 
-r案例企业常用
代码文件被篡改，打开网站出现乱七八糟的网站
<span class="token function">cat</span> code.txt
www.test.com-----<span class="token operator">&gt;</span>www.luanqibazao.com
 
<span class="token function">grep</span> <span class="token parameter variable">-r</span> <span class="token string">'www.luanqibazao.com'</span> ./*
 
企业遇到被篡改：快速恢复业务，（代码要有备份）
云服务器支持快照，硬件服务器没有快照
备份在网站，公司备份服务器，自己笔记本
被篡改的代码不要删，先移除走
可能会选择在服务器，页面进行攻击
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="_1-指定行查找"><a href="#_1-指定行查找" class="header-anchor">#</a> 1，指定行查找</h3> <p>sed作用: 过滤(类似grep) 替换 修改 格式化输出</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构:
    <span class="token function">sed</span> <span class="token string">'模式+动作'</span>  <span class="token function">file</span>
    <span class="token function">sed</span> <span class="token string">'找谁 干啥'</span>  <span class="token function">file</span>
    三剑客都支持处理屏幕上显示的信息
    <span class="token function">ip</span> a<span class="token operator">|</span><span class="token function">sed</span> <span class="token string">'找谁 干啥'</span>
参数选项:
    <span class="token parameter variable">-n</span> 取消默认输出
模式: 查找文件的字符串的行 怎么找
动作: 找到内容后的动作 增删改查
	  p   <span class="token comment"># print 输出  打印</span>
	  

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>案例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat malu.txt </span>
I am malu teacher<span class="token operator">!</span>
I teach linux.
<span class="token builtin class-name">test</span>

I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>
my blog is http: blog.51cto.com 
our site is http:www.lizhenya.com
my qq num is <span class="token number">593528157</span>

aaaa.
not <span class="token number">572891888889</span>.
^^^^^^^^66<span class="token variable">$$</span><span class="token variable">$$</span><span class="token variable">$$</span>$^^^<span class="token variable">$$</span>
malumalumalu
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>


<span class="token function">sed</span> 指定行查找。
案例1.sed按照行查找
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '3p' malu.txt</span>
<span class="token builtin class-name">test</span>


案例2.sed输出最后一行 $
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '$p' malu.txt</span>
malumalumalu

案例3.区间范围使用逗号，表示区间范围
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '3,5p' malu.txt</span>
<span class="token builtin class-name">test</span>

I like badminton ball ,billiard ball and chinese chess<span class="token operator">!</span>

案例4.sed输出10到最后一行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '10,$p' malu.txt</span>
aaaa,
not <span class="token number">572891888887</span>.
^^^^^^^^66<span class="token variable">$$</span><span class="token variable">$$</span><span class="token variable">$$</span>$^^^<span class="token variable">$$</span>
malumalumalu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_2-模糊过滤"><a href="#_2-模糊过滤" class="header-anchor">#</a> 2，模糊过滤</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>作用: 过滤文件中的字符串 类似grep
支持正则:
语法结构:grep <span class="token string">'字符串'</span> <span class="token function">file</span>
		<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/字符串/p'</span> <span class="token function">file</span>
        <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/[xxx]/p'</span> <span class="token function">file</span>
案例1.查找包含root的行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># head -3 /etc/passwd &gt; p.txt</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#cat p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '/root/p' p.txt</span>
root:x:0:0:root:/root:/bin/bash

案例2.查找包含bash的行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '/bash/p' p.txt</span>
root:x:0:0:root:/root:/bin/bash


案例3.使用正则，查找以r开头的行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '/^r/p' p.txt </span>
root:x:0:0:root:/root:/bin/bash

案例4.查找以n结尾的行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '/n$/p' p.txt </span>
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin


案例5.查找包含root或者sync的行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -rn '/root|sync/p' p.txt</span>
root:x:0:0:root:/root:/bin/bash
sync:x:5:0:sync:/sbin:/bin/sync
operator:x:11:0:operator:/root:/sbin/nologin


案例6.查找包含或a 或b 或 c的行
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -rn '/[abc]/p' p.txt</span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token punctuation">..</span>.

或者使用<span class="token operator">|</span>
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -rn '/a|b|c/p' p.txt</span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token punctuation">..</span>.

案例7.查找字符串的区间范围使用逗号,查找root和daemon中间的行
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3,5p'</span> <span class="token function">file</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/root/,/daemon/p'</span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#sed -n '/root/,/daemon/p' p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment">#</span>

<span class="token punctuation">[</span>root@linux:~<span class="token punctuation">]</span><span class="token comment"># sed -n '/^adm/,/^sync/p' p.txt</span>
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync

匹配区间范围注意: 
唯一的字符串
<span class="token number">1</span>.如果有两个结尾，则只匹配到第一个结尾终止。
<span class="token number">2</span>.如果只有开头，没有匹配到结尾，则输出开头到文件末尾

案例: 匹配时间昨天1小时的数据。把时间作为字符串来匹配
<span class="token punctuation">[</span>root@linuxnc ~<span class="token punctuation">]</span><span class="token comment"># sed -n '/2024:09:07:12/,/2024:09:57:53/p' /var/log/nginx/access.log</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h3 id="_3-sed删除"><a href="#_3-sed删除" class="header-anchor">#</a> 3，sed删除</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构： 	<span class="token function">sed</span> <span class="token string">'3d'</span> <span class="token function">file</span>

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt</span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
<span class="token builtin class-name">test</span>
<span class="token number">33333333</span>
malu
wangcai <span class="token number">222</span>


案例1.指定行删除
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3d' 33.txt </span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
<span class="token number">33333333</span>
malu
wangcai <span class="token number">222</span>


案例2.删除第3-5行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3,5d' 33.txt </span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
wangcai <span class="token number">222</span>

删除第3行-末尾
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3,$d' 33.txt </span>


案例3.删除模糊过滤的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '/malu/d' 33.txt </span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
<span class="token builtin class-name">test</span>
<span class="token number">33333333</span>
wangcai <span class="token number">222</span>

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed -r '/test|malu/d' 33.txt </span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
<span class="token number">33333333</span>
wangcai <span class="token number">222</span>

案例4.删除区间范围test和malu之间的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '/test/,/malu/d' 33.txt </span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
wangcai <span class="token number">222</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="_4-sed增加内容"><a href="#_4-sed增加内容" class="header-anchor">#</a> 4，sed增加内容</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构: 
		<span class="token function">sed</span> <span class="token string">'3c hehe'</span> <span class="token function">file</span>  <span class="token comment"># 将第3行替换成hehe    # 掌握</span>
		<span class="token function">sed</span> <span class="token string">'3i test'</span> <span class="token function">file</span>  <span class="token comment"># 在第3行出插入test字符串</span>
		<span class="token function">sed</span> <span class="token string">'3a test'</span> <span class="token function">file</span>  <span class="token comment"># 在第3行的下面追加test字符串</span>
		
案例: 将第3行替换成hehe
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3c hehe' p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
hehe
adm:x:3:4:adm:/var/adm:/sbin/nologin

案例2.在第3行插入test字符串
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3i test' p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token builtin class-name">test</span>
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin


案例3.在第3行处追加test字符串
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3a test' p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
<span class="token builtin class-name">test</span>
adm:x:3:4:adm:/var/adm:/sbin/nologin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_5-sed替换"><a href="#_5-sed替换" class="header-anchor">#</a> 5，sed替换</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构：
		<span class="token function">sed</span> <span class="token string">'s#root#malu#g'</span> <span class="token function">file</span>  <span class="token comment"># 将文件中所有的root替换成malu</span>
		<span class="token function">sed</span> <span class="token string">'s///g'</span> <span class="token function">file</span>
		<span class="token function">sed</span> <span class="token string">'s@@@g'</span> <span class="token function">file</span>
		
案例1.将root替换为malu
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#root#malu#g' p.txt</span>
malu:x:0:0:malu:/malu:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/malu:/sbin/nologin

案例2.只替换行里的第一个root为malu
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#root#AAA#' p.txt </span>
AAA:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin



案例3.将开头替换成<span class="token comment">#  批量注释</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's/^/#/g' p.txt </span>
<span class="token comment">#root:x:0:0:root:/root:/bin/bash</span>
<span class="token comment">#bin:x:1:1:bin:/bin:/sbin/nologin</span>
<span class="token comment">#daemon:x:2:2:daemon:/sbin:/sbin/nologin</span>
<span class="token comment">#adm:x:3:4:adm:/var/adm:/sbin/nologin</span>
<span class="token comment">#lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span>
<span class="token comment">#sync:x:5:0:sync:/sbin:/bin/sync</span>
<span class="token comment">#shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span>
<span class="token comment">#halt:x:7:0:halt:/sbin:/sbin/halt</span>
<span class="token comment">#mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span>
<span class="token comment">#operator:x:11:0:operator:/root:/sbin/nologin</span>

模式+动作
语法格式:
		<span class="token function">sed</span> ‘3s<span class="token comment">###g’ file</span>
		
		<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3p'</span> <span class="token function">file</span>  <span class="token comment"># 指定行查找，有n就有p。没p就没n</span>
		<span class="token function">sed</span> <span class="token string">'3s###g'</span><span class="token function">file</span>  <span class="token comment"># 模式+动作</span>
		<span class="token function">sed</span> <span class="token string">'/root/s###g'</span> <span class="token comment"># 模式+动作</span>

案例1.将第3行的a 替换成A
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '3s#a#A#g' p.txt </span>
dAemon:x:2:2:dAemon:/sbin:/sbin/nologin
或者:
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed -n '3s#a#A#gp' p.txt </span>
dAemon:x:2:2:dAemon:/sbin:/sbin/nologin


案例2.第3-5行小a替换成A
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed  '3,5s#a#A#g' p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
dAemon:x:2:2:dAemon:/sbin:/sbin/nologin
Adm:x:3:4:Adm:/vAr/Adm:/sbin/nologin
lp:x:4:7:lp:/vAr/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync

案例3.将包含root的行 将bash 替换成test
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '/root/s#bash#test#g' p.txt </span>
root:x:0:0:root:/root:/bin/test
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin

案例4.只替换bin为test
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat p.txt </span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
边界符
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed '2s#\&lt;bin\&gt;#test#g' p.txt </span>
root:x:0:0:root:/root:/bin/bash
test:x:1:1:test:/test:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin

永久替换文件内容加参数 <span class="token parameter variable">-i</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed -i 's#root#AAA#g' p.txt </span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat p.txt </span>
AAA:x:0:0:AAA:/AAA:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin

案例5.替换p.txt中所有的字符
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#[a-z]##g' p.txt </span>
AAA::0:0:AAA:/AAA://
::1:1::/://
::2:2::/://
::3:4:://://
::4:7::///://
::5:0::/://
::6:0::/://
::7:0::/://
::8:12::///://
::11:0::/AAA://
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#[a-Z]##g' p.txt   # 小a-z  大A-Z</span>


<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#[0-Z]##g' p.txt   # 0-9 a-z  A-Z</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#[:/0-9]# #g' p.txt |xargs -n1|sort |uniq -c|sort -rn|head</span>
     <span class="token number">12</span> sbin
     <span class="token number">10</span> x
      <span class="token number">6</span> nologin
      <span class="token number">5</span> bin
      <span class="token number">4</span> AAA
      <span class="token number">3</span> var
      <span class="token number">3</span> <span class="token function">sync</span>
      <span class="token number">3</span> <span class="token function">shutdown</span>
      <span class="token number">3</span> mail
      <span class="token number">3</span> <span class="token function">halt</span>


注意: -在中括号写到量变，如果在两个符号的中间报错，表示区间。
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed 's#[-:/]# #g' p.txt |xargs -n1|sort |uniq -c|sort -rn|head</span>
     <span class="token number">12</span> sbin
     <span class="token number">10</span> x
      <span class="token number">6</span> nologin
      <span class="token number">6</span> <span class="token number">0</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br></div></div><h3 id="_6-sed后向引用"><a href="#_6-sed后向引用" class="header-anchor">#</a> 6，sed后向引用</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构:
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># echo malu|sed -r 's#(malu)#\1#g'</span>
malu
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># echo malu|sed -r 's#(ol)d(bo)y#\1#g'</span>
ol
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># echo malu|sed -r 's#(ol)d(bo)y#\2#g'</span>
bo
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># echo malu|sed -r 's#(ol)d(bo)y#\1\2#g'</span>
olbo
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># echo malu|sed -r 's#(ol)d(bo)y#\1 \2#g'</span>
ol bo
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># echo malu|sed -r 's#(.*)#\1#g'</span>
malu


使用后向引用取出IP地址
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># ifconfig ens33|sed -rn '2s#^.*inet (10.0.0.200)  net.*$#\1#gp'</span>
<span class="token number">10.0</span>.0.200
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># ifconfig ens33|sed -rn '2s#^.*inet (.*)  net.*$#\1#gp'</span>
<span class="token number">10.0</span>.0.200


取出IP地址和子网掩码
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># ifconfig ens33|sed -rn '2s#^.*inet (.*)  net.* (.*)  br.*$#\1 \2#gp'</span>
<span class="token number">10.0</span>.0.200 <span class="token number">255.255</span>.255.0

<span class="token parameter variable">-n</span> 回车换行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># ifconfig ens33|sed -rn '2s#^.*inet (.*)  net.* (.*)  br.*$#\1\n\2#gp'</span>
<span class="token number">10.0</span>.0.200
<span class="token number">255.255</span>.255.0

使用后向引用格式化输出
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># sed -ri 's#(.*)#o\1#g' p.txt</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat p.txt </span>
oAAA:x:0:0:AAA:/AAA:/bin/bash
obin:x:1:1:bin:/bin:/sbin/nologin
odaemon:x:2:2:daemon:/sbin:/sbin/nologin
oadm:x:3:4:adm:/var/adm:/sbin/nologin




sed小结:  
<span class="token number">1</span>.sed指定行查找
  <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3p'</span> <span class="token function">file</span>
  <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3,5p'</span> <span class="token function">file</span>
  <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'$p'</span> <span class="token function">file</span>
<span class="token number">2</span>.sed模糊过滤字符串 支持正则 ^ $ <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> .* 
  <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'//p'</span> <span class="token function">file</span>
  <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'//,//p'</span> <span class="token function">file</span>
  <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/^r/p'</span>  <span class="token function">file</span>  
<span class="token number">3</span>.sed删除
  <span class="token function">sed</span> <span class="token string">'3d'</span> <span class="token function">file</span>
  <span class="token function">sed</span> <span class="token string">'3,5d'</span> <span class="token function">file</span>
  <span class="token function">sed</span> <span class="token string">'/字符串/d'</span> <span class="token function">file</span> 
  <span class="token function">sed</span> <span class="token string">'//,//d'</span>   <span class="token function">file</span>   时间区间范围
<span class="token number">4</span>.增加内容
  <span class="token function">sed</span> <span class="token string">'3c'</span> <span class="token function">file</span>  <span class="token comment"># 替换整行</span>
  <span class="token function">sed</span> <span class="token string">'3a'</span> <span class="token function">file</span>  <span class="token comment"># 追加</span>
  <span class="token function">sed</span> <span class="token string">'3i'</span> <span class="token function">file</span>  <span class="token comment"># 插入</span>
<span class="token number">5</span>.sed替换
  <span class="token function">sed</span> <span class="token string">'s###g'</span> <span class="token comment"># 替换文件中所有的字符串为xx</span>
  <span class="token function">sed</span> <span class="token string">'s///g'</span>
  模式+动作
  <span class="token function">sed</span> <span class="token string">'2s###g'</span><span class="token comment"># 指定行替换</span>
  <span class="token function">sed</span> <span class="token string">'/root/s###g'</span> 包含root的行替换
  <span class="token function">sed</span> <span class="token string">'s#[a-z]##g'</span> 删除a-z的字符
<span class="token number">6</span>.后向引用
  <span class="token builtin class-name">echo</span> malu<span class="token operator">|</span><span class="token function">sed</span> <span class="token parameter variable">-r</span> <span class="token string">'s#(.*)#\1#g'</span>  <span class="token comment"># 没行使用正则表示，并且输出想要的内容。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h3 id="_7-总结"><a href="#_7-总结" class="header-anchor">#</a> 7，总结</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>作用：1.查找文件内容
     <span class="token number">2</span>.直接按行查找
     <span class="token number">3</span>.追加内容到文件
     <span class="token number">4</span>.替换文件内容
     <span class="token number">5</span>.进行格式化输出（后向引用）
     <span class="token number">6</span>.模糊过滤
<span class="token function">sed</span> <span class="token string">'模式'</span> <span class="token string">'动作'</span> <span class="token function">file</span>       <span class="token comment">#效率高 适合单个文件处理</span>
<span class="token function">cat</span> <span class="token function">file</span><span class="token operator">|</span><span class="token function">sed</span> <span class="token string">'模式 动作'</span>     <span class="token comment">#效率低 适合前面是其他命令的，已经处理过的，需要sed继续处理</span>
<span class="token function">sed</span> <span class="token string">'找谁 干啥'</span> <span class="token function">file</span>
默认输出所有的文件
找谁：怎么找 按行查找 模糊过滤内容
干啥：输出 删除 替换 
动作包括：p d i a
 
参数：   
        <span class="token parameter variable">-n</span>    取消默认输出，使用sed有n就有p，print
          ，    表示区间范围
        <span class="token parameter variable">-r</span>    支持扩展正则
        <span class="token parameter variable">-i</span>    改变源文件
 
一、按行查找：
 
<span class="token number">1</span>.按照行进行查找
<span class="token function">sed</span> <span class="token string">'n p'</span> <span class="token function">file</span>
找id.txt的第三行
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -n '3p' id.txt </span>
 
<span class="token number">2</span>.输出文件的最后一行
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -n '$p' id.txt  此时$表示最后一行</span>
 
<span class="token number">3</span>.查找文件的三到五行，区间使用逗号分割
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -n '3,5p' id.txt </span>
 
<span class="token number">4</span>.显示三到最后一行
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -n '3,$p' id.txt </span>
 
二、模糊过滤（类似grep）
 
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/过滤的内容/p'</span> <span class="token function">file</span> 加斜杠只因为后面有动作，所以需要分割开
<span class="token function">sed</span> <span class="token string">'/找谁/干啥'</span> <span class="token function">file</span>  没有高亮
 
<span class="token number">1</span>.查找包含boy的行
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -n '/boy/p' id.txt</span>
 
<span class="token number">2</span>.查找包含boy和ok的行
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -rn '/boy|ok/p' id.txt</span>
sed不支持扩展，需要加-r
 
<span class="token number">3</span>.过滤boy和ok之间的行
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#sed -n '/boy/,/ok/p' id.txt</span>
 
注意：过滤区间范围时是成对出现，有头没有尾的会继续往下找，直到全部找到
有结尾没有开头的就找不着。
如果有两个结尾，且行连续，会匹配到最后的结尾，行不连续，则中间部分不会过滤出来
 
企业中可以匹配日志时间范围
 
三、sed增加内容（了解）
 
<span class="token function">sed</span> <span class="token string">'3a 内容'</span> <span class="token function">file</span> 在第三行后面追加内容
<span class="token function">sed</span> <span class="token string">'3i 内容'</span> <span class="token function">file</span> 在第三行插入内容，第三行原本内容下移，变成第四行
<span class="token function">sed</span> <span class="token string">'3c 内容'</span> <span class="token function">file</span> 替换第3行整行内容
<span class="token function">sed</span> <span class="token string">'3w 新文件'</span> <span class="token function">file</span> 把file的第三行写入到新文件中
 
示例1：追加 append
临时显示到屏幕上，没有修改源文件
<span class="token function">sed</span> <span class="token string">'2a test'</span> <span class="token number">1</span>.txt
 
示例2：模糊过滤abc插入，因为是逐行查找，所有abc下面都插入
<span class="token function">sed</span> <span class="token string">'/abc/i test'</span> <span class="token number">1</span>.txt
 
<span class="token function">sed</span> <span class="token string">'1,$i test'</span> <span class="token number">1</span>.txt
所有行下面加test
 
示例3：替换整行，写xhell脚本，做系统优化的时候使用。
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'3C aaa'</span> <span class="token number">1</span>.txt
 
四、sed删除
 
<span class="token function">sed</span> <span class="token string">'3d'</span> <span class="token function">file</span> <span class="token comment">#删除第3行</span>
<span class="token function">sed</span> <span class="token string">'3,5d'</span> <span class="token function">file</span> <span class="token comment">#删除3-5行 没有第五行会删除后面的有几行算几行</span>
<span class="token function">sed</span> <span class="token string">'//d'</span> <span class="token function">file</span> 删除过滤到内容的行
<span class="token function">sed</span> <span class="token string">'//,//d'</span> <span class="token function">file</span> 删除过滤到的区间范围
 
注意不能加-n，不然取消默认输出就不知道删没删了，没n也就没有p
 
示例1：删除第三行
<span class="token function">sed</span> <span class="token string">'3d'</span> <span class="token number">1</span>.txt
 
示例2：删除第三行到第五行
<span class="token function">sed</span> <span class="token string">'3,5d'</span> <span class="token number">1</span>.txt
 
示例3：删除模糊过滤到内容的行
<span class="token function">sed</span> <span class="token string">'/boy/d'</span> <span class="token number">1</span>.txt
 
示例4：删除过滤到的区间范围
<span class="token function">sed</span> <span class="token string">'/boy/,/ok/d'</span> <span class="token number">1</span>.txt
 
五、sed替换
 
作用：支持替换单词，替换特殊字符，替换数字、删除单词
 
<span class="token function">sed</span> <span class="token string">'s###g'</span> <span class="token function">file</span> <span class="token comment">#可以是任意三个相同的字符@，/</span>
<span class="token comment">#但是要注意格式问题，别和里面内容一样了</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'5s###gp'</span> <span class="token function">file</span> <span class="token comment">#替换第五行内容</span>
<span class="token comment">#加g是替换全局，不加是替换每行第一个</span>
vim替换
:%s/root/boy/g
 
示例1：替换文件中的boy为ok，只替换每一行第一个出现boy的单词
<span class="token function">sed</span> <span class="token string">'s#boy#ok#'</span> <span class="token number">1</span>.txt
 
示例2：替换文件中所有的boy为ok
<span class="token function">sed</span> <span class="token string">'s#boy#ok#g'</span> <span class="token number">1</span>.txt
 
示例3：实际修改文件，将所有的boy为ok
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s#boy#ok#g'</span> <span class="token number">1</span>.txt
 
示例4：替换boy和ok为test
<span class="token function">sed</span> <span class="token parameter variable">-r</span> <span class="token string">'s#boy|ok#test#g'</span> <span class="token number">1</span>.txt
 
示例4：只替换ten和ok为test
<span class="token function">sed</span> <span class="token parameter variable">-r</span> <span class="token string">'s#\&lt;ten|ok#test#g'</span> <span class="token number">1</span>.txt  <span class="token comment">#需要加边界</span>
<span class="token function">sed</span> <span class="token parameter variable">-r</span> <span class="token string">'s#\bten|ok#test#g'</span> <span class="token number">1</span>.txt  <span class="token comment">#需要加边界</span>
 
示例5：把boy替换为空
<span class="token function">sed</span> <span class="token string">'s#[a-Z]##g'</span> <span class="token number">1</span>.txt
 
<span class="token punctuation">[</span><span class="token number">0</span>-Z<span class="token punctuation">]</span>表示<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span>a-z<span class="token punctuation">]</span><span class="token punctuation">[</span>A-Z<span class="token punctuation">]</span>
 
示例6：把特殊字符:/字母x数字为空
<span class="token function">sed</span> <span class="token string">'s#[0-9:/x]##g'</span> <span class="token number">1</span>.txt
 
六、sed后向引用
 
作用：格式化输出
可以将一行内容通过正则方式匹配到，然后增加其他的字符串
<span class="token function">sed</span> <span class="token parameter variable">-r</span> <span class="token string">'s#(匹配的内容)(内容)(内容)#\1\2\3#g'</span> 前面都支持正则，匹配其他内容的输出
 
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#echo test |sed -r 's#(test)#\1#g'</span>
<span class="token builtin class-name">test</span>
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#echo test |sed -r 's#(test)#&lt;\1&gt;#g'</span>
<span class="token operator">&lt;</span>test<span class="token operator">&gt;</span>
 
如果一行一个括弧就默认匹所有了
 
使用正则匹配字符串输出结果
 
可以批量创建用户
 
高难度例题！！！
使用sed给1.txt文件中1-3行前面加上<span class="token comment">#注释</span>
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt</span>
koten1:koten1:1111:111:koten1:/home/koten1:/bin/bash
koten1:koten1:1111:111:koten1:/home/koten1:/bin/bash
koten2:koten2:2222:111:koten2:/home/koten2:/bin/bash
koten2:koten2:2222:111:koten2:/home/koten2:/bin/bash
koten3:koten3:3333:111:koten3:/home/koten3:/bin/bash
koten4:koten4:444:111:koten4:/home/koten4:/sbin/nologin
方法一：
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment"># sed -i -r '1,3s#(.*)#\#\1#g' 1.txt </span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt</span>
<span class="token comment">#koten1:koten1:1111:111:koten1:/home/koten1:/bin/bash</span>
<span class="token comment">#koten1:koten1:1111:111:koten1:/home/koten1:/bin/bash</span>
<span class="token comment">#koten2:koten2:2222:111:koten2:/home/koten2:/bin/bash</span>
koten2:koten2:2222:111:koten2:/home/koten2:/bin/bash
koten3:koten3:3333:111:koten3:/home/koten3:/bin/bash
koten4:koten4:444:111:koten4:/home/koten4:/sbin/nologin
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment"># </span>
 
注意：-r和-i要分开，不能用-ir，但是可以用-ri
 
方法二：
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment"># sed -i '1,3s#^#\##g' 1.txt</span>
 
 
sed小结：
<span class="token number">1</span>.sed查找
sed按行查找
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3p'</span> <span class="token function">file</span> <span class="token comment">#指定行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3,5p'</span> <span class="token function">file</span> <span class="token comment">#指定区间范围</span>
sed模糊过滤
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'//p'</span> <span class="token function">file</span> <span class="token comment">#过滤内容</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'//,//p'</span> <span class="token function">file</span> <span class="token comment">#表示区间范围</span>
<span class="token number">2</span>.sed删除
<span class="token number">3</span>.sed替换 支持正则
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br></div></div><h2 id="三-awk"><a href="#三-awk" class="header-anchor">#</a> 三，awk</h2> <h3 id="_1-awk指定行查找"><a href="#_1-awk指定行查找" class="header-anchor">#</a> 1，awk指定行查找</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>awk语法结构:
    <span class="token function">awk</span> <span class="token string">'{动作}'</span>  <span class="token function">file</span>  <span class="token comment"># 如果不加动作默认就是输出</span>
    <span class="token function">awk</span> <span class="token string">'{print xx}'</span> <span class="token function">file</span>
    <span class="token function">awk</span> <span class="token string">'模式{动作}'</span> <span class="token function">file</span>
    <span class="token function">awk</span> <span class="token string">'找谁 干啥'</span>  <span class="token function">file</span>
    
找谁: 找行 找列 字符串
动作: 都是在<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构：		
	<span class="token function">awk</span> <span class="token string">'NR==3'</span> <span class="token function">file</span>  
NR存放每行的行号

案例1.找出第3行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk 'NR==3' p.txt </span>
daemon:x:2:2:daemon:/sbin:/sbin/nologin

比较符:
<span class="token operator">!=</span> 不相等
<span class="token operator">==</span> 相等
<span class="token operator">&gt;</span>  大于
<span class="token operator">&gt;=</span> 大于等于
<span class="token operator">&lt;</span>  小于
<span class="token operator">&lt;=</span> 小于等于
区间范围:
<span class="token operator">&amp;&amp;</span> 并且
<span class="token operator">||</span> 或者

案例2.查找出大于5的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk 'NR&gt;5' p.txt </span>
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/AAA:/sbin/nologin

案例3.输出小3的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk 'NR&lt;3'  p.txt </span>
AAA:x:0:0:AAA:/AAA:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin

案例4.查找大于2并且小于6的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk 'NR&gt;2&amp;&amp;NR&lt;6' p.txt </span>
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin

案例5.查找小于2或者大于5的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk 'NR&lt;2||NR&gt;5' p.txt </span>
AAA:x:0:0:AAA:/AAA:/bin/bash
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/AAA:/sbin/nologin

案例6.查找不等于第3行的行，对第3行取反
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk 'NR!=3' 33.txt </span>
<span class="token number">11111111</span>
<span class="token number">2222222222</span>
<span class="token number">33333333</span>
malu
wangcai <span class="token number">222</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="_2-awk取列"><a href="#_2-awk取列" class="header-anchor">#</a> 2，awk取列</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构：
	   <span class="token function">awk</span> <span class="token string">'{print $1}'</span> <span class="token function">file</span> <span class="token comment"># 获取文件的第一列内容 </span>
awk默认以空格或者tab键作为列的分隔符

<span class="token variable">$0</span>  <span class="token comment"># 表示每行的内容，所有</span>
<span class="token variable">$1</span>  <span class="token comment"># 表示第1列</span>
<span class="token variable">$2</span>  <span class="token comment"># 表示第2列</span>
<span class="token variable">$n</span>  <span class="token comment"># 表示第n列</span>

NF  <span class="token comment"># 存放着最后一列的列号</span>
,   <span class="token comment"># 表示空格</span>

案例1.输出文件的第1列内容
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt</span>
malu      <span class="token number">100</span>     aa
oldgirl     <span class="token number">99</span>      bb
xiaoming    <span class="token number">88</span> 	    cc
xiaohong    <span class="token number">0</span>	    <span class="token function">dd</span>
xiaozi      <span class="token number">33</span>	    ee
xiaolang    <span class="token number">56</span>      ff
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '{print $1}' 33.txt </span>
malu
oldgirl
xiaoming
xiaohong
xiaozi
xiaolang


案例2.输出文件的第2列
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '{print $2}' 33.txt </span>
<span class="token number">100</span>
<span class="token number">99</span>
<span class="token number">88</span>
<span class="token number">0</span>
<span class="token number">33</span>
<span class="token number">56</span>

案例3.输出文件的最后一列
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt |awk '{print $NF}'</span>
aa
bb
cc
<span class="token function">dd</span>
ee
ff

案例4.获取磁盘信息的最后一列
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># df -h|awk '{print $NF}'</span>
on
/dev
/dev/shm
/run
/sys/fs/cgroup
/
/tmp
/boot
/run/user/0
/mnt





NF存储最后一列的列号:
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt </span>
malu      <span class="token number">100</span>     aa
oldgirl     <span class="token number">99</span>      bb
xiaoming    <span class="token number">88</span> 	    cc
xiaohong    <span class="token number">0</span>	    <span class="token function">dd</span>
xiaozi      <span class="token number">33</span>	    ee
xiaolang    <span class="token number">56</span>      ff
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt|awk '{print NF}'</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt|awk '{print $NF}'</span>
aa
bb
cc
<span class="token function">dd</span>
ee
ff

输出每行最后的列好
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt</span>
malu      <span class="token number">100</span>     aa
oldgirl     <span class="token number">99</span>      bb
xiaoming    <span class="token number">88</span> 	    cc
xiaohong    <span class="token number">0</span>	    <span class="token function">dd</span>   <span class="token number">33</span>
xiaozi      <span class="token number">33</span>	    ee   tt
xiaolang    <span class="token number">56</span>      ff   ii  oo
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt|awk '{print NF}'</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">4</span>
<span class="token number">5</span>

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt</span>
malu      <span class="token number">100</span>     aa
oldgirl     <span class="token number">99</span>      bb
xiaoming    <span class="token number">88</span> 	    cc
xiaohong    <span class="token number">0</span>	    <span class="token function">dd</span>   <span class="token number">33</span>
xiaozi      <span class="token number">33</span>	    ee   tt
xiaolang    <span class="token number">56</span>      ff   ii  oo
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt|awk '{print NF}'</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">4</span>
<span class="token number">5</span>
输出最后一列的内容
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt|awk '{print $NF}'</span>
aa
bb
cc
<span class="token number">33</span>
tt
oo


案例: 取出文件的倒数第2列的内容
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt |awk '{print $(NF-1)}'</span>
<span class="token number">100</span>
<span class="token number">99</span>
<span class="token number">88</span>
<span class="token function">dd</span>
ee
ii


使用-F指定分隔符，指定了空格和tab键失效,指定任意字符串为分隔符
语法格式:
		<span class="token function">awk</span> -F: <span class="token string">'{print }'</span>
		<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{print}'</span>
案例1.指定分隔符 取出文件的第一列
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># head -10 /etc/passwd &gt; p.txt</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F: '{print $1}' p.txt </span>
root
bin
daemon
adm
lp
<span class="token function">sync</span>
<span class="token function">shutdown</span>

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F &quot;:&quot; '{print $1}' a.txt </span>
root
bin



案例2.指定多个符号为分隔符  :/是一个整体
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt </span>
root:x:0:0:root:/malu:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># #cat a.txt |awk -F &quot;:/&quot; '{print $}'</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt |awk -F &quot;:/&quot; '{print $2}'</span>
malu

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># #类似 grep 'abc'  grep '[abc]'</span>


案例3.取出第一列的root和malu字符串
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt </span>
root:x:0:0:root:/malu:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt |awk -F &quot;:&quot; '{print $1,$6}'</span>
root /malu
bin /bin


<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt </span>
root:x:0:0:root:/malu:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt |awk -F &quot;[:/]&quot; '{print $1,$7}'</span>
root malu
bin bin


<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt |awk -F &quot;[:/]+&quot; '{print $1,$6}'</span>
root malu
bin bin

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># grep -E '[:/]+' a.txt  -o</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
:/
:/
/
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
:/
:/
/



<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat a.txt </span>
root:x:0:0:root://://:::/malu:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># grep -E '[:/]+' a.txt  -o</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
<span class="token builtin class-name">:</span>
://://:::/
:/


<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F &quot;[:/]+&quot; '{print $6}' a.txt </span>
malu
bin


案例: 同时输出文件的第1列和第6列
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F: '{print $1,$6}' p.txt </span>
root /root
bin /bin
daemon /sbin
adm /var/adm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br></div></div><h3 id="_3-匹配字符串"><a href="#_3-匹配字符串" class="header-anchor">#</a> 3，匹配字符串</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法结构:
		 <span class="token function">grep</span> <span class="token string">'字符串'</span> <span class="token function">file</span>
		 <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/字符串/p'</span> <span class="token function">file</span>
		 <span class="token function">awk</span> <span class="token string">'/字符串/'</span> <span class="token function">file</span>

案例1.查找包含root的行
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/root/' p.txt </span>
root:x:0:0:root:/root:/bin/bash
operator:x:11:0:operator:/root:/sbin/nologin

案例2.区间范围
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/adm/,/sync/' p.txt </span>
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync

案例3.支持正则
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/^r/' p.txt </span>
root:x:0:0:root:/root:/bin/bash
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/^h/' p.txt </span>
halt:x:7:0:halt:/sbin:/sbin/halt
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/h$/' p.txt </span>
root:x:0:0:root:/root:/bin/bash
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/n$/' p.txt </span>



扩展正则:
<span class="token function">grep</span> <span class="token parameter variable">-E</span> 或者 <span class="token function">egrep</span>
<span class="token function">sed</span>  <span class="token parameter variable">-r</span>
<span class="token function">awk</span>  不需要默认支持
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '/root|sync/' p.txt </span>
root:x:0:0:root:/root:/bin/bash
sync:x:5:0:sync:/sbin:/bin/sync
operator:x:11:0:operator:/root:/sbin/nologin



<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># cat 33.txt </span>
malu      <span class="token number">100</span>     aa
oldgirl     <span class="token number">99</span>      bb
xiaoming    <span class="token number">88</span> 	    cc
xiaohong    <span class="token number">0</span>	    <span class="token function">dd</span>   <span class="token number">33</span> malu
xiaozi      <span class="token number">33</span>	    ee   tt
xiaolang    <span class="token number">56</span>      ff   ii  oo
malu
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk '$1==&quot;malu&quot;' 33.txt </span>
malu      <span class="token number">100</span>     aa
malu


<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F &quot;[:/]+&quot; '$6==&quot;var&quot;' p.txt </span>
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h3 id="_4-awk模式-动作"><a href="#_4-awk模式-动作" class="header-anchor">#</a> 4，awk模式+动作</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>语法格式:
		   <span class="token function">awk</span> <span class="token string">'NR==3{print $1}'</span> <span class="token comment"># 找谁干啥</span>
		   <span class="token function">awk</span> <span class="token string">'找谁{动作}'</span>

找谁:
	 <span class="token function">awk</span> <span class="token string">'NR==3'</span>
	 <span class="token function">awk</span> <span class="token string">'$1==&quot;root&quot;'</span>
	 <span class="token function">awk</span> <span class="token string">'/root/'</span>
	 <span class="token function">awk</span> <span class="token string">'/root/,/sync/'</span>
	 <span class="token function">awk</span> <span class="token string">'/n$/'</span>
	 <span class="token function">awk</span> <span class="token string">'/^s/'</span>
	 
案例1.将包含root的行的第3列输出
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F: '/root/{print $3}' p.txt </span>
<span class="token number">0</span>
<span class="token number">11</span>
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># awk -F: 'NR==1||NR==10{print $3}' p.txt </span>
<span class="token number">0</span>
<span class="token number">11</span>

案例2.取出磁盘当前的使用率
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># df -h|awk 'NR==8{print $(NF-1)}'</span>
<span class="token number">17</span>%

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># df -h|awk '/ot$/{print $(NF-1)}'</span>
<span class="token number">17</span>%

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># df -h|grep 'ot$'</span>
/dev/sda1             1014M  169M  846M  <span class="token number">17</span>% /boot
<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># df -h|grep 'ot$'|awk '{print $(NF-1)}'</span>
<span class="token number">17</span>%

<span class="token punctuation">[</span>root@malu:~<span class="token punctuation">]</span><span class="token comment"># df -h|sed -n '/ot$/p'|awk '{print $(NF-1)}'</span>
<span class="token number">17</span>%
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_5-总结"><a href="#_5-总结" class="header-anchor">#</a> 5，总结</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>作用：
<span class="token number">1</span>、按行查找文件内容
<span class="token number">2</span>、模糊过滤文件内容
<span class="token number">3</span>、按照列查找文件内容，可以对文件内容取列
<span class="token number">4</span>、还可以做数值运算，数值比对，字符串比对
<span class="token number">5</span>、支持for循环，while循环，if判断，数组，格式化输出
<span class="token number">6</span>、awk就好像一门编程语言，是GNU项目三个人一起写的 a w k 组成awk，也叫gawk
 
语法结构：
    <span class="token function">awk</span> <span class="token string">'找谁{干啥}'</span> <span class="token function">file</span>
    <span class="token function">awk</span> <span class="token string">'查找'</span> <span class="token function">file</span>    没有动作会输出所有的行（对每行进行一个默认的动作处理 输出）
    <span class="token function">df</span> -h<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'查找{干啥}'</span>
 
一、awk取行
    <span class="token function">awk</span> <span class="token string">'NR==3'</span> <span class="token function">file</span>
    <span class="token function">awk</span> <span class="token string">'NR==3{print}'</span> <span class="token function">file</span>    默认
    NR：是awk的内置变量 存储着每行的行号
    NR可以是
    <span class="token operator">==</span>相等的行
    ！<span class="token operator">=</span>不等于的行
    <span class="token operator">&gt;</span>大于
    <span class="token operator">&lt;</span>小于
    <span class="token operator">&gt;=</span>大于等于
    <span class="token operator">&lt;=</span>小于等于
    <span class="token operator">&amp;&amp;</span>并且
    <span class="token operator">||</span>或者
 
示例1、取1.txt第三行
<span class="token function">awk</span> <span class="token string">'NR==3'</span> <span class="token number">1</span>.txt
 
示例2：查找不等于第三行的内容
<span class="token function">awk</span> <span class="token string">'NR!=3'</span> <span class="token number">1</span>.txt
 
示例3：查找小于等于三行的内容
<span class="token function">awk</span> <span class="token string">'NR&lt;=3'</span> <span class="token number">1</span>.txt
 
示例4：找出第一行或者大于九行的内容
<span class="token function">awk</span> <span class="token string">'NR==3||NR&gt;=9'</span> <span class="token number">1</span>.txt <span class="token comment">#注意这里不是正则表达式，是比较判断</span>
    
二、awk模糊过滤 最好的方式是去取字符创方式去匹配 <span class="token function">cat</span> <span class="token parameter variable">-n</span> 会耗费性能
    <span class="token function">awk</span> <span class="token string">'/内容/'</span> 文件
    <span class="token function">df</span> -h<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'/内容/'</span>
    <span class="token function">awk</span> <span class="token string">'//,//'</span> 文件
 
示例1：查找过滤出包含root的行
    <span class="token function">awk</span> <span class="token string">'/root/'</span> <span class="token number">1</span>.txt
 
示例2：查找出包含root或者mail的行
    <span class="token function">awk</span> <span class="token string">'/root|mail/'</span> <span class="token number">1</span>.txt <span class="token comment">#默认支持扩展正则</span>
 
示例3：支持正则
    <span class="token function">awk</span> <span class="token string">'/^.*mail/'</span> <span class="token number">1</span>.txt
 
示例4：匹配区间范围
    <span class="token function">awk</span> <span class="token string">'/boy/,/girl/'</span> <span class="token number">1</span>.txt
 
三、awk取列
    <span class="token function">awk</span> <span class="token string">'{print $1}'</span> <span class="token function">file</span>
 
    awk内置变量
    <span class="token variable">$0</span>表示所有文件内容，实际底层表示每一行的内容
    <span class="token variable">$1</span>表示文件的第一列
    <span class="token variable">$2</span>表示文件的第二列
    <span class="token variable">$3</span>表示文件的第三列
    ……
    <span class="token variable">$NF</span>表示所有文件的最后一列
    ，逗号为awk的内部变量，就是空格的含义
    不想使用逗号就使用<span class="token string">&quot; &quot;</span>,<span class="token string">&quot;----&quot;</span>,双引号里面放什么东西都可以
    注意：awk动作中<span class="token punctuation">{</span><span class="token punctuation">}</span>所有字符串都视为变量
    -F指定分割符
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#cat 1.txt </span>
aaa
bbb
ccc
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#awk '{print ok}' 1.txt</span>
 
 
 
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#awk '{print &quot;ok&quot;}' 1.txt</span>
ok
ok
ok
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#awk '{a++}END{print a}' 1.txt #取行号</span>
<span class="token number">3</span>
<span class="token punctuation">[</span>root@VMware-koten ~<span class="token punctuation">]</span><span class="token comment">#</span>
 
 
 
示例1：取出文件的第一列，awk默认对整个文件的内容处理
    <span class="token function">awk</span> <span class="token string">'{print $1}'</span> <span class="token number">1</span>.txt
    <span class="token comment">#底层是对每一行进行动作处理，取第一列是先取第一行到内存空间，取的第一个，再取第二行的第二个</span>
    <span class="token comment">#如果遇到没有的就会print空</span>
 
示例2: 取文件的最后一列（会取到每一行的最后一列）
      NF 存储着每一行的列号
      <span class="token function">awk</span>  <span class="token string">'{print $NF}'</span> <span class="token number">1</span>.txt
 
    取倒数第二列
    <span class="token function">awk</span> <span class="token string">'{print $(NF-1)}'</span> <span class="token number">1</span>.txt
 
示例3：awk指定分隔符
awk取列默认按照空格 tab键
 
<span class="token function">awk</span> -F: <span class="token string">'{print $1}'</span> <span class="token number">1</span>.txt  <span class="token comment">#指定冒号为分割</span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{print $1}'</span> <span class="token number">1</span>.txt  <span class="token comment">#指定冒号为分割</span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;[/:]&quot;</span> <span class="token string">'{print $1}'</span> <span class="token number">1</span>.txt   <span class="token comment">#以斜杠和冒号分割 </span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;/|:&quot;</span> <span class="token string">'{print $1}'</span> <span class="token number">1</span>.txt   <span class="token comment">#不用中括号可以用| </span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;[/:]+&quot;</span> <span class="token string">'{print $1}'</span> <span class="token number">1</span>.txt   
<span class="token comment">#前面出现1次或1次以上，当做一个整体</span>
<span class="token comment">#以斜杠和冒号和斜杠冒号和冒号斜杠分割，冒号和斜杠不管谁在前后都是连续的，一个整体</span>
 
示例4：给文本加行号
<span class="token function">awk</span> <span class="token string">'{print NR,$F}'</span> <span class="token number">1</span>.txt
 
四、模式+动作
 
<span class="token function">awk</span> <span class="token string">'NR==3'</span> <span class="token function">file</span>                            <span class="token comment">#找谁</span>
<span class="token function">awk</span> <span class="token string">'{print $2}'</span> <span class="token function">file</span>                       <span class="token comment">#动作</span>
<span class="token function">awk</span> <span class="token string">'NR==3{print $2}'</span> <span class="token function">file</span>                  <span class="token comment">#取下第三行的第二列</span>
<span class="token function">awk</span> <span class="token string">'NR==3{print $2,$NF}'</span> <span class="token function">file</span>              <span class="token comment">#取下第三行的第二列和最后一列</span>
<span class="token function">awk</span> <span class="token string">'NR&gt;2&amp;&amp;NR&lt;6{print $2,$NF}'</span> <span class="token function">file</span>         <span class="token comment">#取第三四五行的第2列和最后一列</span>
<span class="token function">awk</span> -F: <span class="token string">'/root/{print $1}'</span> p.txt            <span class="token comment">#先模糊过滤找行，再找以冒号分割的第一列</span>
<span class="token function">awk</span> -F: <span class="token string">'/root/,/shutdown/{print $1}'</span> p.txt <span class="token comment">#区间范围也没有问题</span>
 
五、字符串比较，数值比较 
<span class="token function">awk</span> <span class="token string">'$1==&quot;root&quot;'</span> <span class="token function">file</span>     字符串比较 注意匹配字符串一定要加双引号
<span class="token function">awk</span> <span class="token string">'$1==&quot;root&quot;{print $NF}'</span> <span class="token function">file</span>  模式加动作
 
<span class="token function">awk</span> <span class="token string">'$1==&quot;root&quot;'</span> <span class="token number">1</span>.txt    第一列等于root的行
<span class="token function">awk</span> <span class="token string">'$1!=&quot;root&quot;'</span> <span class="token number">1</span>.txt    第一列等于root的行
 
上面是字符串，也可以用正则
 
<span class="token function">awk</span> <span class="token string">'$1~&quot;n$&quot;'</span> <span class="token function">file</span>        先取出指定列，用正则进行匹配
<span class="token function">awk</span> <span class="token string">'$1==0'</span> <span class="token function">file</span>          数值比较，第一列等于0的输出出来
<span class="token function">awk</span> <span class="token string">'$3&lt;5&amp;&amp;$3&gt;3'</span> <span class="token function">file</span>     数值比较，第三列小于5大于3的行
 
临时扩展下：
<span class="token function">cat</span> <span class="token parameter variable">-A</span> 显示^是tab键的意思
如何选择三剑客？
简单过滤文件内容：grep
想要替换内容：sed
取列做数据统计：awk
 
正常文件的tab和空格都可以作为分隔符
<span class="token function">cat</span> -n出来的不必深究用空格分割
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/26/2024, 9:15:52 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#一-正则" class="sidebar-link reco-side-一-正则" data-v-b57cc07c>一，正则</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_1-正则概述" class="sidebar-link reco-side-_1-正则概述" data-v-b57cc07c>1，正则概述</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_2-以-开头的行" class="sidebar-link reco-side-_2-以-开头的行" data-v-b57cc07c>2，^ 以....开头的行</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_3-以-结尾的行" class="sidebar-link reco-side-_3-以-结尾的行" data-v-b57cc07c>3，$ 以....结尾的行</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_4-空行-这行中没有任何字符" class="sidebar-link reco-side-_4-空行-这行中没有任何字符" data-v-b57cc07c>4，^$ 空行,这行中没有任何字符</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_5-任意一个字符-不匹配空行" class="sidebar-link reco-side-_5-任意一个字符-不匹配空行" data-v-b57cc07c>5，. 任意一个字符,不匹配空行</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_6-撬棍-转义字符-脱掉马甲打回原形-去掉特殊符号的含义" class="sidebar-link reco-side-_6-撬棍-转义字符-脱掉马甲打回原形-去掉特殊符号的含义" data-v-b57cc07c>6， \撬棍 转义字符 脱掉马甲打回原形,去掉特殊符号的含义</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_7-前一个字符连续出现0次或0次以上" class="sidebar-link reco-side-_7-前一个字符连续出现0次或0次以上" data-v-b57cc07c>7，* 前一个字符连续出现0次或0次以上</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_8-所有-任何字符" class="sidebar-link reco-side-_8-所有-任何字符" data-v-b57cc07c>8，.* 所有,任何字符</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_9-abc-表示匹配任意1个字符-a或b或c-中括号相当于一个字符" class="sidebar-link reco-side-_9-abc-表示匹配任意1个字符-a或b或c-中括号相当于一个字符" data-v-b57cc07c>9， [] [abc] 表示匹配任意1个字符,a或b或c,中括号相当于一个字符</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_10-abc-表示匹配任意1个字符-排除abc-中括号相当于一个字符" class="sidebar-link reco-side-_10-abc-表示匹配任意1个字符-排除abc-中括号相当于一个字符" data-v-b57cc07c>10， [^] [ ^abc ] 表示匹配任意1个字符,排除abc,中括号相当于一个字符</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_11-基础正则小结" class="sidebar-link reco-side-_11-基础正则小结" data-v-b57cc07c>11，基础正则小结</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_12-前一个字符连续出现1次或1次以上" class="sidebar-link reco-side-_12-前一个字符连续出现1次或1次以上" data-v-b57cc07c>12，+ 前一个字符连续出现1次或1次以上</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_13-或者" class="sidebar-link reco-side-_13-或者" data-v-b57cc07c>13， | 或者</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_14-表示一个整体-用于后向引用-反向引用sed" class="sidebar-link reco-side-_14-表示一个整体-用于后向引用-反向引用sed" data-v-b57cc07c>14，() 表示一个整体,用于后向引用(反向引用sed)</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_15-a-n-m-前一个字符连续出现至少n次-最多m次" class="sidebar-link reco-side-_15-a-n-m-前一个字符连续出现至少n次-最多m次" data-v-b57cc07c>15， {} a{n,m} 前一个字符连续出现至少n次,最多m次</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_16-前一个字符-出现0次或1次" class="sidebar-link reco-side-_16-前一个字符-出现0次或1次" data-v-b57cc07c>16， ? 前一个字符 出现0次或1次</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_17-正则小结" class="sidebar-link reco-side-_17-正则小结" data-v-b57cc07c>17, 正则小结</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_18-正则案例" class="sidebar-link reco-side-_18-正则案例" data-v-b57cc07c>18，正则案例</a></li><li class="level-2" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#二-sed" class="sidebar-link reco-side-二-sed" data-v-b57cc07c>二，sed</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_0-复习grep" class="sidebar-link reco-side-_0-复习grep" data-v-b57cc07c>0，复习grep</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_1-指定行查找" class="sidebar-link reco-side-_1-指定行查找" data-v-b57cc07c>1，指定行查找</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_2-模糊过滤" class="sidebar-link reco-side-_2-模糊过滤" data-v-b57cc07c>2，模糊过滤</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_3-sed删除" class="sidebar-link reco-side-_3-sed删除" data-v-b57cc07c>3，sed删除</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_4-sed增加内容" class="sidebar-link reco-side-_4-sed增加内容" data-v-b57cc07c>4，sed增加内容</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_5-sed替换" class="sidebar-link reco-side-_5-sed替换" data-v-b57cc07c>5，sed替换</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_6-sed后向引用" class="sidebar-link reco-side-_6-sed后向引用" data-v-b57cc07c>6，sed后向引用</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_7-总结" class="sidebar-link reco-side-_7-总结" data-v-b57cc07c>7，总结</a></li><li class="level-2" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#三-awk" class="sidebar-link reco-side-三-awk" data-v-b57cc07c>三，awk</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_1-awk指定行查找" class="sidebar-link reco-side-_1-awk指定行查找" data-v-b57cc07c>1，awk指定行查找</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_2-awk取列" class="sidebar-link reco-side-_2-awk取列" data-v-b57cc07c>2，awk取列</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_3-匹配字符串" class="sidebar-link reco-side-_3-匹配字符串" data-v-b57cc07c>3，匹配字符串</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_4-awk模式-动作" class="sidebar-link reco-side-_4-awk模式-动作" data-v-b57cc07c>4，awk模式+动作</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/09-%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2/%E6%AD%A3%E5%88%99%E4%B8%8E%E4%B8%89%E5%89%91%E5%AE%A2.html#_5-总结" class="sidebar-link reco-side-_5-总结" data-v-b57cc07c>5，总结</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/devops/public/assets/js/app.8794b62e.js" defer></script><script src="/devops/public/assets/js/111.99447e31.js" defer></script><script src="/devops/public/assets/js/1.774fca24.js" defer></script><script src="/devops/public/assets/js/161.7841f8ac.js" defer></script>
  </body>
</html>
