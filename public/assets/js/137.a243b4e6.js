(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{13450:function(s,a,n){"use strict";n.r(a);var t=n(2),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"_1-磁盘管理上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-磁盘管理上"}},[s._v("#")]),s._v(" 1，磁盘管理上")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("磁盘作用: 存储数据的 大片 视频 笔记 照片\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".磁盘分类:\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("机械硬盘 台式机 重 大 慢 像个砖头，在台式机里，3.5英寸大小，通过机械运动达到读写数据的作用\n    \t电机带动磁盘高速旋转，速度可以达到5400 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7200")]),s._v(" 每分钟多少转 \n    \trpm是 round per minute 每分钟多少转的意思\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("固态硬盘 轻 小 快   集成电路与芯片,存储芯片,是芯片式的\n    \t固态硬盘存储颗粒: SLC,TLC,MLC,3D Nand\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("NVme固态 轻 小 快, M.2磁盘 PCI-E 类似显卡 像内存条\n    \n外观大小:\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),s._v("英寸 存储大\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v("英寸 存储小\n    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".磁盘接口\n    IED接口   淘汰, 很多针，有插电源的地方\n    SCSI   淘汰, 笔记本 台式机 不常用\n    SATA 常用 家用 笔记本 台式机  左边数据线右边电源线 中间有豁口 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7200")]),s._v("转/10k转\n    \t一般家用,一般用于机械硬盘,也有固态硬盘,容量大，价格较低 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n    SAS 企业标配, 多出来一块 服务器标配 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".2k 10k 15k\n    \t给企业环境使用,一般用于机械硬盘,也有固态硬盘\n    \t15k/分钟 最大储存 900G（能达到15k转） 600G（用的居多，600*8或者600*4） 300G\n    \t做备份的服务器，只管空间大，2T 4T*8\n   \tPCI-E\n   \t\t企业级使用,固态硬盘用,白色插槽，可以插外接独立声卡\n   \tU.2\n   \t\t企业级固态硬盘使用。PCI-E类似\n    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".转速"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("注重安全速度就慢，注重速度安全性就低"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    SATA 转速慢/存储高 1T 2T 4T 8T 10T "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("万转/每分钟\n    SAS 转速快/存储少 300G 600G 900G 每分钟15000转  网站的数据 用户可以访问到的业务\n    企业:是SAS和SATA结合使用。热点存储到SAS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("用户经常访问的数据"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",冷数据存储到SATA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("用户不经常访问的数据库"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    900G*2 SAS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("转/每分钟\n    2T*2 SATA "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("转/每分钟\n    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".内部\n磁盘-硬盘（Disk）\n磁头（Head）\n    盘面数量"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("磁头数量\n    作用:用来写入和读取数据的\n    径向运动\n磁道（Track）\n    从外面到里面 最外面是0磁道\n扇区（Sector）\n    磁道上面的最小的单位\n    默认大小512字节\n柱面（Cylinder）\n    不同盘面上面的相同的磁道组成的圆柱体\n    不同盘面上的相同的呼啦圈组成的圆柱体\n    磁盘默认是按照柱面进行读写\n        磁头之间的切换速度 接近于光速\n        磁头径向运动-寻道 机械运动 慢\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".磁盘阵列"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raid逻辑的将磁盘组合在一起，可以增加容量，也可以提高性能"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 笔试题\n在使用物理服务器的时候,多块硬盘,这些硬盘需要通过raid卡"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("设备"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",统一进行管理。大部分需要做raid后才能安装系统,部署服务。raid 磁盘冗余阵列,管理磁盘方式。\n\n根据用户所设置的Raid级别可以获取如下一个或多个特点：\n\t可以获取更高的容量.\n\t可以获取更高的性能\n\t可以获取更高的冗余"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("安全"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n温馨提示: 上面3个特点会根据选用的raid方式"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raid级别"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",所有区别,一般无法同时都满足以上3点.\n\n作用: 将多块磁盘逻辑的组合成1块硬盘。\n\tRAID几 几块磁盘 安全冗余 可用容量\n\t性能                       使用场景                                     举例\n   RAID0  最少1块磁盘   不安全"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("损坏一块不行"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 硬盘总和 读写最快 只要求速度/不要求安全   数据库从节点\n   RAID1  只能有2块硬盘   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%冗余 一半 最慢 要求安全/速度一般       系统/企业内部服务\n   RAID5  最少需要3块  可以损坏一块盘 n-1块  读写还OK 业务较稳定的业务     数据库/业务量不高\n   RAID10 最少4块盘  可以损坏1半 一半  速度快 高并发业务场景       数据库主库/业务\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br")])]),a("p",[s._v("常用raid级别及应用场景")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("服务器磁盘先连接到raid卡上，再连接主板\n \nraid0    最高的存储性能 磁盘容量不浪费，读写很快\n要制作raid0 至少需要一块磁盘\n任何一块硬盘损坏，所有数据无法使用\n \nraid1    可以损失一半的数据容量\nraid1至少需要两块磁盘，需要偶数数量的磁盘\n不能提示存储性能，但会更安全，理论上写性能和单盘相差不大\n \nraid5    可以损失一块盘的容量 \n安全性最多可以损坏一块磁盘，也可以用热备盘，这样可以最多坏两个了\n写入性能不好，读取速度ok\n \nraid10   先将两块盘组成raid1，再将raid1组成raid0 \n可以损坏所有硬盘一半的容量，也看损失的是不是一样的数据\n读写很快\n \nraid01就反过来，raid01可以损失一边的\n \n企业中用0和5最多\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("磁盘格式:\n一块小于2T的磁盘MBR格式:\nMBR磁盘格式: 最大支持4个主分区\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("个主分区+1个扩展分区"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("逻辑分区"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    一个磁盘最多分四个，扩展分区最多一个，基于扩展分区划分逻辑分区\n    三个主分区+一个扩展分区+逻辑分区第五个开始\n    主分区：直接对磁盘进行格式化的分区，可以直接存储进去，速度也是最快\n    逻辑分区：扩展分区无法使用，基于逻辑分区划分逻辑分区。正常放数据，但是速度会慢\n    \n大于2T的磁盘 GPT格式\n最大支持128个主分区。\n\n\nMBR格式和GPT格式分区区别\n- MBR格式对于小于2T的磁盘进行分区 使用fdisk分区\n- GPT格式对于大于2T的磁盘进行分区 使用parted分区\n\n\n磁盘分区的设备名称\n第一块磁盘：sda\n第二块磁盘：sdb\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n第一块磁盘的第一个主分区：sda1\n第一块磁盘的第二个主分区：sda2\n第一块磁盘的第二个主分区：sda3\n第一块磁盘的第一个扩展分区：sda4\n第一块磁盘的第一个逻辑分区：ada5\n\n\n磁盘重点:\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".外观\n    固态\n    机械\n    nvme pci-e 类似显卡\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".大小\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),s._v("英寸 存储多\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v("英寸 存储少\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".服务器插多少块\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("1U")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".45cm\n    2U "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("块3.5英寸 或者 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("块2.5英寸磁盘\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".接口类型\n    SATA 家用 笔记本 台式机\n    SAS 企业标配\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".转速\n    SATA 1T 2T 4T 6T 10T 转速 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7200")]),s._v("转/10000转 数据\n    备份 内部使用\n    SAS 企业标配 15K/分钟 300G 600G 900G 对外的业务 固态。\n    硬盘多大的？\n    600G*6 900G*8 300G*12\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".RAID级别 笔试题 写出常用的RAID级别及详细信息\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".磁盘名称 分区的名称\n    sda 第一块磁盘\n    sda1\n    adb 第二块磁盘\n    adb1\n磁盘分区:\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("p",[s._v("磁盘的选择：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5730),alt:"1723561010349"}})]),s._v(" "),a("p",[s._v("机械VS固态：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5731),alt:"1723561183897"}})]),s._v(" "),a("p",[s._v("磁盘内部结构：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5732),alt:"1723561250441"}})]),s._v(" "),a("p",[a("img",{attrs:{src:n(5733),alt:"1723561372755"}})]),s._v(" "),a("p",[a("img",{attrs:{src:n(5734),alt:"1723561417135"}})]),s._v(" "),a("p",[s._v("Raid级别就是对这些硬盘的管理方式")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5735),alt:"1723561772252"}})]),s._v(" "),a("p",[s._v("参考：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/703033834",target:"_blank",rel:"noopener noreferrer"}},[s._v("RAID知识梳理（几组动图简单了解下即可） - 知乎 (zhihu.com)"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.modb.pro/db/23743",target:"_blank",rel:"noopener noreferrer"}},[s._v("图文+动画：小白也能学会的 RAID 磁盘冗余阵列教程！ - 墨天轮 (modb.pro)"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("物理机：")]),s._v(" "),a("ul",[a("li",[s._v("机架式服务器")]),s._v(" "),a("li",[s._v("塔式服务器")]),s._v(" "),a("li",[s._v("刀片式服务器")]),s._v(" "),a("li",[s._v("机柜: 存放服务器")]),s._v(" "),a("li",[s._v("机房: 存放机柜")])]),s._v(" "),a("p",[s._v("服务器尺寸：")]),s._v(" "),a("ul",[a("li",[s._v("19英寸机柜")]),s._v(" "),a("li",[s._v("每个服务器高度单位是U ,1U表示4.45cm,常用2U,1U,4U，更多U数的服务器一般小型机，大型机")])]),s._v(" "),a("p",[s._v("路数：")]),s._v(" "),a("ul",[a("li",[s._v("2路表示 这个服务器有2颗CPU")])]),s._v(" "),a("p",[s._v("新的服务器服务器：")]),s._v(" "),a("ul",[a("li",[s._v("拆包装")]),s._v(" "),a("li",[s._v("插电,联网")]),s._v(" "),a("li",[s._v("开机")]),s._v(" "),a("li",[s._v("配置远程控制卡")]),s._v(" "),a("li",[s._v("配置raid(raid卡实现) 系统raid 1 剩余raid 5")]),s._v(" "),a("li",[s._v("安装系统(U盘安装) 如果大量服务器装机,可以通过cobbler批量装机")]),s._v(" "),a("li",[s._v("正常安装系统即可")]),s._v(" "),a("li",[s._v("根据要求部署服务")]),s._v(" "),a("li",[s._v("关闭")]),s._v(" "),a("li",[s._v("物理服务器上架.(物理服务器放在机柜上过程)")])]),s._v(" "),a("p",[s._v("配置远程控制卡")]),s._v(" "),a("ul",[a("li",[s._v("物理机故障,远程连接失败")]),s._v(" "),a("li",[s._v("Dell iDrac")]),s._v(" "),a("li",[s._v("ibm imm")]),s._v(" "),a("li",[s._v("hp ilo")]),s._v(" "),a("li",[s._v("华为 iBMC")])]),s._v(" "),a("h3",{attrs:{id:"_2-磁盘管理中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-磁盘管理中"}},[s._v("#")]),s._v(" 2，磁盘管理中")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("MBR: 每一块硬盘上存放磁盘引导程序，引导程序在磁盘开头部分，用于引导系统启动。我们一般不用太关注，我们安装系统的时候自动安装。\n\n位置:磁盘分区表 磁盘的开始部分:0磁头,0磁道,1扇区"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("字节"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n这512字节存放了\n    引导程序446字节"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MBR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    磁盘分区表"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("字节"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("个分区表\n    结束标记 55AA，2字节\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:n(5736),alt:"1723605921525"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("分区表64字节,每个分区占用16字节,最多只有4个分区,\n\t这4个分区叫做主分区。\n\t\t如果只划分1分区使用所有空间，将无法继续划分分区。\n\t\t如果划分了4个分区，但是磁盘空间还有剩余，剩余空间将无法继续使用。\n扩展分区是用于解决主分区数量主分区只能有4个问题,扩展分区无法直接使用,需要在扩展分区下面创建逻辑分区,存放数据.\n逻辑分区在扩展分区中,用于存放数据\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("主分区-扩展分区-逻辑分区关系:")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5737),alt:"1723606086010"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("小结:\n\t这些分区概念，分区使用MBR形式，主分区+扩展分区最多4个（扩展分区只能1个），扩展分区用于创建逻辑分区。\n\t未来使用基本就是创建主分区就够了，安装系统的时候自动创建主分区，创建扩展分区，创建逻辑分区即可。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("磁盘文件或分区文件放在/dev/下面，命名方式如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#磁盘接口:")]),s._v("\n   sas/sata/scsi接口的硬盘，硬盘名字是以sd开头\n   虚拟机（kvm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/公有云:     硬盘名字是以vd开头\n   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#第几块硬盘：通过字母表示从字母a开始一次类推。")]),s._v("\n/dev/sda\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#第1块硬盘(SAS)接口")]),s._v("\n/dev/sda\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("分区命名:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("分区命名是根据分区类型进行命名的。\n如果是主分区或者扩展分区则分区号从1-4范围。\n如果是逻辑分区，逻辑分区的分区号从5开始。\n\n案例01 硬盘及分区命名\n第2块SATA硬盘的第1个主分区   /dev/sdb1      \n第3块SAS硬盘的第2个逻辑分区   /dev/sdc6\n第5块公有云的云盘的第3个主分区 /dev/vde3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("一块硬盘,磁盘分区三部曲")]),s._v(" "),a("ul",[a("li",[s._v("打隔断：分区操作")]),s._v(" "),a("li",[s._v("装修,格式化：创建文件系统")]),s._v(" "),a("li",[s._v("安装门窗：挂载(命令,配置文件)")])]),s._v(" "),a("p",[s._v("提示：挂载:给设备设置个入口,如果不挂载,这个设备无法访问,类似于没有门窗的监狱")]),s._v(" "),a("p",[s._v("环境准备，添加2块硬盘，2个1g硬盘即可：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5738),alt:"1723606374552"}})]),s._v(" "),a("p",[s._v("重启系统，查看：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5739),alt:"1723607130314"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#fdisk -l | grep 'dev/sd'")]),s._v("\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53687091200")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857600")]),s._v(" sectors\n/dev/sda1  *       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099199")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\n/dev/sda2       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857599")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102758400")]),s._v("  49G 8e Linux LVM\nDisk /dev/sdb: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\nDisk /dev/sdc: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("创建20MB的分区:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1 操作硬盘")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" /dev/sdb\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2. 对硬盘分区进行增删改查")]),s._v("\np print 输出磁盘分区信息\nn new   创建分区\nd delete 删除分区\nw "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" 保存并退出\nq quit 退出不保存\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3. 创建20MB分区")]),s._v("\n命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("输入 m 获取帮助"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建分区")]),s._v("\nPartition type:        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#提示选择 类型")]),s._v("\n   p   primary "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" primary, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" extended, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   e   extended\nSelect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 回车即可  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#输入p或回车默认使用主分区")]),s._v("\nUsing default response p\n分区号 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-4，默认 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：回车即可  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分区号回车使用默认的1号")]),s._v("\n起始 扇区 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-208895，默认为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：回车即可 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#回车,使用默认的起点")]),s._v("\n将使用默认值 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("\nLast 扇区, +扇区 or +size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("K,M,G"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-208895，默认为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("208895")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：+20M      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+20M分区20MB    ")]),s._v("\n分区 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 已设置为 Linux 类型，大小设为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" MiB\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4. 通过p查看")]),s._v("\n命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("输入 m 获取帮助"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：p\n磁盘 /dev/sdb：1073 MB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" 字节，2097152 个扇区\nUnits "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 扇区 of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n扇区大小"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("逻辑/物理"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：512 字节 / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" 字节\nI/O 大小"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("最小/最佳"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：512 字节 / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" 字节\n\n磁盘标签类型：dos\n磁盘标识符：0x2af54b05\n   设备 Boot     Start         End     Blocks   Id System\n/dev/sdb1            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43007")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20480")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这里有sdb1即可。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5. 通过w保存退出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6. 查看/dev/sdb*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#fdisk -l | grep 'dev/sd'")]),s._v("\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53687091200")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857600")]),s._v(" sectors\n/dev/sda1  *       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099199")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\n/dev/sda2       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857599")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102758400")]),s._v("  49G 8e Linux LVM\nDisk /dev/sdb: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n/dev/sdb1        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43007")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40960")]),s._v("  20M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\nDisk /dev/sdc: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br")])]),a("p",[s._v("温馨提示：fdisk操作的时候，按删除键会出现无法删除现象,使用 ctrl+u 或 ctrl+删除键 即可删除")]),s._v(" "),a("p",[s._v("创建一个分区使用硬盘所有容量：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("输入 m 获取帮助"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：n\nPartition type:\n   p   primary "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" primary, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" extended, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   e   extended\nSelect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\nUsing default response p\n分区号 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-4，默认 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：\n起始 扇区 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-208895，默认为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：\n将使用默认值 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("\nLast 扇区, +扇区 or +size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("K,M,G"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-208895，默认为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("208895")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：\n将使用默认值 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("208895")]),s._v("\n分区 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 已设置为 Linux 类型，大小设为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" MiB\n命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("输入 m 获取帮助"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：w\nThe partition table has been altered"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nCalling ioctl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to re-read partition table\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#fdisk /dev/sdb")]),s._v("\n\nWelcome to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("util-linux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.35")]),s._v(".2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nChanges will remain "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" memory only, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" you decide to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" them.\nBe careful before using the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" command.\n\n\nCommand "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": n\nPartition "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("\n   p   primary "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" primary, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" extended, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   e   extended "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("container "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" logical partitions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSelect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": p\nPartition number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("-4, default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nFirst sector "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43008")]),s._v("-2097151, default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43008")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nLast sector, +/-sectors or +/-size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("K,M,G,T,P"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43008")]),s._v("-2097151, default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097151")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \n\nCreated a new partition "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" of "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Linux'")]),s._v(" and of size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1003")]),s._v(" MiB.\n\nCommand "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": w\nThe partition table has been altered.\nCalling ioctl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to re-read partition table.\nSyncing disks.\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#fdisk -l | grep 'dev/sd'")]),s._v("\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53687091200")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857600")]),s._v(" sectors\n/dev/sda1  *       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099199")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\n/dev/sda2       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857599")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102758400")]),s._v("  49G 8e Linux LVM\nDisk /dev/sdb: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n/dev/sdb1        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43007")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40960")]),s._v("   20M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\n/dev/sdb2       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43008")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097151")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2054144")]),s._v(" 1003M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\nDisk /dev/sdc: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br")])]),a("p",[s._v("创建 make 文件系统 filesystem,表示给磁盘分区进行装修，给磁盘分区创建规则，一定量的inode，block。mkfs（make filesystem) 创建文件系统(格式化)")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkfs")]),s._v(" 磁盘或分区\nmkfs.xfs /dev/sdb1\n\nxfs是文件系统类型，CentOS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("默认的文件系统类型。\nmkfs.ext4 文件系统类型，用于CentOS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".x 或公有云使用。\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#fdisk -l | grep 'dev/sd'")]),s._v("\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53687091200")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857600")]),s._v(" sectors\n/dev/sda1  *       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099199")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\n/dev/sda2       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2099200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857599")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102758400")]),s._v("  49G 8e Linux LVM\nDisk /dev/sdb: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n/dev/sdb1        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43007")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40960")]),s._v("   20M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\n/dev/sdb2       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43008")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097151")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2054144")]),s._v(" 1003M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\nDisk /dev/sdc: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v(" sectors\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mkfs.xfs /dev/sdb1")]),s._v("\nmeta-data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/sdb1              "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("agcount")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("agsize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5120")]),s._v(" blks\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sectsz")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("attr")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("projid32bit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("crc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("finobt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sparse")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rmapbt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("reflink")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ndata     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bsize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("blocks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5120")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("imaxpct")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sunit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("swidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" blks\nnaming   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bsize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("   ascii-ci"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ftype")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nlog      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("internal log           "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bsize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("blocks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1368")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sectsz")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sunit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" blks, lazy-count"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nrealtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none                   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("extsz")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("blocks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rtextents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("重复格式化错误提示：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mkfs.xfs /dev/sdb1")]),s._v("\nmkfs.xfs: /dev/sdb1 appears to contain an existing filesystem "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nmkfs.xfs: Use the "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" option to force overwrite.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后要使用这个分区，就需要挂载了，Linux中的设备，需要通过挂载命令，给设备指定入口（已经存在的空目录）,否则将无法使用，通过mount命令指定 设备 ，指定 入口(目录) mount 设备 目录。入口: 挂载点,一般是个空目录就行. /mnt linux临时挂载点：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mount /dev/sdb1 /mnt/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#df -h")]),s._v("\nFilesystem             Size  Used Avail Use% Mounted on\ndevtmpfs               459M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  459M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs                  475M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  475M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs                  475M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".9M  468M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("% /run\ntmpfs                  475M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  475M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/mapper/klas-root   47G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".8G   44G   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("% /\ntmpfs                  475M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  475M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /tmp\n/dev/sda1             1014M  169M  846M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("% /boot\ntmpfs                   95M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   95M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /run/user/0\n/dev/sdb1               15M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2M   14M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("% /mnt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#df -h | grep mnt")]),s._v("\n/dev/sdb1               15M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2M   14M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("% /mnt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("挂载光盘到/media目录：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/cdrom /media/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("卸载：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v(" /mnt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v(" + 挂载点，表示卸载。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("目前挂载整个流程：")]),s._v(" "),a("ol",[a("li",[s._v("磁盘分区")]),s._v(" "),a("li",[s._v("磁盘格式化")]),s._v(" "),a("li",[s._v("磁盘挂载")])]),s._v(" "),a("p",[s._v("我们在Linux下面的操作一般都分为临时和永久，对于挂载来说，我们希望永久生效（临时+永久)。实现永久挂载的方案：")]),s._v(" "),a("ul",[a("li",[s._v("使用rc.local ,把挂载命令 mount  /dev/sdb1  /data/ 写入到 /etc/rc.local, 注意命令最好写为绝对路径")]),s._v(" "),a("li",[s._v("专业的开机自动挂载的配置文件/etc/fstab ,根据配置文件的要求把mount命令改为配置文件形式即可")])]),s._v(" "),a("p",[s._v("/etc/fstab每一列含义:")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5740),alt:"1723608406319"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cat /etc/fstab")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/fstab")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Created by anaconda on Mon Jul 29 12:43:41 2024")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Accessible filesystems, by reference, are maintained under '/dev/disk/'.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# After editing this file, run 'systemctl daemon-reload' to update systemd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# units generated from this file.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n/dev/mapper/klas-root   /                       xfs     defaults        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UUID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("59aefa4c-9fb8-43ad-8a62-2fdb73cb04ab /boot                   xfs     defaults        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n/dev/mapper/klas-swap   none                    swap    defaults        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/etc/fstab配置中的样子")]),s._v("\n/dev/sdb1   /data/   xfs   defaults   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让/etc/fstab执行一遍，如果挂载了不提示，如果没有挂载则自动挂载")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[a("img",{attrs:{src:n(5741),alt:"1723608626087"}})]),s._v(" "),a("p",[s._v("企业中磁盘使用方式:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".插入磁盘\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".格式化磁盘  mkfs.xfs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /dev/sdb\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".挂载磁盘  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/sdb /data\n\t\t   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".写入开机自动挂载 笔试题 列出每列的含义\t   \t   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_3-磁盘管理下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-磁盘管理下"}},[s._v("#")]),s._v(" 3，磁盘管理下")]),s._v(" "),a("p",[a("img",{attrs:{src:n(5742),alt:"1723609642203"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#案例04 创建gpt格式的分区大小10MB (/dev/sdc)")]),s._v("\n查看硬盘分区信息\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" /dev/sdb print\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编辑/dev/sdc ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" /dev/sdc\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建分区表gpt")]),s._v("\nmktable gpt 或者mklabel gpt 一样   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注意mbr叫做msdos类型 mktable msdos")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建分区10mb")]),s._v("\nmkpart primary  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nmkpart primary  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除分区")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#退出编辑")]),s._v("\nq 或quit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#parted /dev/sdc")]),s._v("\nGNU Parted "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),s._v("\nUsing /dev/sdc\nWelcome to GNU Parted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Type "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'help'")]),s._v(" to view a list of commands.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("                                                             \n  align-check TYPE N                       check partition N "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" alignment\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COMMAND"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                           print general help, or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" on COMMAND\n  mklabel,mktable LABEL-TYPE               create a new disklabel "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("partition table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  mkpart PART-TYPE "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("FS-TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" START END     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" a partition\n  name NUMBER NAME                         name partition NUMBER as NAME\n  print "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("devices"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("list,all"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("NUMBER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("     display the partition table, available devices, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" space, all found\n        partitions, or a particular partition\n  quit                                     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" program\n  rescue START END                         rescue a lost partition near START and END\n  resizepart NUMBER END                    resize partition NUMBER\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" NUMBER                                delete partition NUMBER\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" DEVICE                            choose the device to edit\n  disk_set FLAG STATE                      change the FLAG on selected device\n  disk_toggle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("FLAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                       toggle the state of FLAG on selected device\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" NUMBER FLAG STATE                    change the FLAG on partition NUMBER\n  toggle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("NUMBER "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("FLAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                   toggle the state of FLAG on partition NUMBER\n  unit UNIT                                "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" the default unit to UNIT\n  version                                  display the version number and copyright information of GNU Parted\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" mklabel                                                          \nNew disk label type? gpt                                                  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" mkpart                                                           \nPartition name?  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? primary\nFile system type?  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ext2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? xfs                                            \nStart? "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                                  \nEnd? 20M\nWarning: The resulting partition is not properly aligned "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" best performance: 34s % 2048s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" 0s\nIgnore/Cancel? I                                                          \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" print\nModel: VMware, VMware Virtual S "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scsi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisk /dev/sdc: 1074MB\nSector size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name     Flags\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(".4kB  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(".0MB  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(".0MB  xfs          primary\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    \n\n格式化: mkfs.xfs /dev/sdc1\n挂载: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/sdc1 /mnt\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n开机自动挂载:\n\t/dev/sdc1 /data xfs defaults "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br")])]),a("p",[s._v("内存不够用到执行系统出现oom内存溢出，Linux系统如果内存跑满了，系统为了自保,会自动杀死占用内存\n最高的进程。导致业务故障。什么情况下导致内存不够？")]),s._v(" "),a("ul",[a("li",[s._v("业务流量过高 增加内存")]),s._v(" "),a("li",[s._v("代码问题java 找开发解决")]),s._v(" "),a("li",[s._v("流量波动业务 增加swap解决 内部测试服务器")]),s._v(" "),a("li",[s._v("受攻击导致oom 防火墙软件")])]),s._v(" "),a("p",[s._v("swap: 内存不够用时，swap临时充当内存使用。swap是磁盘的分区空间。 磁盘比内存慢。所以未来应用建议:如果内存充足并且服务对性能要求较高,可以关闭swap。案例：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("增加1g的swap.\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".创建指定大小的文件1g的文件.\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".把文件转换为swap.\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".激活这个swap,把它加入到linux中.\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".记得配置永久挂载.\n\n操作过程：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".创建指定大小的文件1g的文件.\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/zero "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/1g  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" input "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" 数据从哪里来,输入文件,一般使用/dev/zero,不断输出空字符.\n    of "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ouput "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" 创建的文件,存放数据,输出文件\n    bs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" block size 每次读取多少,一般1MB大小.\n    count "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 读取次数\n    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".把文件转换为swap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("格式化"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkswap")]),s._v(" /tmp/1g\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /tmp/1g\n\t/tmp/1g: data           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#刚刚创建的文件data普通数据文件")]),s._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkswap")]),s._v(" /tmp/1g（格式化）\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /tmp/1g\n\t/tmp/1g: Linux/i386 swap "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("new style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("4K pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255999")]),s._v(" pages, no label,UUID"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0c072a5f-5ec2-4590-acd3-cae1e1926029\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".激活这个swap,把它加入到linux中\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# free -h")]),s._v("\n             total       used       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("     shared buff/cache   available\nMem:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".9G       201M       596M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".6M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2G        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".6G\nSwap:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".0G         0B        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".0G\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" /tmp/1g\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("swapon")]),s._v(" /tmp/1g\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n             total       used       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("     shared buff/cache   available\nMem:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".9G       202M       595M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".6M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2G        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".6G\nSwap:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".0G         0B        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".0G\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".记得配置永久挂载.\n方法01 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("swapon")]),s._v(" /tmp/1g写入到rc.local \n方法02: 写入/etc/fstab\n/tmp/1g       swap     swap   defaults        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br")])]),a("p",[s._v("磁盘满导致无法写入内容:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("inode满的原因？大量的小文件\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看inode")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#df -i")]),s._v("\nFilesystem              Inodes  IUsed    IFree IUse% Mounted on\ndevtmpfs                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("117316")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("497")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("116819")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121363")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev/shm\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("741")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120623")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121347")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /sys/fs/cgroup\n/dev/mapper/klas-root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24619008")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("223761")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24395247")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121352")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /tmp\n/dev/sda1               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("524288")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("340")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("523948")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /boot\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121358")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/0\n/dev/sdb1                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10237")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /mnt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd malu/")]),s._v("\n-bash: cd: malu/: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mkdir malu")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd malu/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#touch {1..100000}.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#df -i")]),s._v("\nFilesystem              Inodes  IUsed    IFree IUse% Mounted on\ndevtmpfs                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("117316")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("497")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("116819")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121363")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev/shm\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("741")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120623")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121347")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /sys/fs/cgroup\n/dev/mapper/klas-root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24619008")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("323762")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24295246")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("% /\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121352")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /tmp\n/dev/sda1               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("524288")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("340")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("523948")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /boot\ntmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121364")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("121358")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/0\n/dev/sdb1                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10237")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /mnt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#find / -type d -size +1M")]),s._v("\n/root/malu\n/root/malu/malu\n\nblock满 磁盘存储大小\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#find / -size +200M")]),s._v("\n/proc/kcore\nfind: ‘/proc/1678/task/1678/fd/5’: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\nfind: ‘/proc/1678/task/1678/fdinfo/5’: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\nfind: ‘/proc/1678/fd/6’: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\nfind: ‘/proc/1678/fdinfo/6’: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n/usr/lib/locale/locale-archive\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("du")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sh")]),s._v(" 查看整个目录大小\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#du -sh /data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\t/data\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#du -sh /etc/")]),s._v("\n25M\t/etc/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux:malu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n解决磁盘不够用得问题,需求: 第一块磁盘满,并且日志文件的位置不能发生变化导致原因: 服务持续的追加内容到/var/log/test.log\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("增加一块磁盘\n    第一步: 添加一块磁盘\n    \t右键添加1T磁盘\n    第二步: 格式化磁盘\n        mkfs.xfs /dev/sdb\n    第三步: 挂载磁盘\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/sdb /data\n    第四步: 开机自动启动\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/fstab\n        /dev/sdb /data xfs defaults "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("将/var/log/test.log 移动到/data/\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /var/log/test.log /data\n    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("做软链接\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /data/test.log /var/log/test.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br")])]),a("p",[a("img",{attrs:{src:n(5743),alt:"1723613038183"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("案例.删除大文件，磁盘空间不释放\n\t真正的删除: inode和block同时为0 并且没有被进程占用。\n\t\n第一步: 生成10G的文件\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/zero of=10g.txt bs=1M count=10000")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -h")]),s._v("\n    total "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".8G\n    -rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".8G Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":37 10g.txt\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df -h")]),s._v("\n    Filesystem Size Used Avail Use% Mounted on\n    devtmpfs 963M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 963M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\n    tmpfs 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\n    tmpfs 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".9M 970M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\n    tmpfs 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup/dev/mapper/klas-root 47G 15G 33G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("% /\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 占用15G")]),s._v("\n第二步: 模拟进程占用\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tail 10g.txt")]),s._v("\n第三步: 删除10g的文件 到第二个窗口\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -f 10g.txt")]),s._v("\n第四步: 查看磁盘空间是否释放\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df -h")]),s._v("\n    Filesystem Size Used Avail Use% Mounted on\n    devtmpfs 963M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 963M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\n    tmpfs 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\n    tmpfs 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".9M 970M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\n    tmpfs 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 979M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup/dev/mapper/klas-root 47G 15G 33G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("% /\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未释放")]),s._v("\n解决方法: 面试题 查看文件被哪个进程所占用 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lsof |grep 10g.txt")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1991")]),s._v(" root\n    3r REG "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253,0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10485760000")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("68979254")]),s._v(" /root/10g.txt "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("deleted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n查找到后杀死进程：\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -9 1991")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@malu:~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df -h")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br")])]),a("p",[s._v("总结：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("inode "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" d "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-size")]),s._v(" +1M\nblock "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" f "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-size")]),s._v(" +200M\n\n内存不够用临时使用swap充当内存\n\tswap大小是内存的1-1.5倍，如果大于8G内存 swap只给8G即可。\n\tswap: 不对外的，对内的使用swap\n\n删除大文件磁盘空间不释放\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" 查看被哪个进程所占用，找到后kill杀死\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"_4-磁盘案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-磁盘案例"}},[s._v("#")]),s._v(" 4，磁盘案例")]),s._v(" "),a("p",[s._v("案例1：企业中程序导致内存不够用")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("如果内存满则系统会自动杀死占用内存最高的进程，来保护系统正常运行\n什么原因导致内存满\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、大量的用户访问我们的服务器（正常情况）需要我们添加内存\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、由于程序导致内存满，而不是大量用户访问导致（找开发解决问题）\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、由于网络的波动导致内存满，需要使用swap解决\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、学习中，可能需要swap临时充当内存使用\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、公司内部业务（测试服务器），需要使用swap临时解决\n \nswap作用：当内存不够用时，磁盘分区临时充当内存使用\n查看swap分区，使用free "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#free -h")]),s._v("\n              total        used        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("      shared  buff/cache   available\nMem:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".9G        218M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".6G        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".5M        108M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".6G\nSwap:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0G          0B        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0G\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n \n创建swap分区：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、安装系统划分的分区\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、可以安装系统后创建\n第一步：生成一个200M的空间，把200M的空间当作swap空间\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/zero "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/200m "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#dd if=/dev/zero of=/tmp/200m bs=1M count=200")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("+0 records "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("+0 records out\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("209715200")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("210")]),s._v(" MB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" copied, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.13911")]),s._v(" s, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("184")]),s._v(" MB/s\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n \n第二步：格式化为swap分区格式\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkswap")]),s._v(" /tmp/200m\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mkswap /tmp/200m")]),s._v("\nSetting up swapspace version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("204796")]),s._v(" KiB\nno label, "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UUID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("9429e531-a4c5-4e34-b238-57a1efcfc2c2\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n \n第三步：挂载使用swapon /tmp/200m回车\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#swapon /tmp/200m")]),s._v("\nswapon: /tmp/200m: insecure permissions 0644, 0600 suggested.\n第四步：free "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#free -h")]),s._v("\n              total        used        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("      shared  buff/cache   available\nMem:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".9G        265M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0G        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".5M        678M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".5G\nSwap:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2G          0B        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2G\n \n查看swap分区的组成\nswspon "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#swapon -s")]),s._v("\nFilename                Type       Size    Used    Priority\n/dev/sda2                                  partition  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048572")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-2")]),s._v("\n/tmp/200m                                  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("204796")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-3")]),s._v("\n \n重启会掉，需要开机自动挂载\n卸载swap\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#swapoff /tmp/200m")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#free -h")]),s._v("\n              total        used        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("      shared  buff/cache   available\nMem:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".9G        265M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0G        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".5M        678M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".5G\nSwap:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0G          0B        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0G\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("p",[s._v("案例2：磁盘不够用找出大文件备份或删除。找出系统中的大文件移动或删除")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#du -h /var/log/*|awk '$1~ /^.*G/'|xargs -i mv {} /data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#find / -type f -size +1G|xargs rm")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("案例3：找出系统中小文件多的目录备份或删除")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" 查看inode使用信息\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#df -i")]),s._v("\nFilesystem       Inodes IUsed    IFree IUse% Mounted on\ndevtmpfs         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("250790")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("410")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("250380")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev\ntmpfs            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253483")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253482")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev/shm\ntmpfs            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253483")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("738")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("252745")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\ntmpfs            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253483")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253467")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /sys/fs/cgroup\n/dev/sda3       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9858560")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60425")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9798135")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /\n/dev/sda1        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102400")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("326")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102074")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /boot\ntmpfs            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253483")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253482")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/0\n/dev/sdb1         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51200")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51197")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /mnt\n/dev/sdc1      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48828096")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48828093")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /data\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#find /-type d -size +70k")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("案例4：磁盘使用软连接解决磁盘不够用")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、添加磁盘\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、格式化\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、挂载  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/sdc /data\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、将大文件移动到新磁盘（服务日志没有输出，选择业务的低谷期，禁止用户写入内容（DB）锁库锁表）\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VMware-koten ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ln -s /data/10G /var/log/10g ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将/data/10G做软链接到/var/log/10g")]),s._v("\n\n磁盘不够用：\n- 虚拟机可以通过增加磁盘解决\n- 虚拟机可以做LVM逻辑卷管理动态调整磁盘大小，互联网公司不用\n- 云服务器可以动态扩缩容磁盘大小\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("案例5：删除文件后，磁盘空间不释放")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("真正的删除一个文件硬链接和软连接数都为0，且不被进程占用\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、模拟文件被进程调用\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" /data/10G\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、删除文件后磁盘空间不释放\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" 10G\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、查看进程调用lsof\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" 10G\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3407")]),s._v(" root 3r REG "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8,32")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10485760000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("67")]),s._v(" /data/10G "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("deleted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、结束进程或者加载服务\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3407")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看磁盘是否被释放")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports},5730:function(s,a,n){s.exports=n.p+"assets/img/1723561010349.7b6f441c.png"},5731:function(s,a,n){s.exports=n.p+"assets/img/1723561183897.fd310c9d.png"},5732:function(s,a,n){s.exports=n.p+"assets/img/1723561250441.f544ca4d.png"},5733:function(s,a,n){s.exports=n.p+"assets/img/1723561372755.e00ce196.png"},5734:function(s,a,n){s.exports=n.p+"assets/img/1723561417135.d8eb0b1e.png"},5735:function(s,a,n){s.exports=n.p+"assets/img/1723561772252.94eb3c05.png"},5736:function(s,a,n){s.exports=n.p+"assets/img/1723605921525.0cf8c358.png"},5737:function(s,a,n){s.exports=n.p+"assets/img/1723606086010.d40d4d61.png"},5738:function(s,a,n){s.exports=n.p+"assets/img/1723606374552.788e0d49.png"},5739:function(s,a,n){s.exports=n.p+"assets/img/1723607130314.9b7c7c39.png"},5740:function(s,a,n){s.exports=n.p+"assets/img/1723608406319.60589923.png"},5741:function(s,a,n){s.exports=n.p+"assets/img/1723608626087.67db4fcf.png"},5742:function(s,a,n){s.exports=n.p+"assets/img/1723609642203.d271d319.png"},5743:function(s,a,n){s.exports=n.p+"assets/img/1723613038183.ac4237bb.png"}}]);