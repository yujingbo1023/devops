<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>prometheus01 | devops</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/devops/public/favicon.ico">
    <meta name="description" content="快来玩devops">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/devops/public/assets/css/0.styles.4a69f283.css" as="style"><link rel="preload" href="/devops/public/assets/js/app.7d569ec8.js" as="script"><link rel="preload" href="/devops/public/assets/js/118.ceed6ab6.js" as="script"><link rel="preload" href="/devops/public/assets/js/1.774fca24.js" as="script"><link rel="preload" href="/devops/public/assets/js/64.d2520c76.js" as="script"><link rel="prefetch" href="/devops/public/assets/js/10.4b3dc242.js"><link rel="prefetch" href="/devops/public/assets/js/100.7e9737a0.js"><link rel="prefetch" href="/devops/public/assets/js/101.4f407383.js"><link rel="prefetch" href="/devops/public/assets/js/102.88df873d.js"><link rel="prefetch" href="/devops/public/assets/js/103.232cdd53.js"><link rel="prefetch" href="/devops/public/assets/js/104.63edad81.js"><link rel="prefetch" href="/devops/public/assets/js/105.94b75f04.js"><link rel="prefetch" href="/devops/public/assets/js/106.6373983a.js"><link rel="prefetch" href="/devops/public/assets/js/107.67cb9c57.js"><link rel="prefetch" href="/devops/public/assets/js/108.0e591817.js"><link rel="prefetch" href="/devops/public/assets/js/109.441c2844.js"><link rel="prefetch" href="/devops/public/assets/js/11.06fc3f92.js"><link rel="prefetch" href="/devops/public/assets/js/110.39a7ec3f.js"><link rel="prefetch" href="/devops/public/assets/js/111.fded3579.js"><link rel="prefetch" href="/devops/public/assets/js/112.51b1c07d.js"><link rel="prefetch" href="/devops/public/assets/js/113.cbde1400.js"><link rel="prefetch" href="/devops/public/assets/js/114.54c309a6.js"><link rel="prefetch" href="/devops/public/assets/js/115.c26a1569.js"><link rel="prefetch" href="/devops/public/assets/js/116.4255514c.js"><link rel="prefetch" href="/devops/public/assets/js/117.9d1c6533.js"><link rel="prefetch" href="/devops/public/assets/js/119.e3285804.js"><link rel="prefetch" href="/devops/public/assets/js/12.63c3c1f3.js"><link rel="prefetch" href="/devops/public/assets/js/120.cf720ee7.js"><link rel="prefetch" href="/devops/public/assets/js/121.dbfa8623.js"><link rel="prefetch" href="/devops/public/assets/js/122.e7cdec31.js"><link rel="prefetch" href="/devops/public/assets/js/123.09b7084c.js"><link rel="prefetch" href="/devops/public/assets/js/124.de003a1c.js"><link rel="prefetch" href="/devops/public/assets/js/125.a50dcdf1.js"><link rel="prefetch" href="/devops/public/assets/js/126.88d2a88b.js"><link rel="prefetch" href="/devops/public/assets/js/127.fb481961.js"><link rel="prefetch" href="/devops/public/assets/js/128.f9790158.js"><link rel="prefetch" href="/devops/public/assets/js/129.ca6d8d1e.js"><link rel="prefetch" href="/devops/public/assets/js/13.ae18e270.js"><link rel="prefetch" href="/devops/public/assets/js/130.d4397eb5.js"><link rel="prefetch" href="/devops/public/assets/js/131.8a8751be.js"><link rel="prefetch" href="/devops/public/assets/js/132.e98fc40e.js"><link rel="prefetch" href="/devops/public/assets/js/133.46139fda.js"><link rel="prefetch" href="/devops/public/assets/js/134.76167714.js"><link rel="prefetch" href="/devops/public/assets/js/135.5adcd3ae.js"><link rel="prefetch" href="/devops/public/assets/js/136.31fabd54.js"><link rel="prefetch" href="/devops/public/assets/js/137.770dcb44.js"><link rel="prefetch" href="/devops/public/assets/js/138.d4d75a71.js"><link rel="prefetch" href="/devops/public/assets/js/139.9b2c0400.js"><link rel="prefetch" href="/devops/public/assets/js/14.846ec1ae.js"><link rel="prefetch" href="/devops/public/assets/js/140.ba28df97.js"><link rel="prefetch" href="/devops/public/assets/js/141.c592e630.js"><link rel="prefetch" href="/devops/public/assets/js/142.1dcaafb9.js"><link rel="prefetch" href="/devops/public/assets/js/143.1f4482aa.js"><link rel="prefetch" href="/devops/public/assets/js/144.8079a63b.js"><link rel="prefetch" href="/devops/public/assets/js/145.ccd6ab9a.js"><link rel="prefetch" href="/devops/public/assets/js/146.8fea1826.js"><link rel="prefetch" href="/devops/public/assets/js/147.0cc3f908.js"><link rel="prefetch" href="/devops/public/assets/js/148.bd25ee49.js"><link rel="prefetch" href="/devops/public/assets/js/149.abbd5278.js"><link rel="prefetch" href="/devops/public/assets/js/15.4d3a65ab.js"><link rel="prefetch" href="/devops/public/assets/js/150.f8e586e7.js"><link rel="prefetch" href="/devops/public/assets/js/151.eb4608fb.js"><link rel="prefetch" href="/devops/public/assets/js/152.6fe48680.js"><link rel="prefetch" href="/devops/public/assets/js/153.fb81e647.js"><link rel="prefetch" href="/devops/public/assets/js/154.1dd41cd6.js"><link rel="prefetch" href="/devops/public/assets/js/155.7386b9d0.js"><link rel="prefetch" href="/devops/public/assets/js/156.905e683b.js"><link rel="prefetch" href="/devops/public/assets/js/157.9e6bcc59.js"><link rel="prefetch" href="/devops/public/assets/js/158.36be0417.js"><link rel="prefetch" href="/devops/public/assets/js/159.631e0344.js"><link rel="prefetch" href="/devops/public/assets/js/16.a8b5e9a2.js"><link rel="prefetch" href="/devops/public/assets/js/160.fda7f4b2.js"><link rel="prefetch" href="/devops/public/assets/js/161.b3c13652.js"><link rel="prefetch" href="/devops/public/assets/js/162.d7fe03d5.js"><link rel="prefetch" href="/devops/public/assets/js/163.09534a90.js"><link rel="prefetch" href="/devops/public/assets/js/164.7d75373f.js"><link rel="prefetch" href="/devops/public/assets/js/165.23f70364.js"><link rel="prefetch" href="/devops/public/assets/js/166.3d1cde51.js"><link rel="prefetch" href="/devops/public/assets/js/167.0dca6275.js"><link rel="prefetch" href="/devops/public/assets/js/168.71a8b2fd.js"><link rel="prefetch" href="/devops/public/assets/js/169.ee61c785.js"><link rel="prefetch" href="/devops/public/assets/js/17.0be8e72a.js"><link rel="prefetch" href="/devops/public/assets/js/170.fb4e3bc0.js"><link rel="prefetch" href="/devops/public/assets/js/171.4abe3ecb.js"><link rel="prefetch" href="/devops/public/assets/js/172.4104fd87.js"><link rel="prefetch" href="/devops/public/assets/js/173.355a3afc.js"><link rel="prefetch" href="/devops/public/assets/js/174.6b396fee.js"><link rel="prefetch" href="/devops/public/assets/js/175.a907bc60.js"><link rel="prefetch" href="/devops/public/assets/js/176.1b2086ee.js"><link rel="prefetch" href="/devops/public/assets/js/177.9fa24bdc.js"><link rel="prefetch" href="/devops/public/assets/js/178.5f5e1279.js"><link rel="prefetch" href="/devops/public/assets/js/179.ec4875a4.js"><link rel="prefetch" href="/devops/public/assets/js/18.b1b29ad5.js"><link rel="prefetch" href="/devops/public/assets/js/180.e6976024.js"><link rel="prefetch" href="/devops/public/assets/js/181.32906757.js"><link rel="prefetch" href="/devops/public/assets/js/182.09691c46.js"><link rel="prefetch" href="/devops/public/assets/js/183.00199713.js"><link rel="prefetch" href="/devops/public/assets/js/184.e0c72fe0.js"><link rel="prefetch" href="/devops/public/assets/js/185.67b6b9d4.js"><link rel="prefetch" href="/devops/public/assets/js/186.7045b54c.js"><link rel="prefetch" href="/devops/public/assets/js/187.4649fa5f.js"><link rel="prefetch" href="/devops/public/assets/js/188.796ce41e.js"><link rel="prefetch" href="/devops/public/assets/js/189.809ffb5e.js"><link rel="prefetch" href="/devops/public/assets/js/19.39c3a2ff.js"><link rel="prefetch" href="/devops/public/assets/js/190.83e3881c.js"><link rel="prefetch" href="/devops/public/assets/js/191.6b715782.js"><link rel="prefetch" href="/devops/public/assets/js/192.cf6a4017.js"><link rel="prefetch" href="/devops/public/assets/js/193.f98ae362.js"><link rel="prefetch" href="/devops/public/assets/js/194.5246dc3c.js"><link rel="prefetch" href="/devops/public/assets/js/195.428e9bf0.js"><link rel="prefetch" href="/devops/public/assets/js/196.d076a50c.js"><link rel="prefetch" href="/devops/public/assets/js/197.55c2ac67.js"><link rel="prefetch" href="/devops/public/assets/js/198.ed0cde4d.js"><link rel="prefetch" href="/devops/public/assets/js/199.dd2dc49f.js"><link rel="prefetch" href="/devops/public/assets/js/20.59cbe9ee.js"><link rel="prefetch" href="/devops/public/assets/js/200.afa56a7b.js"><link rel="prefetch" href="/devops/public/assets/js/201.44c3622b.js"><link rel="prefetch" href="/devops/public/assets/js/202.2c42452a.js"><link rel="prefetch" href="/devops/public/assets/js/203.8299dd5d.js"><link rel="prefetch" href="/devops/public/assets/js/204.de069d66.js"><link rel="prefetch" href="/devops/public/assets/js/205.5ab0783c.js"><link rel="prefetch" href="/devops/public/assets/js/206.74754152.js"><link rel="prefetch" href="/devops/public/assets/js/207.41f0d4bf.js"><link rel="prefetch" href="/devops/public/assets/js/208.0483952b.js"><link rel="prefetch" href="/devops/public/assets/js/209.1aca4a3b.js"><link rel="prefetch" href="/devops/public/assets/js/21.23a83f02.js"><link rel="prefetch" href="/devops/public/assets/js/210.d0341dbd.js"><link rel="prefetch" href="/devops/public/assets/js/211.72dd5390.js"><link rel="prefetch" href="/devops/public/assets/js/212.e59e466c.js"><link rel="prefetch" href="/devops/public/assets/js/213.1373aac1.js"><link rel="prefetch" href="/devops/public/assets/js/214.d307ec31.js"><link rel="prefetch" href="/devops/public/assets/js/215.4a0a213e.js"><link rel="prefetch" href="/devops/public/assets/js/216.81ad789b.js"><link rel="prefetch" href="/devops/public/assets/js/217.33796242.js"><link rel="prefetch" href="/devops/public/assets/js/218.23843efb.js"><link rel="prefetch" href="/devops/public/assets/js/219.623b1168.js"><link rel="prefetch" href="/devops/public/assets/js/22.58c6461b.js"><link rel="prefetch" href="/devops/public/assets/js/220.381ab176.js"><link rel="prefetch" href="/devops/public/assets/js/221.deb3d1a8.js"><link rel="prefetch" href="/devops/public/assets/js/222.96ec6a5e.js"><link rel="prefetch" href="/devops/public/assets/js/223.7954bc0b.js"><link rel="prefetch" href="/devops/public/assets/js/224.16208c8d.js"><link rel="prefetch" href="/devops/public/assets/js/225.b805f0e3.js"><link rel="prefetch" href="/devops/public/assets/js/226.d2669939.js"><link rel="prefetch" href="/devops/public/assets/js/227.e72b90c5.js"><link rel="prefetch" href="/devops/public/assets/js/228.d072128c.js"><link rel="prefetch" href="/devops/public/assets/js/229.69495a9e.js"><link rel="prefetch" href="/devops/public/assets/js/23.59f9044f.js"><link rel="prefetch" href="/devops/public/assets/js/230.9c66543d.js"><link rel="prefetch" href="/devops/public/assets/js/231.7ab60f29.js"><link rel="prefetch" href="/devops/public/assets/js/232.fc6e5785.js"><link rel="prefetch" href="/devops/public/assets/js/233.0a0d2736.js"><link rel="prefetch" href="/devops/public/assets/js/234.a49950b6.js"><link rel="prefetch" href="/devops/public/assets/js/235.71140234.js"><link rel="prefetch" href="/devops/public/assets/js/236.6b828578.js"><link rel="prefetch" href="/devops/public/assets/js/237.9549e649.js"><link rel="prefetch" href="/devops/public/assets/js/238.1657f6b5.js"><link rel="prefetch" href="/devops/public/assets/js/239.289ab239.js"><link rel="prefetch" href="/devops/public/assets/js/24.be9ada1f.js"><link rel="prefetch" href="/devops/public/assets/js/240.fc170ba3.js"><link rel="prefetch" href="/devops/public/assets/js/241.43426c9a.js"><link rel="prefetch" href="/devops/public/assets/js/242.8afb0c9d.js"><link rel="prefetch" href="/devops/public/assets/js/243.2fdaef18.js"><link rel="prefetch" href="/devops/public/assets/js/244.2d9089b1.js"><link rel="prefetch" href="/devops/public/assets/js/245.6b4f42e0.js"><link rel="prefetch" href="/devops/public/assets/js/246.9d904f58.js"><link rel="prefetch" href="/devops/public/assets/js/247.99c2e8c5.js"><link rel="prefetch" href="/devops/public/assets/js/248.c877bb00.js"><link rel="prefetch" href="/devops/public/assets/js/249.946e5fde.js"><link rel="prefetch" href="/devops/public/assets/js/25.d209b773.js"><link rel="prefetch" href="/devops/public/assets/js/250.57c4d59a.js"><link rel="prefetch" href="/devops/public/assets/js/251.9c50e024.js"><link rel="prefetch" href="/devops/public/assets/js/252.5e1e216a.js"><link rel="prefetch" href="/devops/public/assets/js/253.bca6a43e.js"><link rel="prefetch" href="/devops/public/assets/js/254.32f9a9e4.js"><link rel="prefetch" href="/devops/public/assets/js/255.aa4f14d3.js"><link rel="prefetch" href="/devops/public/assets/js/256.0c175cdf.js"><link rel="prefetch" href="/devops/public/assets/js/257.2e86393d.js"><link rel="prefetch" href="/devops/public/assets/js/258.5b4e2b8d.js"><link rel="prefetch" href="/devops/public/assets/js/259.9b5ea8a1.js"><link rel="prefetch" href="/devops/public/assets/js/26.37cff05a.js"><link rel="prefetch" href="/devops/public/assets/js/260.11200c5e.js"><link rel="prefetch" href="/devops/public/assets/js/261.b8c7584a.js"><link rel="prefetch" href="/devops/public/assets/js/262.a917d897.js"><link rel="prefetch" href="/devops/public/assets/js/263.47e5f082.js"><link rel="prefetch" href="/devops/public/assets/js/264.1da268c2.js"><link rel="prefetch" href="/devops/public/assets/js/265.6cfa0237.js"><link rel="prefetch" href="/devops/public/assets/js/266.b03f016c.js"><link rel="prefetch" href="/devops/public/assets/js/267.1abc3909.js"><link rel="prefetch" href="/devops/public/assets/js/27.17674ffe.js"><link rel="prefetch" href="/devops/public/assets/js/28.8675ef43.js"><link rel="prefetch" href="/devops/public/assets/js/29.1bbb3c84.js"><link rel="prefetch" href="/devops/public/assets/js/3.35a3f762.js"><link rel="prefetch" href="/devops/public/assets/js/30.e3c5f1e5.js"><link rel="prefetch" href="/devops/public/assets/js/31.e96cf53b.js"><link rel="prefetch" href="/devops/public/assets/js/32.6d39a578.js"><link rel="prefetch" href="/devops/public/assets/js/33.19fff795.js"><link rel="prefetch" href="/devops/public/assets/js/34.7d131903.js"><link rel="prefetch" href="/devops/public/assets/js/35.69f1e115.js"><link rel="prefetch" href="/devops/public/assets/js/36.962c3523.js"><link rel="prefetch" href="/devops/public/assets/js/37.8a283b7c.js"><link rel="prefetch" href="/devops/public/assets/js/38.fcdfdbf3.js"><link rel="prefetch" href="/devops/public/assets/js/39.08499321.js"><link rel="prefetch" href="/devops/public/assets/js/4.66c9c5f3.js"><link rel="prefetch" href="/devops/public/assets/js/40.ecd69e9f.js"><link rel="prefetch" href="/devops/public/assets/js/41.991b6203.js"><link rel="prefetch" href="/devops/public/assets/js/42.56bacc28.js"><link rel="prefetch" href="/devops/public/assets/js/43.54713f51.js"><link rel="prefetch" href="/devops/public/assets/js/44.5aebcd50.js"><link rel="prefetch" href="/devops/public/assets/js/45.bde76db1.js"><link rel="prefetch" href="/devops/public/assets/js/46.9ccbd788.js"><link rel="prefetch" href="/devops/public/assets/js/47.00d25425.js"><link rel="prefetch" href="/devops/public/assets/js/48.ec5edda8.js"><link rel="prefetch" href="/devops/public/assets/js/49.c64c870e.js"><link rel="prefetch" href="/devops/public/assets/js/5.8e21f9d3.js"><link rel="prefetch" href="/devops/public/assets/js/50.38e1ea84.js"><link rel="prefetch" href="/devops/public/assets/js/51.1a911c4e.js"><link rel="prefetch" href="/devops/public/assets/js/52.92139cf1.js"><link rel="prefetch" href="/devops/public/assets/js/53.89b06a8f.js"><link rel="prefetch" href="/devops/public/assets/js/54.6c248a88.js"><link rel="prefetch" href="/devops/public/assets/js/55.45770749.js"><link rel="prefetch" href="/devops/public/assets/js/56.41b65466.js"><link rel="prefetch" href="/devops/public/assets/js/57.eaec9e9b.js"><link rel="prefetch" href="/devops/public/assets/js/58.a9a07b8c.js"><link rel="prefetch" href="/devops/public/assets/js/59.d7a5afc3.js"><link rel="prefetch" href="/devops/public/assets/js/6.9150baff.js"><link rel="prefetch" href="/devops/public/assets/js/60.66cf40bb.js"><link rel="prefetch" href="/devops/public/assets/js/61.e089eb14.js"><link rel="prefetch" href="/devops/public/assets/js/62.ce34e7ad.js"><link rel="prefetch" href="/devops/public/assets/js/63.c4dba709.js"><link rel="prefetch" href="/devops/public/assets/js/65.ece2cc2e.js"><link rel="prefetch" href="/devops/public/assets/js/66.12cb968c.js"><link rel="prefetch" href="/devops/public/assets/js/67.c7ab28aa.js"><link rel="prefetch" href="/devops/public/assets/js/68.72df026a.js"><link rel="prefetch" href="/devops/public/assets/js/69.1951131c.js"><link rel="prefetch" href="/devops/public/assets/js/7.e4e8b6c2.js"><link rel="prefetch" href="/devops/public/assets/js/70.d8c73257.js"><link rel="prefetch" href="/devops/public/assets/js/71.ade4bf7c.js"><link rel="prefetch" href="/devops/public/assets/js/72.e48ba840.js"><link rel="prefetch" href="/devops/public/assets/js/73.3951cd3c.js"><link rel="prefetch" href="/devops/public/assets/js/74.cc4a2931.js"><link rel="prefetch" href="/devops/public/assets/js/75.65e448ff.js"><link rel="prefetch" href="/devops/public/assets/js/76.d13793b7.js"><link rel="prefetch" href="/devops/public/assets/js/77.6bb99700.js"><link rel="prefetch" href="/devops/public/assets/js/78.f306fed8.js"><link rel="prefetch" href="/devops/public/assets/js/79.47710d29.js"><link rel="prefetch" href="/devops/public/assets/js/8.5e170c36.js"><link rel="prefetch" href="/devops/public/assets/js/80.dddd989f.js"><link rel="prefetch" href="/devops/public/assets/js/81.cec9077e.js"><link rel="prefetch" href="/devops/public/assets/js/82.79a7325c.js"><link rel="prefetch" href="/devops/public/assets/js/83.6ed1bf3b.js"><link rel="prefetch" href="/devops/public/assets/js/84.6cdba99d.js"><link rel="prefetch" href="/devops/public/assets/js/85.37401841.js"><link rel="prefetch" href="/devops/public/assets/js/86.e71bb44f.js"><link rel="prefetch" href="/devops/public/assets/js/87.914543b0.js"><link rel="prefetch" href="/devops/public/assets/js/88.df906855.js"><link rel="prefetch" href="/devops/public/assets/js/89.ec43c2d4.js"><link rel="prefetch" href="/devops/public/assets/js/9.8e2307c4.js"><link rel="prefetch" href="/devops/public/assets/js/90.3a6d82e0.js"><link rel="prefetch" href="/devops/public/assets/js/91.1ad4d666.js"><link rel="prefetch" href="/devops/public/assets/js/92.ddc90ed2.js"><link rel="prefetch" href="/devops/public/assets/js/93.be43f77f.js"><link rel="prefetch" href="/devops/public/assets/js/94.d6f0bc7d.js"><link rel="prefetch" href="/devops/public/assets/js/95.e6846831.js"><link rel="prefetch" href="/devops/public/assets/js/96.5a7d5ba0.js"><link rel="prefetch" href="/devops/public/assets/js/97.5da431ca.js"><link rel="prefetch" href="/devops/public/assets/js/98.d063cf07.js"><link rel="prefetch" href="/devops/public/assets/js/99.34847663.js">
    <link rel="stylesheet" href="/devops/public/assets/css/0.styles.4a69f283.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>devops</h3> <p class="description" data-v-59e6cb88>快来玩devops</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>devops</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devops/public/" class="home-link router-link-active"><img src="/devops/public/logo.png" alt="devops" class="logo"> <span class="site-name">devops</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/devops/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      devops
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/categories/前端技术栈/" class="nav-link"><i class="undefined"></i>
  前端技术栈
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/HarmonyOS/" class="nav-link"><i class="undefined"></i>
  HarmonyOS
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/data analysis/" class="nav-link"><i class="undefined"></i>
  data analysis
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/devops/" class="nav-link"><i class="undefined"></i>
  devops
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/每日一题/" class="nav-link"><i class="undefined"></i>
  每日一题
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javabase/" class="nav-link"><i class="undefined"></i>
  javabase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/node/" class="nav-link"><i class="undefined"></i>
  node
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/pybase/" class="nav-link"><i class="undefined"></i>
  pybase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloud/" class="nav-link"><i class="undefined"></i>
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/spider/" class="nav-link"><i class="undefined"></i>
  spider
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloudalibaba/" class="nav-link"><i class="undefined"></i>
  springcloudalibaba
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/storage/" class="nav-link"><i class="undefined"></i>
  storage
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/zhifu/" class="nav-link"><i class="undefined"></i>
  zhifu
</a></li></ul></div></div><div class="nav-item"><a href="/devops/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/devops/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/devops/public/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    devops
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>243</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>43</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/devops/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      devops
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/categories/前端技术栈/" class="nav-link"><i class="undefined"></i>
  前端技术栈
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/HarmonyOS/" class="nav-link"><i class="undefined"></i>
  HarmonyOS
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/data analysis/" class="nav-link"><i class="undefined"></i>
  data analysis
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/devops/" class="nav-link"><i class="undefined"></i>
  devops
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/每日一题/" class="nav-link"><i class="undefined"></i>
  每日一题
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javabase/" class="nav-link"><i class="undefined"></i>
  javabase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/node/" class="nav-link"><i class="undefined"></i>
  node
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/pybase/" class="nav-link"><i class="undefined"></i>
  pybase
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloud/" class="nav-link"><i class="undefined"></i>
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/spider/" class="nav-link"><i class="undefined"></i>
  spider
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/springcloudalibaba/" class="nav-link"><i class="undefined"></i>
  springcloudalibaba
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/storage/" class="nav-link"><i class="undefined"></i>
  storage
</a></li><li class="dropdown-item"><!----> <a href="/devops/public/categories/zhifu/" class="nav-link"><i class="undefined"></i>
  zhifu
</a></li></ul></div></div><div class="nav-item"><a href="/devops/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/devops/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>prometheus01</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>devops</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">prometheus01</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>devops</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/15/2028</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>devops</span></i></div></div> <div class="theme-reco-content content__default"><h3 id="_1-面试题"><a href="#_1-面试题" class="header-anchor">#</a> 1，面试题</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Q75:docker和containerd的区别?最少说出3种。
    相同点:
    不同点:
    
Q76:你了解过哪些容器管理工具?最少说出3种，
    <span class="token function">docker</span>
    containerd
    rkt
    <span class="token function">podman</span>
    pouch
    
Q77:简单陈述下SQL和NOSQL的区别并举例3种你使用过的产品?


Q78:keepalived使用的是啥协议?简述下VRRP协议的工作原理?


Q79:简单陈述下TCP三次握手的原理?四次断开原理?


Q80:为什么建立TCP要3次握手，断开链接要4次呢?请说明原因?

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>环境准备: 
	<span class="token number">10.0</span>.0.31 prometheus-server31 
		<span class="token number">2</span> core 2GB+
	<span class="token number">10.0</span>.0.32 prometheus-server32 
		<span class="token number">1</span> core 1GB+
	<span class="token number">10.0</span>.0.33 prometheus-server33
		<span class="token number">1</span> core 1GB+
	<span class="token number">10.0</span>.0.41 node-exporter41 
		<span class="token number">1</span> core 1GB+
	<span class="token number">10.0</span>.0.42 node-exporter42 
		<span class="token number">1</span> core 1GB+
	<span class="token number">10.0</span>.0.43 node-exporter43
		<span class="token number">1</span> core 1GB+
	<span class="token number">10.0</span>.0.51 grafana51
		<span class="token number">2</span> core 2GB+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_2-prometheus概述"><a href="#_2-prometheus概述" class="header-anchor">#</a> 2，prometheus概述</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>官网地址:
	https://prometheus.io/
	
github地址:
	https://github.com/prometheus/prometheus
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/devops/public/assets/img/1731335464480.cdc06f08.png" alt="1731335464480"></p> <h3 id="_3-prometheus安装"><a href="#_3-prometheus安装" class="header-anchor">#</a> 3，Prometheus安装</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.下载Prometheus server 
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># wget https://github.com/prometheus/prometheus/releases/download/v2.53.3/prometheus-2.53.3.linux-amd64.tar.gz</span>
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># ll prometheus-2.53.3.linux-amd64.tar.gz </span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">104207826</span> Nov <span class="token number">11</span> <span class="token number">22</span>:43 prometheus-2.53.3.linux-amd64.tar.gz
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token number">2</span>.创建工作目录
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># mkdir -pv /malu/softwares</span>

<span class="token number">3</span>.解压软件包 
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># tar xf prometheus-2.53.3.linux-amd64.tar.gz -C /malu/softwares</span>

<span class="token number">4</span>.启动Prometheus server 
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># cd /malu/softwares/prometheus-2.53.3.linux-amd64/</span>
<span class="token punctuation">[</span>root@prometheus-server31 prometheus-2.53.3.linux-amd64<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">261344</span>
drwxr-xr-x <span class="token number">4</span> <span class="token number">1001</span> colord      <span class="token number">4096</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:37 ./
drwxr-xr-x <span class="token number">3</span> root root        <span class="token number">4096</span> Nov <span class="token number">12</span> 08:55 <span class="token punctuation">..</span>/
drwxr-xr-x <span class="token number">2</span> <span class="token number">1001</span> colord      <span class="token number">4096</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:35 console_libraries/
drwxr-xr-x <span class="token number">2</span> <span class="token number">1001</span> colord      <span class="token number">4096</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:35 consoles/
-rw-r--r-- <span class="token number">1</span> <span class="token number">1001</span> colord     <span class="token number">11357</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:35 LICENSE
-rw-r--r-- <span class="token number">1</span> <span class="token number">1001</span> colord      <span class="token number">3773</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:35 NOTICE
-rwxr-xr-x <span class="token number">1</span> <span class="token number">1001</span> colord <span class="token number">137839708</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:19 prometheus*
-rw-r--r-- <span class="token number">1</span> <span class="token number">1001</span> colord       <span class="token number">934</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:35 prometheus.yml
-rwxr-xr-x <span class="token number">1</span> <span class="token number">1001</span> colord <span class="token number">129729365</span> Nov  <span class="token number">5</span> <span class="token number">20</span>:19 promtool*


<span class="token punctuation">[</span>root@prometheus-server31 prometheus-2.53.3.linux-amd64<span class="token punctuation">]</span><span class="token comment"># ./prometheus </span>

<span class="token number">5</span>.访问Prometheus的WebUI
http://10.0.0.31:9090/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><img src="/devops/public/assets/img/1731373054853.cde47879.png" alt="1731373054853"></p> <h3 id="_4-prometheus-server一键部署脚本"><a href="#_4-prometheus-server一键部署脚本" class="header-anchor">#</a> 4，Prometheus server一键部署脚本</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.停止原有的二进制部署环境并移除环境
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># rm -rf /malu/</span>

<span class="token number">2</span>.下载安装脚本
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># ll install-prometheus-server.zip </span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">103863672</span> Nov <span class="token number">12</span> 09:00 install-prometheus-server.zip
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># </span>


<span class="token number">3</span>.解压软件包 
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># unzip install-prometheus-server.zip </span>
Archive:  install-prometheus-server.zip
   creating: install-prometheus-server/
   creating: install-prometheus-server/download/
  inflating: install-prometheus-server/download/prometheus-2.53.3.linux-amd64.tar.gz  
  inflating: install-prometheus-server/install-prometheus-server.sh  
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># cd install-prometheus-server/</span>
<span class="token punctuation">[</span>root@prometheus-server31 install-prometheus-server<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">16</span>
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Nov <span class="token number">12</span> 08:58 ./
drwx------ <span class="token number">6</span> root root <span class="token number">4096</span> Nov <span class="token number">12</span> 09:05 <span class="token punctuation">..</span>/
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">12</span> 08:59 download/
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">2538</span> Nov <span class="token number">12</span> 09:00 install-prometheus-server.sh
<span class="token punctuation">[</span>root@prometheus-server31 install-prometheus-server<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token number">4</span>.部署Prometheus-server 
<span class="token punctuation">[</span>root@prometheus-server31 install-prometheus-server<span class="token punctuation">]</span><span class="token comment"># chmod +x install-prometheus-server.sh </span>
<span class="token punctuation">[</span>root@prometheus-server31 install-prometheus-server<span class="token punctuation">]</span><span class="token comment"># ./install-prometheus-server.sh i</span>
Created symlink /etc/systemd/system/multi-user.target.wants/prometheus-server.service → /etc/systemd/system/prometheus-server.service.
● prometheus-server.service - malu Linux  Prometheus Server
     Loaded: loaded <span class="token punctuation">(</span>/etc/systemd/system/prometheus-server.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
     Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Tue <span class="token number">2024</span>-11-12 09:06:45 CST<span class="token punctuation">;</span> 10ms ago


<span class="token number">5</span>.访问Prometheus的WebUI
http://10.0.0.31:9090/targets
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><img src="/devops/public/assets/img/1731373640504.00a13825.png" alt="1731373640504"></p> <p>脚本内容：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>


<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token number">2.53</span>.3
<span class="token assign-left variable">ARCH</span><span class="token operator">=</span>amd64
<span class="token assign-left variable">SOFTWARE</span><span class="token operator">=</span>prometheus-<span class="token variable">${VERSION}</span>.linux-<span class="token variable">${ARCH}</span>.tar.gz
<span class="token assign-left variable">URL</span><span class="token operator">=</span>https://github.com/prometheus/prometheus/releases/download/v<span class="token variable">${VERSION}</span>/<span class="token variable">${SOFTWARE}</span>
<span class="token assign-left variable">DOWNLOAD</span><span class="token operator">=</span>./download
<span class="token assign-left variable">INSTALLDIR</span><span class="token operator">=</span>/malu/softwares
<span class="token assign-left variable">BASEDIR</span><span class="token operator">=</span><span class="token variable">${INSTALLDIR}</span>/prometheus-<span class="token variable">${VERSION}</span>.linux-amd64
<span class="token assign-left variable">DATADIR</span><span class="token operator">=</span>/malu/data/prometheus
<span class="token assign-left variable">LOGDIR</span><span class="token operator">=</span>/malu/logs/prometheus
<span class="token assign-left variable">HOSTIP</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0
<span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">9090</span>
<span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">hostname</span><span class="token variable">`</span></span>


<span class="token keyword">function</span> <span class="token function-name function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment"># 判断目录是否存在，若不存在则创建</span>
  <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$INSTALLDIR</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">install</span> <span class="token parameter variable">-d</span>  <span class="token variable">${INSTALLDIR}</span>
  <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$DOWNLOAD</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">install</span> <span class="token parameter variable">-d</span> <span class="token variable">${DOWNLOAD}</span>
  <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$DATADIR</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">install</span> <span class="token parameter variable">-d</span> <span class="token variable">${DATADIR}</span>
  <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$LOGDIR</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">install</span> <span class="token parameter variable">-d</span> <span class="token variable">${LOGDIR}</span>

  <span class="token builtin class-name">.</span> /etc/os-release

  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$ID</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;centos&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token comment"># 判断系统是否安装wget</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /usr/bin/wget <span class="token punctuation">]</span> <span class="token operator">||</span> yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">wget</span>
  <span class="token keyword">fi</span>

  <span class="token comment"># 判断文件是否存在，若不存在则下载</span>
  <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token variable">${DOWNLOAD}</span>/<span class="token variable">${SOFTWARE}</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">wget</span> <span class="token variable">$URL</span> <span class="token parameter variable">-O</span> <span class="token variable">${DOWNLOAD}</span>/<span class="token variable">${SOFTWARE}</span>

<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function-name function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment"># 检查环境</span>
  prepare

  <span class="token comment"># 解压文件软件包</span>
  <span class="token function">tar</span> xf <span class="token variable">${DOWNLOAD}</span>/<span class="token variable">${SOFTWARE}</span> <span class="token parameter variable">-C</span> <span class="token variable">${INSTALLDIR}</span>

  <span class="token comment"># 生成启动脚本</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/systemd/system/prometheus-server.service <span class="token operator">&lt;&lt;</span><span class="token string">EOF
[Unit]
Description=malu Linux  Prometheus Server
Documentation=https://prometheus.io/docs/introduction/overview/
After=network.target

[Service]
Restart=on-failure
ExecStart=/bin/bash -c &quot;<span class="token variable">${BASEDIR}</span>/prometheus \
     --config.file=<span class="token variable">${BASEDIR}</span>/prometheus.yml \
	 --web.enable-lifecycle \
	 --storage.tsdb.path=<span class="token variable">${DATADIR}</span> \
	 --storage.tsdb.retention.time=60d  \
	 --web.listen-address=<span class="token variable">${HOSTIP}</span>:<span class="token variable">${PORT}</span>  \
	 --web.max-connections=65535  \
	 --storage.tsdb.retention.size=512MB \
	 --query.timeout=10s \
	 --query.max-concurrency=20 \
	 --log.level=info \
	 --log.format=json \
	 --web.read-timeout=5m &amp;&gt;&gt; <span class="token variable">${LOGDIR}</span>/prometheus-server.log&quot;
ExecReload=/bin/kill -HUP \<span class="token variable">$MAINPID</span>
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF</span>

  <span class="token comment"># 将服务设置为开机自启动</span>
  systemctl daemon-reload
  systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> prometheus-server
  systemctl status prometheus-server
  <span class="token function">sleep</span> <span class="token number">0.3</span>
  ss <span class="token parameter variable">-ntl</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token variable">${PORT}</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function-name function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  systemctl disable <span class="token parameter variable">--now</span> prometheus-server.service
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/systemd/system/node-exporter.service <span class="token variable">$BASEDIR</span> <span class="token variable">$DATADIR</span> <span class="token variable">$LOGDIR</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span> 
    deploy<span class="token operator">|</span>i<span class="token punctuation">)</span>
      deploy
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${<span class="token environment constant">HOSTNAME</span>}</span> 的prometheus-server 已经部署成功![successfully]&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    delete<span class="token operator">|</span>r<span class="token punctuation">)</span>
      delete
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${<span class="token environment constant">HOSTNAME</span>}</span> 的prometheus-server 已经卸载成功,期待下次使用~&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: <span class="token variable">$0</span> deploy[i]|delete[r]&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token punctuation">}</span>


main <span class="token variable">$1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div><h3 id="_5-二进制部署node-exporter"><a href="#_5-二进制部署node-exporter" class="header-anchor">#</a> 5，二进制部署node-exporter</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_exporter的作用：
	可以暴露Linux服务器的指标，可以采集CPU，内存，磁盘，网络等一系列使用情况，基于http协议暴露到外端。
	
<span class="token number">1</span>.下载node-exporter
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz</span>
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># ll node_exporter-1.8.2.linux-amd64.tar.gz </span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">10676343</span> Nov <span class="token number">11</span> <span class="token number">22</span>:55 node_exporter-1.8.2.linux-amd64.tar.gz
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token number">2</span>.创建工作目录 
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># mkdir -pv /malu/softwares</span>

<span class="token number">3</span>.解压node-exporter
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># tar xf node_exporter-1.8.2.linux-amd64.tar.gz -C /malu/softwares/</span>

<span class="token number">4</span>.启动node-exporter 
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># cd /malu/softwares/node_exporter-1.8.2.linux-amd64/</span>
<span class="token punctuation">[</span>root@node-exporter41 node_exporter-1.8.2.linux-amd64<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@node-exporter41 node_exporter-1.8.2.linux-amd64<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">20048</span>
drwxr-xr-x <span class="token number">2</span> <span class="token number">1001</span> <span class="token number">1002</span>     <span class="token number">4096</span> Jul <span class="token number">14</span> <span class="token number">19</span>:58 ./
drwxr-xr-x <span class="token number">3</span> root root     <span class="token number">4096</span> Nov <span class="token number">11</span> <span class="token number">10</span>:29 <span class="token punctuation">..</span>/
-rw-r--r-- <span class="token number">1</span> <span class="token number">1001</span> <span class="token number">1002</span>    <span class="token number">11357</span> Jul <span class="token number">14</span> <span class="token number">19</span>:57 LICENSE
-rwxr-xr-x <span class="token number">1</span> <span class="token number">1001</span> <span class="token number">1002</span> <span class="token number">20500541</span> Jul <span class="token number">14</span> <span class="token number">19</span>:54 node_exporter*
-rw-r--r-- <span class="token number">1</span> <span class="token number">1001</span> <span class="token number">1002</span>      <span class="token number">463</span> Jul <span class="token number">14</span> <span class="token number">19</span>:57 NOTICE
<span class="token punctuation">[</span>root@node-exporter41 node_exporter-1.8.2.linux-amd64<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@node-exporter41 node_exporter-1.8.2.linux-amd64<span class="token punctuation">]</span><span class="token comment"># ./node_exporter </span>

<span class="token number">5</span>.测试验证
http://10.0.0.41:9100/metrics
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><img src="/devops/public/assets/img/1731373956079.6790b792.png" alt="1731373956079"></p> <p><img src="/devops/public/assets/img/1731337202518.3d9e0a16.png" alt="1731337202518"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>参考格式说明:
   TYPE:
   	表示metric的数据类型。
   HELP:
   	表示metric帮助信息。
   metric:
   	具体的指标
   标签:
   	给指标打标签，起到标识性作用。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_6-node-exporter配置模块黑白名单"><a href="#_6-node-exporter配置模块黑白名单" class="header-anchor">#</a> 6，node-exporter配置模块黑白名单</h3> <p>这是一个面试题。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.默认启用，禁用的指标:
https://github.com/prometheus/node_exporter?tab<span class="token operator">=</span>readme-ov-file<span class="token comment">#enabled-by-default</span>

https://github.com/prometheus/node_exporter?tab<span class="token operator">=</span>readme-ov-file<span class="token comment">#disabled-by-default</span>

<span class="token number">2</span>.模块白名单
<span class="token punctuation">[</span>root@node-exporter41 node_exporter-1.8.2.linux-amd64<span class="token punctuation">]</span><span class="token comment"># ./node_exporter --collector.cpu --collector.uname --collector.disable-defaults</span>
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.052Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>node_exporter.go:193 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">msg</span><span class="token operator">=</span><span class="token string">&quot;Starting node_exporter&quot;</span> <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token string">&quot;(version=1.8.2, branch=HEAD, revision=f1e0e8360aa60b6cb5e5cc1560bed348fc2c1895)&quot;</span>
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.052Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>node_exporter.go:194 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">msg</span><span class="token operator">=</span><span class="token string">&quot;Build context&quot;</span> <span class="token assign-left variable">build_context</span><span class="token operator">=</span><span class="token string">&quot;(go=go1.22.5, platform=linux/amd64, user=root@03d440803209, date=20240714-11:53:45, tags=unknown)&quot;</span>
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.052Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>node_exporter.go:196 <span class="token assign-left variable">level</span><span class="token operator">=</span>warn <span class="token assign-left variable">msg</span><span class="token operator">=</span><span class="token string">&quot;Node Exporter is running as root user. This exporter is designed to run as unprivileged user, root is not required.&quot;</span>
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.053Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>node_exporter.go:111 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">msg</span><span class="token operator">=</span><span class="token string">&quot;Enabled collectors&quot;</span>
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.053Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>node_exporter.go:118 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">collector</span><span class="token operator">=</span>cpu
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.053Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>node_exporter.go:118 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">collector</span><span class="token operator">=</span>uname
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.053Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>tls_config.go:313 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">msg</span><span class="token operator">=</span><span class="token string">&quot;Listening on&quot;</span> <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token punctuation">[</span>::<span class="token punctuation">]</span>:9100
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2024</span>-11-11T02:51:24.053Z <span class="token assign-left variable">caller</span><span class="token operator">=</span>tls_config.go:316 <span class="token assign-left variable">level</span><span class="token operator">=</span>info <span class="token assign-left variable">msg</span><span class="token operator">=</span><span class="token string">&quot;TLS is disabled.&quot;</span> <span class="token assign-left variable">http2</span><span class="token operator">=</span>false <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token punctuation">[</span>::<span class="token punctuation">]</span>:9100

<span class="token number">3</span>.模块黑名单
<span class="token punctuation">[</span>root@node-exporter41 node_exporter-1.8.2.linux-amd64<span class="token punctuation">]</span><span class="token comment"># ./node_exporter --no-collector.cpu</span>

注意，只需要将<span class="token string">&quot;--no-collector.MODULE&quot;</span>，将NAME换成你需要禁用的模块即可。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_7-node-exporter一键部署"><a href="#_7-node-exporter一键部署" class="header-anchor">#</a> 7，node_exporter一键部署</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.删除二进制部署的环境
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># rm -rf /malu/</span>

<span class="token number">2</span>.下载node-exporter
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># ll install-node-exporter.tar.gz </span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">10661440</span> Nov <span class="token number">11</span> <span class="token number">22</span>:55 install-node-exporter.tar.gz
	
<span class="token number">3</span>.解压软件包 
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># tar xf install-node-exporter.tar.gz</span>
	
<span class="token number">4</span>.安装node-exporter
<span class="token punctuation">[</span>root@node-exporter41 ~<span class="token punctuation">]</span><span class="token comment"># ./install-node-exporter.sh i</span>
 
<span class="token number">5</span>.访问WebUI
http://10.0.0.41:9100/metrics


温馨提示:
	将41-43节点都安装上node-exporter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><img src="/devops/public/assets/img/1731374535749.cbdeb85e.png" alt="1731374535749"></p> <p>42，43节点同样操作：</p> <p><img src="/devops/public/assets/img/1731374786364.ac4dbedb.png" alt="1731374786364"></p> <p><img src="/devops/public/assets/img/1731374796672.200597cd.png" alt="1731374796672"></p> <p>脚本内容：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token number">1.8</span>.2
<span class="token assign-left variable">SOFTWARE</span><span class="token operator">=</span>node_exporter-<span class="token variable">${VERSION}</span>.linux-amd64.tar.gz
<span class="token assign-left variable">URL</span><span class="token operator">=</span>https://github.com/prometheus/node_exporter/releases/download/v<span class="token variable">${VERSION}</span>/<span class="token variable">${SOFTWARE}</span>
<span class="token assign-left variable">DOWNLOAD</span><span class="token operator">=</span>./download
<span class="token assign-left variable">INSTALLDIR</span><span class="token operator">=</span>/malu/softwares
<span class="token assign-left variable">BASEDIR</span><span class="token operator">=</span><span class="token variable">${INSTALLDIR}</span>/node_exporter-<span class="token variable">${VERSION}</span>.linux-amd64
<span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token string">&quot;0.0.0.0&quot;</span>
<span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">9100</span>
<span class="token assign-left variable">hostname</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">hostname</span><span class="token variable">`</span></span>


<span class="token keyword">function</span> <span class="token function-name function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment"># 判断目录是否存在，若不存在则创建</span>
   <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$INSTALLDIR</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">mkdir</span> <span class="token parameter variable">-pv</span> <span class="token variable">${INSTALLDIR}</span>
   <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$DOWNLOAD</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">mkdir</span> <span class="token parameter variable">-pv</span> <span class="token variable">${DOWNLOAD}</span>
   
   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$ID</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;centos&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
     <span class="token comment"># 判断系统是否安装curl</span>
     <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /usr/bin/wget <span class="token punctuation">]</span> <span class="token operator">||</span> yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">wget</span>
   <span class="token keyword">fi</span>

   <span class="token comment"># 判断文件是否存在，若不存在则下载</span>
   <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token variable">${DOWNLOAD}</span>/<span class="token variable">${SOFTWARE}</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">wget</span> <span class="token variable">$URL</span> <span class="token parameter variable">-O</span> <span class="token variable">${DOWNLOAD}</span>/<span class="token variable">${SOFTWARE}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">install</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment"># 检查环境</span>
  prepare

  <span class="token comment"># 解压文件软件包</span>
  <span class="token function">tar</span> xf <span class="token variable">${DOWNLOAD}</span>/<span class="token variable">${SOFTWARE}</span> <span class="token parameter variable">-C</span> <span class="token variable">${INSTALLDIR}</span>

  <span class="token comment"># 生成启动脚本</span>
  <span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/systemd/system/node-exporter.service <span class="token operator">&lt;&lt;</span><span class="token string">EOF
[Unit]
Description=Malu Linux Node Exporter
Documentation=https://prometheus.io/docs/introduction/overview/
After=network.target

[Service]
ExecStart=<span class="token variable">${BASEDIR}</span>/node_exporter --web.telemetry-path=&quot;/metrics&quot; \
   --web.listen-address=<span class="token variable">${HOST}</span>:<span class="token variable">${PORT}</span>


[Install]
WantedBy=multi-user.target
EOF</span>

     <span class="token comment"># 将服务设置为开机自启动</span>
     systemctl daemon-reload
     systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> node-exporter.service
     systemctl status node-exporter.service
     ss <span class="token parameter variable">-ntl</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">9100</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  systemctl disable <span class="token parameter variable">--now</span> node-exporter.service
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/systemd/system/node-exporter.service <span class="token variable">$BASEDIR</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span> 
    <span class="token function">install</span><span class="token operator">|</span>i<span class="token punctuation">)</span>
      <span class="token function">install</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${hostname}</span> 的node-exporter 已经部署成功![successfully]&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    remove<span class="token operator">|</span>r<span class="token punctuation">)</span>
      remove
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${hostname}</span> 的node-exporter 已经卸载成功,期待下次使用~&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: <span class="token variable">$0</span> install[i]|remove[r]&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token punctuation">}</span>


main <span class="token variable">$1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h3 id="_8-prometheus监控node-exporter"><a href="#_8-prometheus监控node-exporter" class="header-anchor">#</a> 8，Prometheus监控node-exporter</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.修改Prometheus的配置文件 
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># vim /malu/softwares/prometheus-2.53.3.linux-amd64/prometheus.yml </span>
<span class="token punctuation">..</span>.
<span class="token comment"># 全局配置</span>
global:
  <span class="token comment"># 采集目标(targets)的时间间隔</span>
  scrape_interval: 3s
  <span class="token punctuation">..</span>.
  
<span class="token punctuation">..</span>.
<span class="token comment"># 抓取配置</span>
scrape_configs:
   <span class="token punctuation">..</span>.
   
   - job_name: <span class="token string">&quot;malu-node-exporter&quot;</span>
     metrics_path: <span class="token string">&quot;/metrics&quot;</span>
     scheme: <span class="token string">&quot;http&quot;</span>
     static_configs:
       - targets: <span class="token punctuation">[</span><span class="token string">&quot;10.0.0.41:9100&quot;</span>,<span class="token string">&quot;10.0.0.42:9100&quot;</span>,<span class="token string">&quot;10.0.0.43:9100&quot;</span><span class="token punctuation">]</span>     
	   
	   

<span class="token number">2</span>.重新加载配置 
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># curl -X POST 10.0.0.31:9090/-/reload</span>


<span class="token number">3</span>.访问WebUI验证 
http://10.0.0.31:9090/targets
http://10.0.0.31:9090/config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><img src="/devops/public/assets/img/1731375628224.9b5ca7fd.png" alt="1731375628224"></p> <p><img src="/devops/public/assets/img/1731375662445.83dd1443.png" alt="1731375662445"></p> <h3 id="_9-prometheus-metrics-type"><a href="#_9-prometheus-metrics-type" class="header-anchor">#</a> 9，prometheus metrics type</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>prometheus监控中采集过来的数据统一称为Metrics数据，其并不是代表具体的数据格式，而是一种统计度量计算单位。

当我们需要为某个系统或者某个服务做监控时，就需要使用到metrics。

prometheus支持的metrics包括但不限于以下几种数据类型:
guage:
最简单的度量指标，只是一个简单的返回值，或者叫瞬时状态。
比如说统计硬盘，内存等使用情况。

counter:
就是一个计数器，从数据量0开始累积计算，在理想情况下，只能是永远的增长，不会降低<span class="token punctuation">(</span>有特殊情况，比如粉丝量<span class="token punctuation">)</span>。
比如统计1小时，1天，1周，1一个月的用户访问量，这就是一个累加的操作。

histogram:
是统计数据的分布情况，比如最小值，最大值，中间值，中位数等，代表的是一种近似百分比估算数值。
通过histograms可以分别统计处在一个时间段<span class="token punctuation">(</span>1s,2s,5s,10s<span class="token punctuation">)</span>内nginx访问用户的响应时间。

summary:
summary是histograms的扩展类型，主要弥补histograms不足。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_10-promql语句初体验"><a href="#_10-promql语句初体验" class="header-anchor">#</a> 10，PromQL语句初体验</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>up
	判断一个被监控目标是否存活，若存活则为1，若不存或则为0。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380451418.1725d025.png" alt="1731380451418"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_load5-0
	查询5分钟内的负载，不显示metrics。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380435537.3d256091.png" alt="1731380435537"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_cpu_seconds_total<span class="token punctuation">{</span>instance<span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span><span class="token punctuation">}</span>
    基于标签过滤，查询10.0.0.42节点的CPU信息。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380525073.42d53bc8.png" alt="1731380525073"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_cpu_seconds_total<span class="token punctuation">{</span>instance<span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span>,mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
	可以定义多个过滤参数，使用逗号分隔即可。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380567725.8ace683b.png" alt="1731380567725"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_cpu_seconds_total<span class="token punctuation">{</span>instance<span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>,mode<span class="token operator">!=</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">}</span>
	表示查询CPU不等于<span class="token string">&quot;idle&quot;</span>的模式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380612816.a811d452.png" alt="1731380612816"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_cpu_seconds_total<span class="token punctuation">{</span>instance<span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>,mode<span class="token operator">=~</span><span class="token string">&quot;i.*&quot;</span><span class="token punctuation">}</span>	
	支持基于正则匹配我们需要的数据，表示查询以i开头的所有模式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380646168.5ee27f9e.png" alt="1731380646168"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_cpu_seconds_total<span class="token punctuation">{</span>instance<span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>,mode<span class="token operator">!</span>~<span class="token string">&quot;i.*&quot;</span><span class="token punctuation">}</span>
	取反效果，表示查询不以i开头的所有模式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380676944.a2dfd2ae.png" alt="1731380676944"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node_cpu_seconds_total<span class="token punctuation">{</span>instance<span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>,mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>10s<span class="token punctuation">]</span>
	表示查询10s内CPU采集的数据信息。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731380709402.07f91583.png" alt="1731380709402"></p> <h3 id="_11-prometheus常用的函数"><a href="#_11-prometheus常用的函数" class="header-anchor">#</a> 11，Prometheus常用的函数</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>官方文档:
	 https://prometheus.io/docs/prometheus/2.53/querying/functions/
	 
实验环境准备:
<span class="token punctuation">[</span>root@node-exporter42 ~<span class="token punctuation">]</span><span class="token comment"># apt -y install stress</span>
<span class="token punctuation">[</span>root@node-exporter42 ~<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@node-exporter42 ~<span class="token punctuation">]</span><span class="token comment"># stress --cpu 8 --io 4 --vm 2 --vm-bytes 128M --timeout 20m</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>increase函数:
	用来针对counter数据类型，截取其中一段时间总的增量。
	
举个例子:
	increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span>, <span class="token assign-left variable">instance</span><span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">)</span>
		统计1分钟内，使用标签过滤器查看<span class="token string">&quot;10.0.0.42:9100&quot;</span>节点的第0颗CPU，空闲状态使用的总时间增量。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/devops/public/assets/img/1731381195440.ec79c5b0.png" alt="1731381195440"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sum函数:
	加和的作用。
	
举个例子:
	sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
		统计1分钟内，使用标签过滤器查看所有节点的第0颗CPU，空闲状态使用的总时间增量，并将返回结果累加。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/devops/public/assets/img/1731381442798.943a1d4b.png" alt="1731381442798"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>avg函数:
	求平均值。
	
	avg<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/devops/public/assets/img/1731381456259.1e11885f.png" alt="1731381456259"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>max函数:
	求最大值。
	max<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/devops/public/assets/img/1731381470918.545aeba3.png" alt="1731381470918"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>min:
	求最小值。
	min<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/devops/public/assets/img/1731381484638.90213489.png" alt="1731381484638"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>by函数:
	将数据进行分组，类似于MySQL的<span class="token string">&quot;GROUP BY&quot;</span>。
	
举个例子:
	sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span>
		统计1分钟内，使用标签过滤器查看CPU空闲状态，并将结果进行累加，基于instance进行分组。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/devops/public/assets/img/1731381511504.a9f09301.png" alt="1731381511504"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>rate函数:
	它的功能是按照设置的时间段，取counter在这个时间段中平均每秒的增量。
	
举个例子:
	rate<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span>,cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span>, <span class="token assign-left variable">instance</span><span class="token operator">=</span><span class="token string">&quot;10.0.0.42:9100&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">)</span>
		统计1分钟内，使用标签过滤器查看<span class="token string">&quot;10.0.0.42:9100&quot;</span>节点的第0颗CPU，空闲状态使用的每秒的增量。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/devops/public/assets/img/1731381550818.73f54200.png" alt="1731381550818"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>increase和rate如何选择:
	<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>对于采集数据频率较低的场景建议使用increase函数，因为使用rate函数可能会出现断点,比如针对硬盘容量监控。
	<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>对于采集数据频率较高的场景建议使用rate函数，比如针对CPU，内存，网络流量等都是可以基于rate函数来采集等。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>topk函数:
	取前几位的最高值，实际使用的时候一般会用该函数进行瞬时报警，而不是为了观察曲线图。
	
举个例子:
	topk<span class="token punctuation">(</span><span class="token number">3</span>, rate<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
		统计1分钟内，使用标签过滤器查看CPU，所有状态使用的每秒的增量，只查看前3个节点。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/devops/public/assets/img/1731381642142.0601eea7.png" alt="1731381642142"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>count函数:
	把数值符合条件的，输出数目进行累加加和。
	比如说企业中有100台服务器，如果只有10台服务器CPU使用率高于80%时候是不需要报警的，但是数量超过70台时就需要报警了。
	
举个例子:
	count<span class="token punctuation">(</span>malu_tcp_wait_conn <span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">)</span>:
		假设malu_tcp_wait_conn是咱们自定义的KEY。
		若TCP等待数量大于500的机器数量就判断条件为真。

	count<span class="token punctuation">(</span>rate<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>cpu<span class="token operator">=</span><span class="token string">&quot;0&quot;</span>,mode<span class="token operator">=</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
		对统计的结果进行计数。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/devops/public/assets/img/1731381765306.9367ab6f.png" alt="1731381765306"></p> <h3 id="_12-统计各个节点cpu的使用率"><a href="#_12-统计各个节点cpu的使用率" class="header-anchor">#</a> 12，统计各个节点CPU的使用率</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>.我们需要先找到CPU相关的KEY
node_cpu_seconds_total

<span class="token number">2</span>.过滤出CPU的空闲时间<span class="token punctuation">(</span><span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>和全部CPU的时间<span class="token punctuation">(</span><span class="token string">'{}'</span><span class="token punctuation">)</span>
node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span>
	过滤CPU的空闲时间。
node_cpu_seconds_total<span class="token punctuation">{</span><span class="token punctuation">}</span>
	此处的<span class="token string">'{}'</span>可以不写，因为里面没有任何参数，代表获取CPU的所有状态时间。
	
<span class="token number">3</span>.统计1分钟内CPU的增量时间
increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">)</span>
	统计1分钟内CPU空闲状态的增量。
increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">)</span>
	统计1分钟内CPU所有状态的增量。
	
<span class="token number">4</span>.将结果进行加和统计
sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
	将1分钟内所有CPU空闲时间的增量进行加和计算。
sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span>
	将1分钟内所有CPU空闲时间的增量进行加和计算。
	
<span class="token number">5</span>.按照不同节点进行分组
sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span>
	将1分钟内所有CPU空闲时间的增量进行加和计算，并按照机器实例进行分组。
sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span>
	将1分钟内所有CPU空闲时间的增量进行加和计算，并按照机器实例进行分组。
	
<span class="token number">6</span>.计算1分钟内CPU空闲时间的百分比
sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span>

<span class="token number">7</span>.统计1分钟内CPU的使用率，计算公式: <span class="token punctuation">(</span><span class="token number">1</span> - CPU空闲时间的百分比<span class="token punctuation">)</span> * <span class="token number">100</span>%。
<span class="token punctuation">(</span><span class="token number">1</span> - sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">8</span>.统计1小时内CPU的使用率，计算公式: <span class="token punctuation">(</span><span class="token number">1</span> - CPU空闲时间的百分比<span class="token punctuation">)</span> * <span class="token number">100</span>%。
<span class="token punctuation">(</span><span class="token number">1</span> - sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1h<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1h<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>




最终结果:
<span class="token number">1</span>.计算CPU一分钟内的使用率
<span class="token punctuation">(</span><span class="token number">1</span> - <span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'idle'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">2</span> 计算CPU用户态的1分钟内百分比
sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> * <span class="token number">100</span>

<span class="token number">3</span> 计算CPU内核态的1分钟内百分比
<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'system'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">4</span> 计算CPU IO等待时间的1分钟内百分比
<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'iowait'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">5</span>.计算CPU nice时间的1分钟内百分比
<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'nice'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">6</span>.计算CPU softirq软中断时间的1分钟内百分比
<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'softirq'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">7</span>.计算CPU steal虚拟机CPU时间被物理机偷走时间的1分钟内百分比
<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'steal'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>

<span class="token number">8</span>.计算CPU irq中断时间的1分钟内百分比
<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">'irq'</span><span class="token punctuation">}</span><span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> / sum<span class="token punctuation">(</span>increase<span class="token punctuation">(</span>node_cpu_seconds_total<span class="token punctuation">[</span>1m<span class="token punctuation">]</span><span class="token punctuation">))</span> by <span class="token punctuation">(</span>instance<span class="token punctuation">))</span> * <span class="token number">100</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h3 id="_13-ubuntu部署grafana"><a href="#_13-ubuntu部署grafana" class="header-anchor">#</a> 13，ubuntu部署grafana</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>grafana是一款优秀的开源图形化展示界面，支持以Prometheus为数据源展示数据。

<span class="token number">1</span>.准备MySQL数据源 

<span class="token comment"># 一键自动安装docker</span>

<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># tar xf autoinstall-docker-docker-compose.tar.gz </span>

<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># ./install-docker.sh i</span>


<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># wget http://192.168.13.253/Resources/Docker/images/WordPress/mysql-v8.3.0-oracle.tar.gz</span>

<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># docker load  -i mysql-v8.3.0-oracle.tar.gz </span>


<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># docker run -d --network host --restart always -e MYSQL_ALLOW_EMPTY_PASSWORD=yes -e MYSQL_DATABASE=prometheus -e MYSQL_USER=grafana -e MYSQL_PASSWORD=123456 --name mysql-server mysql:8.3.0-oracle</span>

<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># docker container ls</span>
CONTAINER ID   IMAGE                COMMAND                  CREATED         STATUS         PORTS     NAMES
a9089ba64e52   mysql:8.3.0-oracle   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">8</span> seconds ago   Up <span class="token number">7</span> seconds             mysql-server
<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># </span>


<span class="token punctuation">[</span>root@prometheus-server31 ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it mysql-server mysql</span>
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">8</span>
Server version: <span class="token number">8.0</span>.36 MySQL Community Server - GPL

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2024</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">&gt;</span> SHOW DATABASES<span class="token punctuation">;</span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> mysql              <span class="token operator">|</span>
<span class="token operator">|</span> performance_schema <span class="token operator">|</span>
<span class="token operator">|</span> prometheus         <span class="token operator">|</span>
<span class="token operator">|</span> sys                <span class="token operator">|</span>
+--------------------+
<span class="token number">5</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> 
mysql<span class="token operator">&gt;</span> SHOW TABLES FROM prometheus<span class="token punctuation">;</span>
Empty <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> 
mysql<span class="token operator">&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">2</span>.安装grafana依赖库
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># apt-get install -y adduser libfontconfig1 musl</span>


<span class="token number">3</span>.下载grafana
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># wget https://dl.grafana.com/enterprise/release/grafana-enterprise_9.5.21_amd64.deb</span>



<span class="token number">4</span>.安装grafana 
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># dpkg -i grafana-enterprise_9.5.21_amd64.deb </span>


<span class="token number">5</span>.修改grafana的配置文件<span class="token punctuation">[</span>根据你的MySQL环境做修改即可<span class="token punctuation">]</span>
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/grafana/grafana.ini </span>
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>database<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
<span class="token builtin class-name">type</span> <span class="token operator">=</span> mysql
<span class="token function">host</span> <span class="token operator">=</span> <span class="token number">10.0</span>.0.31:3306
name <span class="token operator">=</span> prometheus
user <span class="token operator">=</span> grafana
password <span class="token operator">=</span> <span class="token number">123456</span>     


<span class="token number">6</span>.启动grafana 
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable --now grafana-server.service </span>
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># ss -ntl | grep 3000</span>
LISTEN <span class="token number">0</span>      <span class="token number">4096</span>               *:3000            *:*          
<span class="token punctuation">[</span>root@grafana51 ~<span class="token punctuation">]</span><span class="token comment"># </span>


<span class="token number">7</span>.访问grafana的WebUI
http://10.0.0.51:3000/


默认的用户名和密码均为: admin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><img src="/devops/public/assets/img/1731385890176.27ae70b9.png" alt="1731385890176"></p> <h3 id="_14-grafana配置prometheus数据源并展示数据"><a href="#_14-grafana配置prometheus数据源并展示数据" class="header-anchor">#</a> 14，grafana配置prometheus数据源并展示数据</h3> <p>默认首先项：</p> <p><img src="/devops/public/assets/img/1731386305569.5e22e836.png" alt="1731386305569"></p> <p><img src="/devops/public/assets/img/1731386312693.cfbf8bc9.png" alt="1731386312693"></p> <p>添加数据源：</p> <p><img src="/devops/public/assets/img/1731386396883.084ea33a.png" alt="1731386396883"></p> <p><img src="/devops/public/assets/img/1731386436384.b785f46e.png" alt="1731386436384"></p> <p><img src="/devops/public/assets/img/1731386524787.b3a9eeb2.png" alt="1731386524787"></p> <p><img src="/devops/public/assets/img/1731386539781.8b01248a.png" alt="1731386539781"></p> <p>创建一个新的仪表盘：</p> <p><img src="/devops/public/assets/img/1731386652437.a2246715.png" alt="1731386652437"></p> <p><img src="/devops/public/assets/img/1731386761942.70d790ce.png" alt="1731386761942"></p> <p><img src="/devops/public/assets/img/1731386812322.7416b8a7.png" alt="1731386812322"></p> <p><img src="/devops/public/assets/img/1731386842333.6370218b.png" alt="1731386842333"></p> <p><img src="/devops/public/assets/img/1731387091270.db86ccf7.png" alt="1731387091270"></p> <p><img src="/devops/public/assets/img/1731387135644.24f7c32a.png" alt="1731387135644"></p> <p><img src="/devops/public/assets/img/1731387199474.539c4a8d.png" alt="1731387199474"></p> <h3 id="_15-grafana的表格制作"><a href="#_15-grafana的表格制作" class="header-anchor">#</a> 15，grafana的表格制作</h3> <p>表格数据展示：</p> <p><img src="/devops/public/assets/img/1731387327165.a7a29189.png" alt="1731387327165"></p> <p><img src="/devops/public/assets/img/1731387534131.bfad744f.png" alt="1731387534131"></p> <p>配置Transform(转换)</p> <p><img src="/devops/public/assets/img/1731387648308.88c0384c.png" alt="1731387648308"></p> <p>添加Overrides(覆盖)属性</p> <p><img src="/devops/public/assets/img/1731387808859.dcca6459.png" alt="1731387808859"></p> <p><img src="/devops/public/assets/img/1731388319474.5e75ecb0.png" alt="1731388319474"></p> <p><img src="/devops/public/assets/img/1731388392875.4340f0ac.png" alt="1731388392875"></p> <p><img src="/devops/public/assets/img/1731388448560.a99b31ea.png" alt="1731388448560"></p> <p><img src="/devops/public/assets/img/1731388579782.2ad7fc96.png" alt="1731388579782"></p> <p><img src="/devops/public/assets/img/1731388720452.e28b4bda.png" alt="1731388720452"></p> <p><img src="/devops/public/assets/img/1731388835264.4b4b4aa9.png" alt="1731388835264"></p> <p><img src="/devops/public/assets/img/1731388937403.d6dde3a8.png" alt="1731388937403"></p> <p><img src="/devops/public/assets/img/1731389042382.0b0d07d1.png" alt="1731389042382"></p> <p><img src="/devops/public/assets/img/1731389912495.8fa436f6.png" alt="1731389912495"></p> <h3 id="_16-grafana主题-背景色设备"><a href="#_16-grafana主题-背景色设备" class="header-anchor">#</a> 16，grafana主题，背景色设备</h3> <p><img src="/devops/public/assets/img/1731390011280.608a3eb0.png" alt="1731390011280"></p> <p><img src="/devops/public/assets/img/1731390043773.fb9a8b94.png" alt="1731390043773"></p> <p><img src="data:image/png;base64,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AAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwvn/L0P9SZk1cLQAAAAASUVORK5CYII=" alt="1731390070437"></p> <p><img src="/devops/public/assets/img/1731390166530.b90f9f76.png" alt="1731390166530"></p> <h3 id="_17-grafana变量的使用"><a href="#_17-grafana变量的使用" class="header-anchor">#</a> 17，grafana变量的使用</h3> <p><img src="/devops/public/assets/img/1731392722554.47c6733c.png" alt="1731392722554"></p> <p><img src="/devops/public/assets/img/1731392758490.668bf716.png" alt="1731392758490"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>grafana常用的变量类型包括但不限于:
	- Query:
		动态查询的类型。
	
	- Custom:
		用户自定义的字符串。
		
	- Data source:
		数据源。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>custom变量类型定义：</p> <p><img src="/devops/public/assets/img/1731393353228.85956466.png" alt="1731393353228"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>可以使用自定义变量，至于变量的具体字符串，我们可以自行定义，比如: system,user,idle

定义好变量可以直接在grafana中进行引用，对应的PromQL语句: node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${custom_cpu_mode}</span>&quot;</span><span class="token punctuation">}</span>

上面设置好变量后，一定要保存。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/devops/public/assets/img/1731393710633.6fb2f8f4.png" alt="1731393710633"></p> <p><img src="/devops/public/assets/img/1731393763374.63fd54f6.png" alt="1731393763374"></p> <p>qeury变量类型定义：</p> <p><img src="/devops/public/assets/img/1731394112447.af93e6ce.png" alt="1731394112447"></p> <p><img src="/devops/public/assets/img/1731394124797.d5ef9fee.png" alt="1731394124797"></p> <p><img src="/devops/public/assets/img/1731394132824.e49c7303.png" alt="1731394132824"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>我们可以配置Query Type类型选择<span class="token string">&quot;Label values&quot;</span>，而后安装步骤依次配置:
	- Label标签选择器基于mode过滤。
	- 如果还过滤不出来更详细的可以使用Metric进行再次筛选。
	- 如果还要进一步筛选，可以定义Regex，比如<span class="token string">&quot;i.*&quot;</span>表示以i开头的mode，符合结果的仅有<span class="token string">&quot;idle&quot;</span>,<span class="token string">&quot;iowait&quot;</span>,<span class="token string">&quot;irq&quot;</span>等。
	
使用变量展示后的效果，对应的PromQL语句: node_cpu_seconds_total<span class="token punctuation">{</span>mode<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${query_cpu_mode}</span>&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/devops/public/assets/img/1731394242359.701b8549.png" alt="1731394242359"></p> <p><img src="/devops/public/assets/img/1731394250451.00f4e8e7.png" alt="1731394250451"></p> <p>案例： 查询集群的总内存</p> <p><img src="/devops/public/assets/img/1731394564709.b1655cfc.png" alt="1731394564709"></p> <p><img src="/devops/public/assets/img/1731394604996.584d5dad.png" alt="1731394604996"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>我们定义一个<span class="token string">&quot;instance&quot;</span>变量，并勾选<span class="token string">&quot;Multi-value&quot;</span>选项。
我们就可以选择多个主机的信息进行查看啦~对应的PromQL语句: node_memory_MemTotal_bytes<span class="token punctuation">{</span>instance<span class="token operator">=~</span><span class="token string">&quot;<span class="token variable">${instance}</span>&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/devops/public/assets/img/1731394725790.d87770aa.png" alt="1731394725790"></p> <p>统计使用内存使用率：</p> <p><img src="/devops/public/assets/img/1731394788309.9a7b0856.png" alt="1731394788309"></p> <p>变量的嵌套：</p> <p><img src="/devops/public/assets/img/1731394832543.dbe352e7.png" alt="1731394832543"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>我们定义device变量，引用了instance变量。

当我们修改了instance变量时，对应的device的网卡设备可能也会随之变化哟~
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/devops/public/assets/img/1731394869480.32262037.png" alt="1731394869480"></p> <h3 id="_18-导入第三方模板"><a href="#_18-导入第三方模板" class="header-anchor">#</a> 18，导入第三方模板</h3> <p><img src="/devops/public/assets/img/1731395187127.4a077bfb.png" alt="1731395187127"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>参考链接:https://grafana.com/grafana/dashboards/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/devops/public/assets/img/1731395245843.6697f990.png" alt="1731395245843"></p> <p><img src="/devops/public/assets/img/1731395257217.582ff6fb.png" alt="1731395257217"></p> <p><img src="/devops/public/assets/img/1731395344182.4fa5c90a.png" alt="1731395344182"></p> <p><img src="/devops/public/assets/img/1731395363392.285026f6.png" alt="1731395363392"></p> <h3 id="_19-本地grafana的dashboard备份和恢复"><a href="#_19-本地grafana的dashboard备份和恢复" class="header-anchor">#</a> 19，本地grafana的dashboard备份和恢复</h3> <p><img src="/devops/public/assets/img/1731394934452.81cb6bba.png" alt="1731394934452"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dashboard导出相当于备份，而且也可以给其他人共享。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/devops/public/assets/img/1731394998267.1bc6e088.png" alt="1731394998267"></p> <p><img src="/devops/public/assets/img/1731395029361.06a52583.png" alt="1731395029361"></p> <h3 id="_20-grafana基于dashboard实现角色访问控制"><a href="#_20-grafana基于dashboard实现角色访问控制" class="header-anchor">#</a> 20，grafana基于dashboard实现角色访问控制</h3> <p>参考：https://www.cnblogs.com/yinzhengjie/p/18536246</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_1-面试题" class="sidebar-link reco-side-_1-面试题" data-v-b57cc07c>1，面试题</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_2-prometheus概述" class="sidebar-link reco-side-_2-prometheus概述" data-v-b57cc07c>2，prometheus概述</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_3-prometheus安装" class="sidebar-link reco-side-_3-prometheus安装" data-v-b57cc07c>3，Prometheus安装</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_4-prometheus-server一键部署脚本" class="sidebar-link reco-side-_4-prometheus-server一键部署脚本" data-v-b57cc07c>4，Prometheus server一键部署脚本</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_5-二进制部署node-exporter" class="sidebar-link reco-side-_5-二进制部署node-exporter" data-v-b57cc07c>5，二进制部署node-exporter</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_6-node-exporter配置模块黑白名单" class="sidebar-link reco-side-_6-node-exporter配置模块黑白名单" data-v-b57cc07c>6，node-exporter配置模块黑白名单</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_7-node-exporter一键部署" class="sidebar-link reco-side-_7-node-exporter一键部署" data-v-b57cc07c>7，node_exporter一键部署</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_8-prometheus监控node-exporter" class="sidebar-link reco-side-_8-prometheus监控node-exporter" data-v-b57cc07c>8，Prometheus监控node-exporter</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_9-prometheus-metrics-type" class="sidebar-link reco-side-_9-prometheus-metrics-type" data-v-b57cc07c>9，prometheus metrics type</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_10-promql语句初体验" class="sidebar-link reco-side-_10-promql语句初体验" data-v-b57cc07c>10，PromQL语句初体验</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_11-prometheus常用的函数" class="sidebar-link reco-side-_11-prometheus常用的函数" data-v-b57cc07c>11，Prometheus常用的函数</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_12-统计各个节点cpu的使用率" class="sidebar-link reco-side-_12-统计各个节点cpu的使用率" data-v-b57cc07c>12，统计各个节点CPU的使用率</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_13-ubuntu部署grafana" class="sidebar-link reco-side-_13-ubuntu部署grafana" data-v-b57cc07c>13，ubuntu部署grafana</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_14-grafana配置prometheus数据源并展示数据" class="sidebar-link reco-side-_14-grafana配置prometheus数据源并展示数据" data-v-b57cc07c>14，grafana配置prometheus数据源并展示数据</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_15-grafana的表格制作" class="sidebar-link reco-side-_15-grafana的表格制作" data-v-b57cc07c>15，grafana的表格制作</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_16-grafana主题-背景色设备" class="sidebar-link reco-side-_16-grafana主题-背景色设备" data-v-b57cc07c>16，grafana主题，背景色设备</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_17-grafana变量的使用" class="sidebar-link reco-side-_17-grafana变量的使用" data-v-b57cc07c>17，grafana变量的使用</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_18-导入第三方模板" class="sidebar-link reco-side-_18-导入第三方模板" data-v-b57cc07c>18，导入第三方模板</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_19-本地grafana的dashboard备份和恢复" class="sidebar-link reco-side-_19-本地grafana的dashboard备份和恢复" data-v-b57cc07c>19，本地grafana的dashboard备份和恢复</a></li><li class="level-3" data-v-b57cc07c><a href="/devops/public/blogs/devops/52-prometheus/prometheus.html#_20-grafana基于dashboard实现角色访问控制" class="sidebar-link reco-side-_20-grafana基于dashboard实现角色访问控制" data-v-b57cc07c>20，grafana基于dashboard实现角色访问控制</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/devops/public/assets/js/app.7d569ec8.js" defer></script><script src="/devops/public/assets/js/118.ceed6ab6.js" defer></script><script src="/devops/public/assets/js/1.774fca24.js" defer></script><script src="/devops/public/assets/js/64.d2520c76.js" defer></script>
  </body>
</html>
