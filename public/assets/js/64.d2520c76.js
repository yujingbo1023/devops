(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{14948:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"_1-面试题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-面试题"}},[s._v("#")]),s._v(" 1，面试题")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Q75:docker和containerd的区别?最少说出3种。\n    相同点:\n    不同点:\n    \nQ76:你了解过哪些容器管理工具?最少说出3种，\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n    containerd\n    rkt\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("podman")]),s._v("\n    pouch\n    \nQ77:简单陈述下SQL和NOSQL的区别并举例3种你使用过的产品?\n\n\nQ78:keepalived使用的是啥协议?简述下VRRP协议的工作原理?\n\n\nQ79:简单陈述下TCP三次握手的原理?四次断开原理?\n\n\nQ80:为什么建立TCP要3次握手，断开链接要4次呢?请说明原因?\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("环境准备: \n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.31 prometheus-server31 \n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" core 2GB+\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.32 prometheus-server32 \n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" core 1GB+\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.33 prometheus-server33\n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" core 1GB+\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.41 node-exporter41 \n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" core 1GB+\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.42 node-exporter42 \n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" core 1GB+\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.43 node-exporter43\n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" core 1GB+\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.51 grafana51\n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" core 2GB+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"_2-prometheus概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-prometheus概述"}},[s._v("#")]),s._v(" 2，prometheus概述")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("官网地址:\n\thttps://prometheus.io/\n\t\ngithub地址:\n\thttps://github.com/prometheus/prometheus\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7212),alt:"1731335464480"}})]),s._v(" "),t("h3",{attrs:{id:"_3-prometheus安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-prometheus安装"}},[s._v("#")]),s._v(" 3，Prometheus安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".下载Prometheus server \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://github.com/prometheus/prometheus/releases/download/v2.53.3/prometheus-2.53.3.linux-amd64.tar.gz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll prometheus-2.53.3.linux-amd64.tar.gz ")]),s._v("\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("104207826")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":43 prometheus-2.53.3.linux-amd64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".创建工作目录\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir -pv /malu/softwares")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".解压软件包 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xf prometheus-2.53.3.linux-amd64.tar.gz -C /malu/softwares")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".启动Prometheus server \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /malu/softwares/prometheus-2.53.3.linux-amd64/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 prometheus-2.53.3.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("261344")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":37 ./\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 08:55 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":35 console_libraries/\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":35 consoles/\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11357")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":35 LICENSE\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3773")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":35 NOTICE\n-rwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("137839708")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":19 prometheus*\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("934")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":35 prometheus.yml\n-rwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" colord "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("129729365")]),s._v(" Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":19 promtool*\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 prometheus-2.53.3.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./prometheus ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".访问Prometheus的WebUI\nhttp://10.0.0.31:9090/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7213),alt:"1731373054853"}})]),s._v(" "),t("h3",{attrs:{id:"_4-prometheus-server一键部署脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-prometheus-server一键部署脚本"}},[s._v("#")]),s._v(" 4，Prometheus server一键部署脚本")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".停止原有的二进制部署环境并移除环境\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /malu/")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".下载安装脚本\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll install-prometheus-server.zip ")]),s._v("\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103863672")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 09:00 install-prometheus-server.zip\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".解压软件包 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# unzip install-prometheus-server.zip ")]),s._v("\nArchive:  install-prometheus-server.zip\n   creating: install-prometheus-server/\n   creating: install-prometheus-server/download/\n  inflating: install-prometheus-server/download/prometheus-2.53.3.linux-amd64.tar.gz  \n  inflating: install-prometheus-server/install-prometheus-server.sh  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd install-prometheus-server/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 install-prometheus-server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 08:58 ./\ndrwx------ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 09:05 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 08:59 download/\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2538")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 09:00 install-prometheus-server.sh\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 install-prometheus-server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".部署Prometheus-server \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 install-prometheus-server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod +x install-prometheus-server.sh ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 install-prometheus-server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./install-prometheus-server.sh i")]),s._v("\nCreated symlink /etc/systemd/system/multi-user.target.wants/prometheus-server.service → /etc/systemd/system/prometheus-server.service.\n● prometheus-server.service - malu Linux  Prometheus Server\n     Loaded: loaded "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/etc/systemd/system/prometheus-server.service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     Active: active "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Tue "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-12 09:06:45 CST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 10ms ago\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".访问Prometheus的WebUI\nhttp://10.0.0.31:9090/targets\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7214),alt:"1731373640504"}})]),s._v(" "),t("p",[s._v("脚本内容：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.53")]),s._v(".3\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SOFTWARE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prometheus-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${VERSION}")]),s._v(".linux-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ARCH}")]),s._v(".tar.gz\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://github.com/prometheus/prometheus/releases/download/v"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${VERSION}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DOWNLOAD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./download\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("INSTALLDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/malu/softwares\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BASEDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${INSTALLDIR}")]),s._v("/prometheus-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${VERSION}")]),s._v(".linux-amd64\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATADIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/malu/data/prometheus\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOGDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/malu/logs/prometheus\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOSTIP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("prepare")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断目录是否存在，若不存在则创建")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$INSTALLDIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${INSTALLDIR}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DOWNLOAD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DATADIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATADIR}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOGDIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LOGDIR}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/os-release\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断系统是否安装wget")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /usr/bin/wget "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断文件是否存在，若不存在则下载")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("deploy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查环境")]),s._v("\n  prepare\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件软件包")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${INSTALLDIR}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成启动脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/systemd/system/prometheus-server.service "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\n[Unit]\nDescription=malu Linux  Prometheus Server\nDocumentation=https://prometheus.io/docs/introduction/overview/\nAfter=network.target\n\n[Service]\nRestart=on-failure\nExecStart=/bin/bash -c "'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BASEDIR}")]),s._v("/prometheus \\\n     --config.file="),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BASEDIR}")]),s._v("/prometheus.yml \\\n\t --web.enable-lifecycle \\\n\t --storage.tsdb.path="),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATADIR}")]),s._v(" \\\n\t --storage.tsdb.retention.time=60d  \\\n\t --web.listen-address="),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOSTIP}")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PORT}")]),s._v("  \\\n\t --web.max-connections=65535  \\\n\t --storage.tsdb.retention.size=512MB \\\n\t --query.timeout=10s \\\n\t --query.max-concurrency=20 \\\n\t --log.level=info \\\n\t --log.format=json \\\n\t --web.read-timeout=5m &>> "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LOGDIR}")]),s._v('/prometheus-server.log"\nExecReload=/bin/kill -HUP \\'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\nLimitNOFILE=65535\n\n[Install]\nWantedBy=multi-user.target\nEOF")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将服务设置为开机自启动")]),s._v("\n  systemctl daemon-reload\n  systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--now")]),s._v(" prometheus-server\n  systemctl status prometheus-server\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("\n  ss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ntl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PORT}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  systemctl disable "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--now")]),s._v(" prometheus-server.service\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/systemd/system/node-exporter.service "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BASEDIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DATADIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOGDIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" \n    deploy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      deploy\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")]),s._v("}")]),s._v(' 的prometheus-server 已经部署成功![successfully]"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    delete"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      delete\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")]),s._v("}")]),s._v(' 的prometheus-server 已经卸载成功,期待下次使用~"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' deploy[i]|delete[r]"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nmain "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br")])]),t("h3",{attrs:{id:"_5-二进制部署node-exporter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-二进制部署node-exporter"}},[s._v("#")]),s._v(" 5，二进制部署node-exporter")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_exporter的作用：\n\t可以暴露Linux服务器的指标，可以采集CPU，内存，磁盘，网络等一系列使用情况，基于http协议暴露到外端。\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".下载node-exporter\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll node_exporter-1.8.2.linux-amd64.tar.gz ")]),s._v("\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10676343")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":55 node_exporter-1.8.2.linux-amd64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".创建工作目录 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir -pv /malu/softwares")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".解压node-exporter\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xf node_exporter-1.8.2.linux-amd64.tar.gz -C /malu/softwares/")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".启动node-exporter \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /malu/softwares/node_exporter-1.8.2.linux-amd64/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 node_exporter-1.8.2.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 node_exporter-1.8.2.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20048")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":58 ./\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":29 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11357")]),s._v(" Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":57 LICENSE\n-rwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20500541")]),s._v(" Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":54 node_exporter*\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("463")]),s._v(" Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":57 NOTICE\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 node_exporter-1.8.2.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 node_exporter-1.8.2.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./node_exporter ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".测试验证\nhttp://10.0.0.41:9100/metrics\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7215),alt:"1731373956079"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7216),alt:"1731337202518"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("参考格式说明:\n   TYPE:\n   \t表示metric的数据类型。\n   HELP:\n   \t表示metric帮助信息。\n   metric:\n   \t具体的指标\n   标签:\n   \t给指标打标签，起到标识性作用。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_6-node-exporter配置模块黑白名单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-node-exporter配置模块黑白名单"}},[s._v("#")]),s._v(" 6，node-exporter配置模块黑白名单")]),s._v(" "),t("p",[s._v("这是一个面试题。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".默认启用，禁用的指标:\nhttps://github.com/prometheus/node_exporter?tab"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("readme-ov-file"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#enabled-by-default")]),s._v("\n\nhttps://github.com/prometheus/node_exporter?tab"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("readme-ov-file"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#disabled-by-default")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".模块白名单\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 node_exporter-1.8.2.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./node_exporter --collector.cpu --collector.uname --collector.disable-defaults")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.052Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter.go:193 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting node_exporter"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"(version=1.8.2, branch=HEAD, revision=f1e0e8360aa60b6cb5e5cc1560bed348fc2c1895)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.052Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter.go:194 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Build context"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("build_context")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"(go=go1.22.5, platform=linux/amd64, user=root@03d440803209, date=20240714-11:53:45, tags=unknown)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.052Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter.go:196 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("warn "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Node Exporter is running as root user. This exporter is designed to run as unprivileged user, root is not required."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.053Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter.go:111 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Enabled collectors"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.053Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter.go:118 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("collector")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cpu\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.053Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter.go:118 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("collector")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uname\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.053Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tls_config.go:313 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Listening on"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":9100\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-11T02:51:24.053Z "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("caller")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tls_config.go:316 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TLS is disabled."')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("http2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":9100\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".模块黑名单\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 node_exporter-1.8.2.linux-amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./node_exporter --no-collector.cpu")]),s._v("\n\n注意，只需要将"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--no-collector.MODULE"')]),s._v("，将NAME换成你需要禁用的模块即可。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"_7-node-exporter一键部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-node-exporter一键部署"}},[s._v("#")]),s._v(" 7，node_exporter一键部署")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".删除二进制部署的环境\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /malu/")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".下载node-exporter\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll install-node-exporter.tar.gz ")]),s._v("\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10661440")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":55 install-node-exporter.tar.gz\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".解压软件包 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xf install-node-exporter.tar.gz")]),s._v("\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".安装node-exporter\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter41 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./install-node-exporter.sh i")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".访问WebUI\nhttp://10.0.0.41:9100/metrics\n\n\n温馨提示:\n\t将41-43节点都安装上node-exporter\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7217),alt:"1731374535749"}})]),s._v(" "),t("p",[s._v("42，43节点同样操作：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7218),alt:"1731374786364"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7219),alt:"1731374796672"}})]),s._v(" "),t("p",[s._v("脚本内容：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),s._v(".2\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SOFTWARE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_exporter-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${VERSION}")]),s._v(".linux-amd64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://github.com/prometheus/node_exporter/releases/download/v"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${VERSION}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DOWNLOAD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./download\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("INSTALLDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/malu/softwares\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BASEDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${INSTALLDIR}")]),s._v("/node_exporter-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${VERSION}")]),s._v(".linux-amd64\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("prepare")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断目录是否存在，若不存在则创建")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$INSTALLDIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-pv")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${INSTALLDIR}")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DOWNLOAD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-pv")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("\n   \n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断系统是否安装curl")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /usr/bin/wget "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断文件是否存在，若不存在则下载")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("install")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查环境")]),s._v("\n  prepare\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件软件包")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DOWNLOAD}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SOFTWARE}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${INSTALLDIR}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成启动脚本")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/systemd/system/node-exporter.service "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n[Unit]\nDescription=Malu Linux Node Exporter\nDocumentation=https://prometheus.io/docs/introduction/overview/\nAfter=network.target\n\n[Service]\nExecStart="),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BASEDIR}")]),s._v('/node_exporter --web.telemetry-path="/metrics" \\\n   --web.listen-address='),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOST}")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PORT}")]),s._v("\n\n\n[Install]\nWantedBy=multi-user.target\nEOF")]),s._v("\n\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将服务设置为开机自启动")]),s._v("\n     systemctl daemon-reload\n     systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--now")]),s._v(" node-exporter.service\n     systemctl status node-exporter.service\n     ss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ntl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("remove")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  systemctl disable "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--now")]),s._v(" node-exporter.service\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/systemd/system/node-exporter.service "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BASEDIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" \n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${hostname}")]),s._v(' 的node-exporter 已经部署成功![successfully]"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    remove"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      remove\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${hostname}")]),s._v(' 的node-exporter 已经卸载成功,期待下次使用~"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' install[i]|remove[r]"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nmain "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br")])]),t("h3",{attrs:{id:"_8-prometheus监控node-exporter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-prometheus监控node-exporter"}},[s._v("#")]),s._v(" 8，Prometheus监控node-exporter")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".修改Prometheus的配置文件 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /malu/softwares/prometheus-2.53.3.linux-amd64/prometheus.yml ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局配置")]),s._v("\nglobal:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采集目标(targets)的时间间隔")]),s._v("\n  scrape_interval: 3s\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 抓取配置")]),s._v("\nscrape_configs:\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n   \n   - job_name: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"malu-node-exporter"')]),s._v("\n     metrics_path: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/metrics"')]),s._v("\n     scheme: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http"')]),s._v("\n     static_configs:\n       - targets: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.41:9100"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.43:9100"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("     \n\t   \n\t   \n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".重新加载配置 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl -X POST 10.0.0.31:9090/-/reload")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".访问WebUI验证 \nhttp://10.0.0.31:9090/targets\nhttp://10.0.0.31:9090/config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7220),alt:"1731375628224"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7221),alt:"1731375662445"}})]),s._v(" "),t("h3",{attrs:{id:"_9-prometheus-metrics-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-prometheus-metrics-type"}},[s._v("#")]),s._v(" 9，prometheus metrics type")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("prometheus监控中采集过来的数据统一称为Metrics数据，其并不是代表具体的数据格式，而是一种统计度量计算单位。\n\n当我们需要为某个系统或者某个服务做监控时，就需要使用到metrics。\n\nprometheus支持的metrics包括但不限于以下几种数据类型:\nguage:\n最简单的度量指标，只是一个简单的返回值，或者叫瞬时状态。\n比如说统计硬盘，内存等使用情况。\n\ncounter:\n就是一个计数器，从数据量0开始累积计算，在理想情况下，只能是永远的增长，不会降低"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("有特殊情况，比如粉丝量"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n比如统计1小时，1天，1周，1一个月的用户访问量，这就是一个累加的操作。\n\nhistogram:\n是统计数据的分布情况，比如最小值，最大值，中间值，中位数等，代表的是一种近似百分比估算数值。\n通过histograms可以分别统计处在一个时间段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("1s,2s,5s,10s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("内nginx访问用户的响应时间。\n\nsummary:\nsummary是histograms的扩展类型，主要弥补histograms不足。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"_10-promql语句初体验"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-promql语句初体验"}},[s._v("#")]),s._v(" 10，PromQL语句初体验")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("up\n\t判断一个被监控目标是否存活，若存活则为1，若不存或则为0。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7222),alt:"1731380451418"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_load5-0\n\t查询5分钟内的负载，不显示metrics。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7223),alt:"1731380435537"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    基于标签过滤，查询10.0.0.42节点的CPU信息。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7224),alt:"1731380525073"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v(",mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t可以定义多个过滤参数，使用逗号分隔即可。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7225),alt:"1731380567725"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(",mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t表示查询CPU不等于"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v("的模式。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7226),alt:"1731380612816"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(",mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"i.*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\t\n\t支持基于正则匹配我们需要的数据，表示查询以i开头的所有模式。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7227),alt:"1731380646168"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(",mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("~"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"i.*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t取反效果，表示查询不以i开头的所有模式。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7228),alt:"1731380676944"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(",mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("10s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t表示查询10s内CPU采集的数据信息。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7229),alt:"1731380709402"}})]),s._v(" "),t("h3",{attrs:{id:"_11-prometheus常用的函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-prometheus常用的函数"}},[s._v("#")]),s._v(" 11，Prometheus常用的函数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("官方文档:\n\t https://prometheus.io/docs/prometheus/2.53/querying/functions/\n\t \n实验环境准备:\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter42 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt -y install stress")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter42 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-exporter42 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stress --cpu 8 --io 4 --vm 2 --vm-bytes 128M --timeout 20m")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("increase函数:\n\t用来针对counter数据类型，截取其中一段时间总的增量。\n\t\n举个例子:\n\tincrease"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("instance")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t统计1分钟内，使用标签过滤器查看"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v("节点的第0颗CPU，空闲状态使用的总时间增量。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7230),alt:"1731381195440"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("sum函数:\n\t加和的作用。\n\t\n举个例子:\n\tsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n\t\t统计1分钟内，使用标签过滤器查看所有节点的第0颗CPU，空闲状态使用的总时间增量，并将返回结果累加。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7231),alt:"1731381442798"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("avg函数:\n\t求平均值。\n\t\n\tavg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7232),alt:"1731381456259"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("max函数:\n\t求最大值。\n\tmax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7233),alt:"1731381470918"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("min:\n\t求最小值。\n\tmin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7234),alt:"1731381484638"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("by函数:\n\t将数据进行分组，类似于MySQL的"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GROUP BY"')]),s._v("。\n\t\n举个例子:\n\tsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t统计1分钟内，使用标签过滤器查看CPU空闲状态，并将结果进行累加，基于instance进行分组。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7235),alt:"1731381511504"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rate函数:\n\t它的功能是按照设置的时间段，取counter在这个时间段中平均每秒的增量。\n\t\n举个例子:\n\trate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(",cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("instance")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t统计1分钟内，使用标签过滤器查看"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.42:9100"')]),s._v("节点的第0颗CPU，空闲状态使用的每秒的增量。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7236),alt:"1731381550818"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("increase和rate如何选择:\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("对于采集数据频率较低的场景建议使用increase函数，因为使用rate函数可能会出现断点,比如针对硬盘容量监控。\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("对于采集数据频率较高的场景建议使用rate函数，比如针对CPU，内存，网络流量等都是可以基于rate函数来采集等。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("topk函数:\n\t取前几位的最高值，实际使用的时候一般会用该函数进行瞬时报警，而不是为了观察曲线图。\n\t\n举个例子:\n\ttopk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", rate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n\t\t统计1分钟内，使用标签过滤器查看CPU，所有状态使用的每秒的增量，只查看前3个节点。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7237),alt:"1731381642142"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("count函数:\n\t把数值符合条件的，输出数目进行累加加和。\n\t比如说企业中有100台服务器，如果只有10台服务器CPU使用率高于80%时候是不需要报警的，但是数量超过70台时就需要报警了。\n\t\n举个例子:\n\tcount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("malu_tcp_wait_conn "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n\t\t假设malu_tcp_wait_conn是咱们自定义的KEY。\n\t\t若TCP等待数量大于500的机器数量就判断条件为真。\n\n\tcount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(",mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n\t\t对统计的结果进行计数。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7238),alt:"1731381765306"}})]),s._v(" "),t("h3",{attrs:{id:"_12-统计各个节点cpu的使用率"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-统计各个节点cpu的使用率"}},[s._v("#")]),s._v(" 12，统计各个节点CPU的使用率")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".我们需要先找到CPU相关的KEY\nnode_cpu_seconds_total\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".过滤出CPU的空闲时间"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("和全部CPU的时间"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{}'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnode_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t过滤CPU的空闲时间。\nnode_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t此处的"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{}'")]),s._v("可以不写，因为里面没有任何参数，代表获取CPU的所有状态时间。\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".统计1分钟内CPU的增量时间\nincrease"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t统计1分钟内CPU空闲状态的增量。\nincrease"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t统计1分钟内CPU所有状态的增量。\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".将结果进行加和统计\nsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n\t将1分钟内所有CPU空闲时间的增量进行加和计算。\nsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n\t将1分钟内所有CPU空闲时间的增量进行加和计算。\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".按照不同节点进行分组\nsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t将1分钟内所有CPU空闲时间的增量进行加和计算，并按照机器实例进行分组。\nsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t将1分钟内所有CPU空闲时间的增量进行加和计算，并按照机器实例进行分组。\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".计算1分钟内CPU空闲时间的百分比\nsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".统计1分钟内CPU的使用率，计算公式: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - CPU空闲时间的百分比"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%。\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".统计1小时内CPU的使用率，计算公式: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - CPU空闲时间的百分比"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%。\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n\n\n\n最终结果:\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".计算CPU一分钟内的使用率\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'idle'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 计算CPU用户态的1分钟内百分比\nsum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 计算CPU内核态的1分钟内百分比\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 计算CPU IO等待时间的1分钟内百分比\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'iowait'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".计算CPU nice时间的1分钟内百分比\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nice'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".计算CPU softirq软中断时间的1分钟内百分比\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'softirq'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".计算CPU steal虚拟机CPU时间被物理机偷走时间的1分钟内百分比\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'steal'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".计算CPU irq中断时间的1分钟内百分比\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'irq'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" / sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("increase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br")])]),t("h3",{attrs:{id:"_13-ubuntu部署grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-ubuntu部署grafana"}},[s._v("#")]),s._v(" 13，ubuntu部署grafana")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("grafana是一款优秀的开源图形化展示界面，支持以Prometheus为数据源展示数据。\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".准备MySQL数据源 \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一键自动安装docker")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xf autoinstall-docker-docker-compose.tar.gz ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./install-docker.sh i")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget http://192.168.13.253/Resources/Docker/images/WordPress/mysql-v8.3.0-oracle.tar.gz")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker load  -i mysql-v8.3.0-oracle.tar.gz ")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --network host --restart always -e MYSQL_ALLOW_EMPTY_PASSWORD=yes -e MYSQL_DATABASE=prometheus -e MYSQL_USER=grafana -e MYSQL_PASSWORD=123456 --name mysql-server mysql:8.3.0-oracle")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker container ls")]),s._v("\nCONTAINER ID   IMAGE                COMMAND                  CREATED         STATUS         PORTS     NAMES\na9089ba64e52   mysql:8.3.0-oracle   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" seconds             mysql-server\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@prometheus-server31 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it mysql-server mysql")]),s._v("\nWelcome to the MySQL monitor.  Commands end with "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("g.\nYour MySQL connection "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nServer version: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".36 MySQL Community Server - GPL\n\nCopyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v(", Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'help;'")]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\h'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" help. Type "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\c'")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),s._v(" the current input statement.\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SHOW DATABASES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n+--------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Database           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" information_schema "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" performance_schema "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" prometheus         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sys                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------+\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" rows "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SHOW TABLES FROM prometheus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nEmpty "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".安装grafana依赖库\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-get install -y adduser libfontconfig1 musl")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".下载grafana\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://dl.grafana.com/enterprise/release/grafana-enterprise_9.5.21_amd64.deb")]),s._v("\n\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".安装grafana \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dpkg -i grafana-enterprise_9.5.21_amd64.deb ")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".修改grafana的配置文件"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("根据你的MySQL环境做修改即可"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/grafana/grafana.ini ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.31:3306\nname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" prometheus\nuser "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" grafana\npassword "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("     \n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".启动grafana \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl enable --now grafana-server.service ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -ntl | grep 3000")]),s._v("\nLISTEN "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("               *:3000            *:*          \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@grafana51 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".访问grafana的WebUI\nhttp://10.0.0.51:3000/\n\n\n默认的用户名和密码均为: admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7239),alt:"1731385890176"}})]),s._v(" "),t("h3",{attrs:{id:"_14-grafana配置prometheus数据源并展示数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-grafana配置prometheus数据源并展示数据"}},[s._v("#")]),s._v(" 14，grafana配置prometheus数据源并展示数据")]),s._v(" "),t("p",[s._v("默认首先项：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7240),alt:"1731386305569"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7241),alt:"1731386312693"}})]),s._v(" "),t("p",[s._v("添加数据源：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7242),alt:"1731386396883"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7243),alt:"1731386436384"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7244),alt:"1731386524787"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7245),alt:"1731386539781"}})]),s._v(" "),t("p",[s._v("创建一个新的仪表盘：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7246),alt:"1731386652437"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7247),alt:"1731386761942"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7248),alt:"1731386812322"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7249),alt:"1731386842333"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7250),alt:"1731387091270"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7251),alt:"1731387135644"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7252),alt:"1731387199474"}})]),s._v(" "),t("h3",{attrs:{id:"_15-grafana的表格制作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15-grafana的表格制作"}},[s._v("#")]),s._v(" 15，grafana的表格制作")]),s._v(" "),t("p",[s._v("表格数据展示：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7253),alt:"1731387327165"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7254),alt:"1731387534131"}})]),s._v(" "),t("p",[s._v("配置Transform(转换)")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7255),alt:"1731387648308"}})]),s._v(" "),t("p",[s._v("添加Overrides(覆盖)属性")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7256),alt:"1731387808859"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7257),alt:"1731388319474"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7258),alt:"1731388392875"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7259),alt:"1731388448560"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7260),alt:"1731388579782"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7261),alt:"1731388720452"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7262),alt:"1731388835264"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7263),alt:"1731388937403"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7264),alt:"1731389042382"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7265),alt:"1731389912495"}})]),s._v(" "),t("h3",{attrs:{id:"_16-grafana主题-背景色设备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_16-grafana主题-背景色设备"}},[s._v("#")]),s._v(" 16，grafana主题，背景色设备")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7266),alt:"1731390011280"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7267),alt:"1731390043773"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7268),alt:"1731390070437"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7269),alt:"1731390166530"}})]),s._v(" "),t("h3",{attrs:{id:"_17-grafana变量的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-grafana变量的使用"}},[s._v("#")]),s._v(" 17，grafana变量的使用")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7270),alt:"1731392722554"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7271),alt:"1731392758490"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("grafana常用的变量类型包括但不限于:\n\t- Query:\n\t\t动态查询的类型。\n\t\n\t- Custom:\n\t\t用户自定义的字符串。\n\t\t\n\t- Data source:\n\t\t数据源。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("custom变量类型定义：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7272),alt:"1731393353228"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("可以使用自定义变量，至于变量的具体字符串，我们可以自行定义，比如: system,user,idle\n\n定义好变量可以直接在grafana中进行引用，对应的PromQL语句: node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${custom_cpu_mode}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n上面设置好变量后，一定要保存。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7273),alt:"1731393710633"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7274),alt:"1731393763374"}})]),s._v(" "),t("p",[s._v("qeury变量类型定义：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7275),alt:"1731394112447"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7276),alt:"1731394124797"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7277),alt:"1731394132824"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("我们可以配置Query Type类型选择"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Label values"')]),s._v("，而后安装步骤依次配置:\n\t- Label标签选择器基于mode过滤。\n\t- 如果还过滤不出来更详细的可以使用Metric进行再次筛选。\n\t- 如果还要进一步筛选，可以定义Regex，比如"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"i.*"')]),s._v("表示以i开头的mode，符合结果的仅有"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idle"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"iowait"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"irq"')]),s._v("等。\n\t\n使用变量展示后的效果，对应的PromQL语句: node_cpu_seconds_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${query_cpu_mode}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7278),alt:"1731394242359"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7279),alt:"1731394250451"}})]),s._v(" "),t("p",[s._v("案例： 查询集群的总内存")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7280),alt:"1731394564709"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7281),alt:"1731394604996"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("我们定义一个"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"instance"')]),s._v("变量，并勾选"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Multi-value"')]),s._v("选项。\n我们就可以选择多个主机的信息进行查看啦~对应的PromQL语句: node_memory_MemTotal_bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${instance}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7282),alt:"1731394725790"}})]),s._v(" "),t("p",[s._v("统计使用内存使用率：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7283),alt:"1731394788309"}})]),s._v(" "),t("p",[s._v("变量的嵌套：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7284),alt:"1731394832543"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("我们定义device变量，引用了instance变量。\n\n当我们修改了instance变量时，对应的device的网卡设备可能也会随之变化哟~\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7285),alt:"1731394869480"}})]),s._v(" "),t("h3",{attrs:{id:"_18-导入第三方模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18-导入第三方模板"}},[s._v("#")]),s._v(" 18，导入第三方模板")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7286),alt:"1731395187127"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("参考链接:https://grafana.com/grafana/dashboards/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7287),alt:"1731395245843"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7288),alt:"1731395257217"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7289),alt:"1731395344182"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7290),alt:"1731395363392"}})]),s._v(" "),t("h3",{attrs:{id:"_19-本地grafana的dashboard备份和恢复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_19-本地grafana的dashboard备份和恢复"}},[s._v("#")]),s._v(" 19，本地grafana的dashboard备份和恢复")]),s._v(" "),t("p",[t("img",{attrs:{src:a(7291),alt:"1731394934452"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("dashboard导出相当于备份，而且也可以给其他人共享。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:a(7292),alt:"1731394998267"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(7293),alt:"1731395029361"}})]),s._v(" "),t("h3",{attrs:{id:"_20-grafana基于dashboard实现角色访问控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-grafana基于dashboard实现角色访问控制"}},[s._v("#")]),s._v(" 20，grafana基于dashboard实现角色访问控制")]),s._v(" "),t("p",[s._v("参考：https://www.cnblogs.com/yinzhengjie/p/18536246")])])}),[],!1,null,null,null);t.default=e.exports},7212:function(s,t,a){s.exports=a.p+"assets/img/1731335464480.cdc06f08.png"},7213:function(s,t,a){s.exports=a.p+"assets/img/1731373054853.cde47879.png"},7214:function(s,t,a){s.exports=a.p+"assets/img/1731373640504.00a13825.png"},7215:function(s,t,a){s.exports=a.p+"assets/img/1731373956079.6790b792.png"},7216:function(s,t,a){s.exports=a.p+"assets/img/1731337202518.3d9e0a16.png"},7217:function(s,t,a){s.exports=a.p+"assets/img/1731374535749.cbdeb85e.png"},7218:function(s,t,a){s.exports=a.p+"assets/img/1731374786364.ac4dbedb.png"},7219:function(s,t,a){s.exports=a.p+"assets/img/1731374796672.200597cd.png"},7220:function(s,t,a){s.exports=a.p+"assets/img/1731375628224.9b5ca7fd.png"},7221:function(s,t,a){s.exports=a.p+"assets/img/1731375662445.83dd1443.png"},7222:function(s,t,a){s.exports=a.p+"assets/img/1731380451418.1725d025.png"},7223:function(s,t,a){s.exports=a.p+"assets/img/1731380435537.3d256091.png"},7224:function(s,t,a){s.exports=a.p+"assets/img/1731380525073.42d53bc8.png"},7225:function(s,t,a){s.exports=a.p+"assets/img/1731380567725.8ace683b.png"},7226:function(s,t,a){s.exports=a.p+"assets/img/1731380612816.a811d452.png"},7227:function(s,t,a){s.exports=a.p+"assets/img/1731380646168.5ee27f9e.png"},7228:function(s,t,a){s.exports=a.p+"assets/img/1731380676944.a2dfd2ae.png"},7229:function(s,t,a){s.exports=a.p+"assets/img/1731380709402.07f91583.png"},7230:function(s,t,a){s.exports=a.p+"assets/img/1731381195440.ec79c5b0.png"},7231:function(s,t,a){s.exports=a.p+"assets/img/1731381442798.943a1d4b.png"},7232:function(s,t,a){s.exports=a.p+"assets/img/1731381456259.1e11885f.png"},7233:function(s,t,a){s.exports=a.p+"assets/img/1731381470918.545aeba3.png"},7234:function(s,t,a){s.exports=a.p+"assets/img/1731381484638.90213489.png"},7235:function(s,t,a){s.exports=a.p+"assets/img/1731381511504.a9f09301.png"},7236:function(s,t,a){s.exports=a.p+"assets/img/1731381550818.73f54200.png"},7237:function(s,t,a){s.exports=a.p+"assets/img/1731381642142.0601eea7.png"},7238:function(s,t,a){s.exports=a.p+"assets/img/1731381765306.9367ab6f.png"},7239:function(s,t,a){s.exports=a.p+"assets/img/1731385890176.27ae70b9.png"},7240:function(s,t,a){s.exports=a.p+"assets/img/1731386305569.5e22e836.png"},7241:function(s,t,a){s.exports=a.p+"assets/img/1731386312693.cfbf8bc9.png"},7242:function(s,t,a){s.exports=a.p+"assets/img/1731386396883.084ea33a.png"},7243:function(s,t,a){s.exports=a.p+"assets/img/1731386436384.b785f46e.png"},7244:function(s,t,a){s.exports=a.p+"assets/img/1731386524787.b3a9eeb2.png"},7245:function(s,t,a){s.exports=a.p+"assets/img/1731386539781.8b01248a.png"},7246:function(s,t,a){s.exports=a.p+"assets/img/1731386652437.a2246715.png"},7247:function(s,t,a){s.exports=a.p+"assets/img/1731386761942.70d790ce.png"},7248:function(s,t,a){s.exports=a.p+"assets/img/1731386812322.7416b8a7.png"},7249:function(s,t,a){s.exports=a.p+"assets/img/1731386842333.6370218b.png"},7250:function(s,t,a){s.exports=a.p+"assets/img/1731387091270.db86ccf7.png"},7251:function(s,t,a){s.exports=a.p+"assets/img/1731387135644.24f7c32a.png"},7252:function(s,t,a){s.exports=a.p+"assets/img/1731387199474.539c4a8d.png"},7253:function(s,t,a){s.exports=a.p+"assets/img/1731387327165.a7a29189.png"},7254:function(s,t,a){s.exports=a.p+"assets/img/1731387534131.bfad744f.png"},7255:function(s,t,a){s.exports=a.p+"assets/img/1731387648308.88c0384c.png"},7256:function(s,t,a){s.exports=a.p+"assets/img/1731387808859.dcca6459.png"},7257:function(s,t,a){s.exports=a.p+"assets/img/1731388319474.5e75ecb0.png"},7258:function(s,t,a){s.exports=a.p+"assets/img/1731388392875.4340f0ac.png"},7259:function(s,t,a){s.exports=a.p+"assets/img/1731388448560.a99b31ea.png"},7260:function(s,t,a){s.exports=a.p+"assets/img/1731388579782.2ad7fc96.png"},7261:function(s,t,a){s.exports=a.p+"assets/img/1731388720452.e28b4bda.png"},7262:function(s,t,a){s.exports=a.p+"assets/img/1731388835264.4b4b4aa9.png"},7263:function(s,t,a){s.exports=a.p+"assets/img/1731388937403.d6dde3a8.png"},7264:function(s,t,a){s.exports=a.p+"assets/img/1731389042382.0b0d07d1.png"},7265:function(s,t,a){s.exports=a.p+"assets/img/1731389912495.8fa436f6.png"},7266:function(s,t,a){s.exports=a.p+"assets/img/1731390011280.608a3eb0.png"},7267:function(s,t,a){s.exports=a.p+"assets/img/1731390043773.fb9a8b94.png"},7268:function(s,t){s.exports="data:image/png;base64,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AAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwqHDAgAAAAAAFA4dFgAAAAAAoHDosAAAAAAAAIVDhwUAAAAAACgcOiwAAAAAAEDh0GEBAAAAAAAKhw4LAAAAAABQOHRYAAAAAACAwvn/L0P9SZk1cLQAAAAASUVORK5CYII="},7269:function(s,t,a){s.exports=a.p+"assets/img/1731390166530.b90f9f76.png"},7270:function(s,t,a){s.exports=a.p+"assets/img/1731392722554.47c6733c.png"},7271:function(s,t,a){s.exports=a.p+"assets/img/1731392758490.668bf716.png"},7272:function(s,t,a){s.exports=a.p+"assets/img/1731393353228.85956466.png"},7273:function(s,t,a){s.exports=a.p+"assets/img/1731393710633.6fb2f8f4.png"},7274:function(s,t,a){s.exports=a.p+"assets/img/1731393763374.63fd54f6.png"},7275:function(s,t,a){s.exports=a.p+"assets/img/1731394112447.af93e6ce.png"},7276:function(s,t,a){s.exports=a.p+"assets/img/1731394124797.d5ef9fee.png"},7277:function(s,t,a){s.exports=a.p+"assets/img/1731394132824.e49c7303.png"},7278:function(s,t,a){s.exports=a.p+"assets/img/1731394242359.701b8549.png"},7279:function(s,t,a){s.exports=a.p+"assets/img/1731394250451.00f4e8e7.png"},7280:function(s,t,a){s.exports=a.p+"assets/img/1731394564709.b1655cfc.png"},7281:function(s,t,a){s.exports=a.p+"assets/img/1731394604996.584d5dad.png"},7282:function(s,t,a){s.exports=a.p+"assets/img/1731394725790.d87770aa.png"},7283:function(s,t,a){s.exports=a.p+"assets/img/1731394788309.9a7b0856.png"},7284:function(s,t,a){s.exports=a.p+"assets/img/1731394832543.dbe352e7.png"},7285:function(s,t,a){s.exports=a.p+"assets/img/1731394869480.32262037.png"},7286:function(s,t,a){s.exports=a.p+"assets/img/1731395187127.4a077bfb.png"},7287:function(s,t,a){s.exports=a.p+"assets/img/1731395245843.6697f990.png"},7288:function(s,t,a){s.exports=a.p+"assets/img/1731395257217.582ff6fb.png"},7289:function(s,t,a){s.exports=a.p+"assets/img/1731395344182.4fa5c90a.png"},7290:function(s,t,a){s.exports=a.p+"assets/img/1731395363392.285026f6.png"},7291:function(s,t,a){s.exports=a.p+"assets/img/1731394934452.81cb6bba.png"},7292:function(s,t,a){s.exports=a.p+"assets/img/1731394998267.1bc6e088.png"},7293:function(s,t,a){s.exports=a.p+"assets/img/1731395029361.06a52583.png"}}]);