(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{14509:function(a,s,e){"use strict";e.r(s);var r=e(2),t=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"kafka集群配置操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka集群配置操作"}},[a._v("#")]),a._v(" kafka集群配置操作")]),a._v(" "),s("h2",{attrs:{id:"_1、配置节点标识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、配置节点标识"}},[a._v("#")]),a._v(" 1、配置节点标识")]),a._v(" "),s("p",[a._v("以三节点集群为例，在各服务器上"),s("code",[a._v("kafka")]),a._v("目录依次执行以下命令：")]),a._v(" "),s("ul",[s("li",[a._v("[ kafka-1 执行 ]")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s#^broker\\.id=.*#broker.id=0#g'")]),a._v(" config/server.properties\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("[ kafka-2 执行 ]")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s#^broker\\.id=.*#broker.id=1#g'")]),a._v(" config/server.properties\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("[ kafka-3 执行 ]")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s#^broker\\.id=.*#broker.id=2#g'")]),a._v(" config/server.properties\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("如果是单机部署的伪集群，那么还需要修改各个"),s("code",[a._v("kafka")]),a._v("配置文件中的"),s("code",[a._v("listeners")]),a._v("选项来修改端口，"),s("code",[a._v("log.dirs")]),a._v("选项来修改数据目录。")]),a._v(" "),s("h2",{attrs:{id:"_2、统一zookeeper地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、统一zookeeper地址"}},[a._v("#")]),a._v(" 2、统一zookeeper地址")]),a._v(" "),s("p",[a._v("将各"),s("code",[a._v("kafka")]),a._v("连接的"),s("code",[a._v("zookeeper")]),a._v("地址配置成一样。")]),a._v(" "),s("h2",{attrs:{id:"_3、验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、验证"}},[a._v("#")]),a._v(" 3、验证")]),a._v(" "),s("ul",[s("li",[a._v("在"),s("code",[a._v("kafka1")]),a._v("上创建"),s("code",[a._v("topic")])])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.1:9092\nbin/kafka-topics.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--create")]),a._v(" --bootstrap-server "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${kafka1}")]),a._v(" --replication-factor "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--partitions")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" test-cluster-topic\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ul",[s("li",[a._v("在"),s("code",[a._v("kafka2")]),a._v("和"),s("code",[a._v("kafka3")]),a._v("上获取主题，如果能获取到，那么集群就建立了")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.2:9092\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka3")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.3:9092\nbin/kafka-topics.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" --bootstrap-server "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${kafka2}")]),a._v("\nbin/kafka-topics.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" --bootstrap-server "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${kafka3}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h4",{attrs:{id:"生产消息命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生产消息命令"}},[a._v("#")]),a._v(" 生产消息命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.1:9092\nbin/kafka-console-producer.sh --bootstrap-server "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${kafka1}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" test-cluster-topic\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h4",{attrs:{id:"消费消息命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#消费消息命令"}},[a._v("#")]),a._v(" 消费消息命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.2:9092\nbin/kafka-console-consumer.sh --bootstrap-server "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${kafka2}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" test-cluster-topic --from-beginning\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);